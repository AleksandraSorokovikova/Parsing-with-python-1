<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/452954\/"},"headline":"Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети","datePublished":"2019-05-22T16:02:52+03:00","dateModified":"2019-05-22T16:26:50+03:00","author":{"@type":"Person","name":"htn"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Техн...","url":"https:\/\/habr.com\/ru\/post\/452954\/#post-content-body","about":["h_mesh_networking","h_machine_learning","h_home_automation","f_develop","f_popsci"],"image":["https:\/\/habr.com\/share\/publication\/452954\/59059fe8ce159692bf2df984ff5718ad\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/452954/59059fe8ce159692bf2df984ff5718ad/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/452954/59059fe8ce159692bf2df984ff5718ad/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/452954/59059fe8ce159692bf2df984ff5718ad/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/452954/59059fe8ce159692bf2df984ff5718ad/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/452954/59059fe8ce159692bf2df984ff5718ad/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="452954" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-22T13:02:52.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/452954/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/452954/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/452954/59059fe8ce159692bf2df984ff5718ad/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/452954/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/htn/" title="htn" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/htn/" class="tm-user-info__username">
      htn
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-22T13:02:52.000Z" title="2019-05-22, 16:02">22  мая  2019 в 16:02</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/mesh_networking/" class="tm-article-snippet__hubs-item-link"><span>Mesh-сети</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/machine_learning/" class="tm-article-snippet__hubs-item-link"><span>Машинное обучение</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/home_automation/" class="tm-article-snippet__hubs-item-link"><span>Умный дом</span> <!----></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Из песочницы
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей позволяет нам не только оперативно разворачивать систему, но и добиваться высоких показателей по её отказоустойчивости и скорости работы. Свое решение мы успешно протестировали на реальном объекте с ёмкостью сети в 120 устройств.<br/>
<br/>
<h4>Зачем нам понадобилась mesh-сеть</h4><br/>
С момента появления концепции «умного дома» головное устройство считалось его «сердцем» и «мозгом». Но постепенно хабы перестают быть необходимыми и скоро вовсе уйдут в прошлое. Данную тенденцию подтверждают и крупные игроки вроде Google и Amazon. Google вот уже несколько лет предлагает ячеистые маршрутизаторы, а Amazon не так давно купила компанию Eero, чтобы усилить свои позиции на рынке умных домов.<br/>
<br/>
В своих продуктах мы используем mesh-сети, так как они решают сразу несколько проблем. Во-первых, обеспечивают бесперебойную работу системы. Обычно если хаб вышел из строя или потерял связь с интернетом, система, фактически, отключается, устройства перестают откликаться и выполнять свои основные функции. Mesh-сети позволяют этого избежать. Даже если одно устройство вышло из строя, остальные продолжат работать в прежнем режиме. Пользователь лишь получит уведомление о неисправности. <a name="habracut"></a><br/>
<br/>
Во-вторых, mesh-сети помогают маршрутизировать трафик. В нашей системе все устройства способны ретранслировать сигнал так, что зона покрытия сети становится практически неограниченной. В случае изменения конфигурации сети, система самостоятельно определит оптимальный маршрут. <br/>
<br/>
В сети, созданной на основе нашего решения, может работать практически неограниченное количество устройств на значительном расстоянии друг от друга. Полученная расчетным методом эта цифра составляет 10 в 10 степени, что на данный момент невозможно обеспечить в виду ограниченного объёма оперативной памяти в устройствах.<br/>
<br/>
<h4>Что такое «умный дом» (на наш взгляд)</h4><br/>
Большинство решений, представленных сегодня на рынке, — это просто набор датчиков и исполнительных устройств, которые ограничены в возможностях. Как правило, это дистанционный пульт в виде мобильного приложения, отдельного планшета или умной колонки, которые позволяют настраивать температуру, включать-выключать бытовую технику, регулировать освещение и настраивать примитивные сценарии автономной работы. Давайте признаем, что «умного» в этом мало, это просто очередная игрушка.<br/>
<br/>
Поэтому мы и задались целью создать адаптивную систему домашней автоматизации на основе mesh-сети. По мере использования наша система анализирует привычки и поведение пользователей. Благодаря этому, со временем она начинает адаптировать все сценарии и настройки под конкретного пользователя, предлагать новые сценарии и, после одобрения владельца, настраивать их самостоятельно. <br/>
<br/>
Архитектура системы построена таким образом, что головная коробка не требуется. Отдельно взятое устройство может работать само по себе, используя весь заложенный в него функционал.<br/>
<br/>
Ещё одна особенность нашего решения: перед тем, как принять решение, система собирает данные сразу из нескольких источников (например, с камеры, датчика качества воздуха, датчика присутствия и т.д.). Это стало возможным благодаря тому, что все устройства системы самодостаточны и способны обмениваться информацией между собой напрямую. Что позволило нам в значительной мере сократить вероятность некорректной реализации действий в рамках заданного сценария. <br/>
<br/>
Вся информация обрабатывается внутри системы (а не сервером или центральным хабом) распределённым способом. Что имеется в виду? Если одному из устройств с автономным питанием необходимо произвести сложные и энергозатратные вычисления, то система перенаправит эту задачу ближайшему устройству, имеющему постоянное сетевое питание. Такой подход обеспечивает приемлемый срок автономной работы для устройств с автономным питанием и ускоряет процесс принятия решения. <br/>
<br/>
Отдельно хотелось бы отметить простоту процедуры подключения. Для этого не надо ничего настраивать, сканировать QR-коды и прочее. Достаточно приложить телефон с приложением к устройству — и все: оно уже в сети, получило основные настройки и готово к работе! <br/>
<br/>
<h4>Ключевые особенности нашей mesh-сети</h4><br/>
Изначально мы хотели использовать доступное решение ESP-MESH компании Espressif. Но проанализировав его, поняли, что оно нам не вполне подходит. Поэтому пришлось изобретать свое. Наши ключевые преимущества— время построения, автоматическая смена канала при его загрузке, скорость сети и маршрутизации.<br/>
<br/>
Самовосстановление — это автоматическое обнаружение и устранение сбоев в сети. Если вдруг какое-то устройство вышло из строя и сигнал утерян, сеть из оставшихся устройств перестроится самостоятельно. Сборка сети с момента включения занимает до 15 секунд, а на перестроение необходимо не более 6 секунд. Поддержка между нодами при переадресации — менее 10 миллисекунд. И это реальные цифры, полученные в ходе тестирования на одном из наших крупных объектов. В целом же — это средний показатель для военных объектов и избыточный — в нашем сегменте. Можно сказать, у нас гигантский запас!<br/>
<br/>
Еще один важный параметр — маршрутизация, как сигнал передается от одного устройства к другому. Обычно все элементы аналогичных решений работают на тех же частотах, что и Wi-Fi — 2,4 Гц. Протоколы используют алгоритмы с учетом состояния эфирных каналов. Наше решение позволяет менять канал без влияния на производительность сети. Например, на объекте все устройства по периметру работают на 13-м канале. Но в центре помещения на этом канале возникли помехи. В таком случае устройство, которое передает сигнал, автоматически сменит канал и обойдет проблемную зону. Остальные устройства, оснащенные нашим модулем, организуются между собой и выберут оптимальные частоты. <br/>
<br/>
Чтобы достичь высокой скорости маршрутизации, мы оптимизировали все программное обеспечение под аппаратную часть. Под каждый процессор и сопроцессор писали код на Ассемблере. Это позволило понизить энергопотребление и увеличить скорость работы сети в 15 раз. <br/>
<br/>
Теоретическая максимальная емкость нашей сети огромна. Очевидно, что на практике её мы не сможем проверить. Во время тестов мы подключали к сети более 300 устройств, и система работала стабильно. То есть наше решение позволит легко покрыть торговый центр и для этого не придется штробить стены, прокладывать дополнительную проводку, долго и мучительно настраивать сеть. Достаточно установить наши устройства, где это необходимо. Даже если это будет на передвижном объекте, они всегда будут в сети. <br/>
<br/>
Для сохранности пользовательских данных мы используем двойное шифрование, которое базируется на протоколе AES, признанном одним из самых надежных. Трафик туннелируется между сервером и устройством или между парой устройств. Это исключает возможность получения доступа к системе посредством взлома WI-FI сети.<br/>
<br/>
Мы подали заявку на получение патента на полезную модель по применению нашего алгоритма самоорганизующейся сети в целях автоматизации помещений. Она прошла предварительную оценку и сейчас находится на рассмотрении. <br/>
<br/>
<h4>Пример внедрения нашего решения</h4><br/>
Наша команда осуществила масштабный проект по модернизации освещения ледового дворца «Химик» в г.Новополоцк. Там все осветительное оборудование (в количестве 120 единиц), выполнено с функцией дистанционного управления интенсивностью светового потока и удаленного включения/выключения с доступом через сеть Wi-Fi и Bluetooth. <br/>
<br/>
Также возможна настройка автономных сценариев работы. Например, в дежурном режиме уровень освещенности, в целях экономии электроэнергии, не должен превышать 100 люкс. Во время тренировок — 600. А во время хоккейного матча с телетрансляцией этот показатель должен составлять не менее 1200 люкс. Для установки системы не потребовалось прокладывать дополнительную проводку, изменять конфигурацию сети и прочих затрат. Архитектура системы полностью построена на основе нашей mesh-сети. Достаточно было установить новые светодиодные светильники с блоками управления. <br/>
<br/>
После модернизации ледовая арена по уровню освещенности стала соответствовать жестким требованиям Федерации хоккея Республики Беларусь для проведения прямых международных телевизионных трансляций. <br/>
<br/>
<h4>Зачем нам нужны нейросети и как мы их обучаем</h4><br/>
В своем решении мы также используем технологии искусственного интеллекта, в частности, нейросети. Как уже отмечалось ранее, все данные собирают модули, установленные в устройствах системы автоматизации помещения и все вычисления осуществляются внутри системы. Поэтому чем больше в системе устройств, тем лучше и быстрее они распределяют сложные вычисления между собой.<br/>
<br/>
Как правило, разработчики обучают нейросети на больших массивах данных. Но в нашем случае обучение имеет специфику. Нашей нейросети не надо знать, как выглядят, условно, африканские обезьяны. В то же время для обучения сети нужны триггеры. Мы придумали, как на аппаратном уровне сделать так, чтобы устройства обучались по определенным событиям, система целенаправленно изучает привычки пользователей. Первое время сеть реализует заранее продуманные сценарии, чтобы понять, какие условия для пользователей наиболее комфортны. Затем она, используя накопленный опыт, подбирает режимы освещения, отопления и вентиляции, максимально комфортные для конкретного пользователя. Со временем система забирает на себя часть функций по управлению домом, квартирой или другим объектом. <br/>
<br/>
Наша задача, чтобы пользователям было максимально комфортно и сами они практически ничего не меняли в настройках системы, их все устраивало.<br/>
<br/>
Благодаря тому, что система полностью автономна, данные хранятся в энергонезависимой памяти самих устройств, работа системы не зависит от доступа в интернет. Если он внезапно исчез, она продолжит работать, предлагать сценарии и самообучаться. В нашем случае интернет нужен лишь для организации удаленного доступа и связи с сервером, если пользователь хочет хранить определенные данные в облаке (например, записи с видеокамер). <br/>
<br/>
<h4>Планы по внедрению технического зрения</h4><br/>
К концу года мы планируем частичный релиз линейки устройств для нашей адаптивной системы автоматизации помещений. В него войдет практически все, что перечислено выше, за исключением видеокамер.<br/>
<br/>
Видеокамера с элементами технического зрения находится сейчас в разработке. Видеоданные мы планируем передавать сразу с нескольких камер. Здесь также стараемся внедрить новаторский подход. Наше решение использует две нейросети для обнаружения и сопровождения людей в помещении (решается задача мультитрекинга) в режиме реального времени с применением технологии CUDA. Для сопровождения предложена и обучена модель нейросети, которая по результатам тестов превосходит по четырем основным параметрам DeepSort, который показал наилучшие результаты в соревновании MOT16, в рамках MOTChallenge. <br/>
<br/>
Известно, что проектирование моделей нейросетей требует значительных временных ресурсов на разработку, также необходимо проведение множества экспериментов.Таким образом, система не только знает количество человек в помещении, но и обеспечивает их трекинг, который устойчиво работает даже в ситуации, когда люди выходят из кадра, а затем возвращаются. Наша нейросеть уже распознает людей по 128 признакам и определяет их по системе «свой/чужой». На сегодняшний день, перспективным является реализация работ по адаптации технологии сопровождения людей по видео последовательностям, полученным с разных камер внутри помещения. Со временем мы планируем добавить определение нестандартных паттернов поведения (например, падение или драка) и обнаружение пламени или дыма. Наработки в этих областях уже имеются.</div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%83%D0%BC%D0%BD%D1%8B%D0%B9%20%D0%B4%D0%BE%D0%BC%5D" class="tm-tags-list__link">умный дом</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmesh%20%D1%81%D0%B5%D1%82%D1%8C%5D" class="tm-tags-list__link">mesh сеть</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BC%D0%B0%D1%88%D0%B8%D0%BD%D0%BD%D0%BE%D0%B5%20%D0%B7%D1%80%D0%B5%D0%BD%D0%B8%D0%B5%5D" class="tm-tags-list__link">машинное зрение</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BD%D0%B5%D0%B9%D1%80%D0%BE%D1%81%D0%B5%D1%82%D0%B8%5D" class="tm-tags-list__link">нейросети</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bespressif%5D" class="tm-tags-list__link">espressif</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/mesh_networking/" class="tm-hubs-list__link">
    Mesh-сети
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/machine_learning/" class="tm-hubs-list__link">
    Машинное обучение
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/home_automation/" class="tm-hubs-list__link">
    Умный дом
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 14: ↑13 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 14: ↑13 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+12</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.3K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    41
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/htn/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 6 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    6
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/htn/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @htn
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/452954/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 2 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/452954/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/452954/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"452954":{"id":"452954","timePublished":"2019-05-22T13:02:52+00:00","isCorporative":false,"lang":"ru","titleHtml":"Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети","leadData":{"textHtml":"На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей позволяет нам не только оперативно разворачивать систему, но и добиваться высоких показателей по её отказоустойчивости и скорости работы. Свое решение мы успешно протестировали на реальном объекте с ёмкостью сети в 120 устройств.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Ch4\u003EЗачем нам понадобилась mesh-сеть\u003C\u002Fh4\u003E\u003Cbr\u003E\r\nС момента появления концепции «умного дома» головное устройство считалось его «сердцем» и «мозгом». Но постепенно хабы перестают быть необходимыми и скоро вовсе уйдут в прошлое. Данную тенденцию подтверждают и крупные игроки вроде Google и Amazon. Google вот уже несколько лет предлагает ячеистые маршрутизаторы, а Amazon не так давно купила компанию Eero, чтобы усилить свои позиции на рынке умных домов.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ своих продуктах мы используем mesh-сети, так как они решают сразу несколько проблем. Во-первых, обеспечивают бесперебойную работу системы. Обычно если хаб вышел из строя или потерял связь с интернетом, система, фактически, отключается, устройства перестают откликаться и выполнять свои основные функции. Mesh-сети позволяют этого избежать. Даже если одно устройство вышло из строя, остальные продолжат работать в прежнем режиме. Пользователь лишь получит уведомление о неисправности.","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"sandbox","data":null}],"author":{"scoreStats":{"score":6,"votesCount":6},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"2057337","alias":"htn","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":2,"favoritesCount":41,"readingCount":4311,"score":12,"votesCount":14},"hubs":[{"relatedData":null,"id":"18290","alias":"mesh_networking","type":"collective","title":"Mesh-сети","titleHtml":"Mesh-сети","isProfiled":true},{"relatedData":null,"id":"19439","alias":"machine_learning","type":"collective","title":"Машинное обучение","titleHtml":"Машинное обучение","isProfiled":true},{"relatedData":null,"id":"21966","alias":"home_automation","type":"collective","title":"Умный дом","titleHtml":"Умный дом","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EНа этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей позволяет нам не только оперативно разворачивать систему, но и добиваться высоких показателей по её отказоустойчивости и скорости работы. Свое решение мы успешно протестировали на реальном объекте с ёмкостью сети в 120 устройств.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЗачем нам понадобилась mesh-сеть\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nС момента появления концепции «умного дома» головное устройство считалось его «сердцем» и «мозгом». Но постепенно хабы перестают быть необходимыми и скоро вовсе уйдут в прошлое. Данную тенденцию подтверждают и крупные игроки вроде Google и Amazon. Google вот уже несколько лет предлагает ячеистые маршрутизаторы, а Amazon не так давно купила компанию Eero, чтобы усилить свои позиции на рынке умных домов.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ своих продуктах мы используем mesh-сети, так как они решают сразу несколько проблем. Во-первых, обеспечивают бесперебойную работу системы. Обычно если хаб вышел из строя или потерял связь с интернетом, система, фактически, отключается, устройства перестают откликаться и выполнять свои основные функции. Mesh-сети позволяют этого избежать. Даже если одно устройство вышло из строя, остальные продолжат работать в прежнем режиме. Пользователь лишь получит уведомление о неисправности. \u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВо-вторых, mesh-сети помогают маршрутизировать трафик. В нашей системе все устройства способны ретранслировать сигнал так, что зона покрытия сети становится практически неограниченной. В случае изменения конфигурации сети, система самостоятельно определит оптимальный маршрут. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ сети, созданной на основе нашего решения, может работать практически неограниченное количество устройств на значительном расстоянии друг от друга. Полученная расчетным методом эта цифра составляет 10 в 10 степени, что на данный момент невозможно обеспечить в виду ограниченного объёма оперативной памяти в устройствах.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЧто такое «умный дом» (на наш взгляд)\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nБольшинство решений, представленных сегодня на рынке, — это просто набор датчиков и исполнительных устройств, которые ограничены в возможностях. Как правило, это дистанционный пульт в виде мобильного приложения, отдельного планшета или умной колонки, которые позволяют настраивать температуру, включать-выключать бытовую технику, регулировать освещение и настраивать примитивные сценарии автономной работы. Давайте признаем, что «умного» в этом мало, это просто очередная игрушка.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПоэтому мы и задались целью создать адаптивную систему домашней автоматизации на основе mesh-сети. По мере использования наша система анализирует привычки и поведение пользователей. Благодаря этому, со временем она начинает адаптировать все сценарии и настройки под конкретного пользователя, предлагать новые сценарии и, после одобрения владельца, настраивать их самостоятельно. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАрхитектура системы построена таким образом, что головная коробка не требуется. Отдельно взятое устройство может работать само по себе, используя весь заложенный в него функционал.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕщё одна особенность нашего решения: перед тем, как принять решение, система собирает данные сразу из нескольких источников (например, с камеры, датчика качества воздуха, датчика присутствия и т.д.). Это стало возможным благодаря тому, что все устройства системы самодостаточны и способны обмениваться информацией между собой напрямую. Что позволило нам в значительной мере сократить вероятность некорректной реализации действий в рамках заданного сценария. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВся информация обрабатывается внутри системы (а не сервером или центральным хабом) распределённым способом. Что имеется в виду? Если одному из устройств с автономным питанием необходимо произвести сложные и энергозатратные вычисления, то система перенаправит эту задачу ближайшему устройству, имеющему постоянное сетевое питание. Такой подход обеспечивает приемлемый срок автономной работы для устройств с автономным питанием и ускоряет процесс принятия решения. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОтдельно хотелось бы отметить простоту процедуры подключения. Для этого не надо ничего настраивать, сканировать QR-коды и прочее. Достаточно приложить телефон с приложением к устройству — и все: оно уже в сети, получило основные настройки и готово к работе! \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EКлючевые особенности нашей mesh-сети\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nИзначально мы хотели использовать доступное решение ESP-MESH компании Espressif. Но проанализировав его, поняли, что оно нам не вполне подходит. Поэтому пришлось изобретать свое. Наши ключевые преимущества— время построения, автоматическая смена канала при его загрузке, скорость сети и маршрутизации.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамовосстановление — это автоматическое обнаружение и устранение сбоев в сети. Если вдруг какое-то устройство вышло из строя и сигнал утерян, сеть из оставшихся устройств перестроится самостоятельно. Сборка сети с момента включения занимает до 15 секунд, а на перестроение необходимо не более 6 секунд. Поддержка между нодами при переадресации — менее 10 миллисекунд. И это реальные цифры, полученные в ходе тестирования на одном из наших крупных объектов. В целом же — это средний показатель для военных объектов и избыточный — в нашем сегменте. Можно сказать, у нас гигантский запас!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕще один важный параметр — маршрутизация, как сигнал передается от одного устройства к другому. Обычно все элементы аналогичных решений работают на тех же частотах, что и Wi-Fi — 2,4 Гц. Протоколы используют алгоритмы с учетом состояния эфирных каналов. Наше решение позволяет менять канал без влияния на производительность сети. Например, на объекте все устройства по периметру работают на 13-м канале. Но в центре помещения на этом канале возникли помехи. В таком случае устройство, которое передает сигнал, автоматически сменит канал и обойдет проблемную зону. Остальные устройства, оснащенные нашим модулем, организуются между собой и выберут оптимальные частоты. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы достичь высокой скорости маршрутизации, мы оптимизировали все программное обеспечение под аппаратную часть. Под каждый процессор и сопроцессор писали код на Ассемблере. Это позволило понизить энергопотребление и увеличить скорость работы сети в 15 раз. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеоретическая максимальная емкость нашей сети огромна. Очевидно, что на практике её мы не сможем проверить. Во время тестов мы подключали к сети более 300 устройств, и система работала стабильно. То есть наше решение позволит легко покрыть торговый центр и для этого не придется штробить стены, прокладывать дополнительную проводку, долго и мучительно настраивать сеть. Достаточно установить наши устройства, где это необходимо. Даже если это будет на передвижном объекте, они всегда будут в сети. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля сохранности пользовательских данных мы используем двойное шифрование, которое базируется на протоколе AES, признанном одним из самых надежных. Трафик туннелируется между сервером и устройством или между парой устройств. Это исключает возможность получения доступа к системе посредством взлома WI-FI сети.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМы подали заявку на получение патента на полезную модель по применению нашего алгоритма самоорганизующейся сети в целях автоматизации помещений. Она прошла предварительную оценку и сейчас находится на рассмотрении. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EПример внедрения нашего решения\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nНаша команда осуществила масштабный проект по модернизации освещения ледового дворца «Химик» в г.Новополоцк. Там все осветительное оборудование (в количестве 120 единиц), выполнено с функцией дистанционного управления интенсивностью светового потока и удаленного включения\u002Fвыключения с доступом через сеть Wi-Fi и Bluetooth. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже возможна настройка автономных сценариев работы. Например, в дежурном режиме уровень освещенности, в целях экономии электроэнергии, не должен превышать 100 люкс. Во время тренировок — 600. А во время хоккейного матча с телетрансляцией этот показатель должен составлять не менее 1200 люкс. Для установки системы не потребовалось прокладывать дополнительную проводку, изменять конфигурацию сети и прочих затрат. Архитектура системы полностью построена на основе нашей mesh-сети. Достаточно было установить новые светодиодные светильники с блоками управления. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле модернизации ледовая арена по уровню освещенности стала соответствовать жестким требованиям Федерации хоккея Республики Беларусь для проведения прямых международных телевизионных трансляций. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЗачем нам нужны нейросети и как мы их обучаем\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВ своем решении мы также используем технологии искусственного интеллекта, в частности, нейросети. Как уже отмечалось ранее, все данные собирают модули, установленные в устройствах системы автоматизации помещения и все вычисления осуществляются внутри системы. Поэтому чем больше в системе устройств, тем лучше и быстрее они распределяют сложные вычисления между собой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак правило, разработчики обучают нейросети на больших массивах данных. Но в нашем случае обучение имеет специфику. Нашей нейросети не надо знать, как выглядят, условно, африканские обезьяны. В то же время для обучения сети нужны триггеры. Мы придумали, как на аппаратном уровне сделать так, чтобы устройства обучались по определенным событиям, система целенаправленно изучает привычки пользователей. Первое время сеть реализует заранее продуманные сценарии, чтобы понять, какие условия для пользователей наиболее комфортны. Затем она, используя накопленный опыт, подбирает режимы освещения, отопления и вентиляции, максимально комфортные для конкретного пользователя. Со временем система забирает на себя часть функций по управлению домом, квартирой или другим объектом. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаша задача, чтобы пользователям было максимально комфортно и сами они практически ничего не меняли в настройках системы, их все устраивало.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nБлагодаря тому, что система полностью автономна, данные хранятся в энергонезависимой памяти самих устройств, работа системы не зависит от доступа в интернет. Если он внезапно исчез, она продолжит работать, предлагать сценарии и самообучаться. В нашем случае интернет нужен лишь для организации удаленного доступа и связи с сервером, если пользователь хочет хранить определенные данные в облаке (например, записи с видеокамер). \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EПланы по внедрению технического зрения\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nК концу года мы планируем частичный релиз линейки устройств для нашей адаптивной системы автоматизации помещений. В него войдет практически все, что перечислено выше, за исключением видеокамер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВидеокамера с элементами технического зрения находится сейчас в разработке. Видеоданные мы планируем передавать сразу с нескольких камер. Здесь также стараемся внедрить новаторский подход. Наше решение использует две нейросети для обнаружения и сопровождения людей в помещении (решается задача мультитрекинга) в режиме реального времени с применением технологии CUDA. Для сопровождения предложена и обучена модель нейросети, которая по результатам тестов превосходит по четырем основным параметрам DeepSort, который показал наилучшие результаты в соревновании MOT16, в рамках MOTChallenge. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИзвестно, что проектирование моделей нейросетей требует значительных временных ресурсов на разработку, также необходимо проведение множества экспериментов.Таким образом, система не только знает количество человек в помещении, но и обеспечивает их трекинг, который устойчиво работает даже в ситуации, когда люди выходят из кадра, а затем возвращаются. Наша нейросеть уже распознает людей по 128 признакам и определяет их по системе «свой\u002Fчужой». На сегодняшний день, перспективным является реализация работ по адаптации технологии сопровождения людей по видео последовательностям, полученным с разных камер внутри помещения. Со временем мы планируем добавить определение нестандартных паттернов поведения (например, падение или драка) и обнаружение пламени или дыма. Наработки в этих областях уже имеются.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"умный дом"},{"titleHtml":"mesh сеть"},{"titleHtml":"машинное зрение"},{"titleHtml":"нейросети"},{"titleHtml":"espressif"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F452954\u002F59059fe8ce159692bf2df984ff5718ad\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F452954\u002F59059fe8ce159692bf2df984ff5718ad\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F452954\\\u002F\"},\"headline\":\"Время построения, скорость сети и маршрутизации: как мы улучшили свою mesh-сеть и немного про нейросети\",\"datePublished\":\"2019-05-22T16:02:52+03:00\",\"dateModified\":\"2019-05-22T16:26:50+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"htn\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Техн...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F452954\\\u002F#post-content-body\",\"about\":[\"h_mesh_networking\",\"h_machine_learning\",\"h_home_automation\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F452954\\\u002F59059fe8ce159692bf2df984ff5718ad\\\u002F\"]}","metaDescription":"На этом ресурсе регулярно пишут о mesh-сетях. Мы хотим рассказать, как используем их в своем проекте для создания адаптивной системы автоматизации помещений.Технология самоорганизующихся сетей...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"mesh_networking,machine_learning,home_automation"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
