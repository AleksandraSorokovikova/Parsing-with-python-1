<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Veeam Backup &amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/veeam\/blog\/451770\/"},"headline":"Veeam Backup &amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик","datePublished":"2019-05-14T13:37:09+03:00","dateModified":"2019-05-14T19:01:32+03:00","author":{"@type":"Person","name":"polarowl"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя...","url":"https:\/\/habr.com\/ru\/company\/veeam\/blog\/451770\/#post-content-body","about":["c_veeam","h_virtualization","h_s_admin","h_data_recovery","h_backup","f_admin"],"image":["https:\/\/habrastorage.org\/webt\/n2\/lg\/ct\/n2lgctuzddu-htv1gqmsy-f8jx4.png","https:\/\/habrastorage.org\/webt\/zd\/as\/fl\/zdasflixvqvvo8s_nd2v1u7druq.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Veeam Backup &amp;amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Veeam Backup &amp;amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Veeam Backup &amp;amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/451770/0f4ccafd81fabcb187f83384c9fea624/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/451770/0f4ccafd81fabcb187f83384c9fea624/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/451770/0f4ccafd81fabcb187f83384c9fea624/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/451770/0f4ccafd81fabcb187f83384c9fea624/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/451770/0f4ccafd81fabcb187f83384c9fea624/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="451770" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-14T10:37:09.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/451770/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/veeam/blog/451770/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/451770/0f4ccafd81fabcb187f83384c9fea624/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/451770/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="veeam" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/veeam/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/18a/5aa/bd5/18a5aabd53c224ab3ed2402935ddea11.png" width="48" class="tm-entity-image__pic"></div></a> <a href="https://career.habr.com/companies/veeam" rel="noopener" target="_blank" class="tm-grade tm-company-card__rating"><div class="tm-rating"><div class="tm-rating__header"><svg height="24" width="24" class="tm-svg-img tm-svg-grade__icon"><title>Оценка компании на Хабр Карьере</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#grade"></use></svg> <div class="tm-rating__counter tm-rating__counter_variant-grade">4.1</div></div> <div class="tm-rating__text tm-rating__text_variant-grade">
    Оценка
  </div></div></a> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">92.1</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/veeam/profile/" class="tm-company-card__name">
        Veeam Software
      </a> <div class="tm-company-card__description">Продукты для резервного копирования информации</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/polarowl/" title="polarowl" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/b8b/53a/38c/b8b53a38c0c8b6a97687c9cc4ed61baf.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/polarowl/" class="tm-user-info__username">
      polarowl
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-14T10:37:09.000Z" title="2019-05-14, 13:37">14  мая  2019 в 13:37</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Veeam Backup &amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/veeam/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Veeam Software</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/virtualization/" class="tm-article-snippet__hubs-item-link"><span>Виртуализация</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/s_admin/" class="tm-article-snippet__hubs-item-link"><span>Серверное администрирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/data_recovery/" class="tm-article-snippet__hubs-item-link"><span>Восстановление данных</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/backup/" class="tm-article-snippet__hubs-item-link"><span>Резервное копирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://www.veeam.com/blog/manage-test-recover-backup-replica.html" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Evgenii Ivanov
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с бэкапами и репликами. Надеюсь, они помогут вам избежать типичных ошибок, и ваши реплики и бэкапы никогда не будут «слабым звеном» в процессе восстановления, если таковое потребуется. <br/>
<br/>
Итак, добро пожаловать под кат.<br/>
<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/n2/lg/ct/n2lgctuzddu-htv1gqmsy-f8jx4.png"/><br/>
<a name="habracut"></a><br/>
В предыдущей моей <a href="https://habr.com/ru/company/veeam/blog/428069/">статье</a> мы разбирались с тем, как оптимизировать нагрузку на компоненты инфраструктуры резервного копирования, и рассматривали типичные ошибки конфигурации. Переходим к другой важной теме – грамотной подготовке и выполнению восстановления. Ее мы тоже разберем на реальных примерах, с которыми довелось работать команде техподдержки.<br/>
 <br/>
<h1>Бэкап без рестора — деньги на ветер</h1><br/>
К нам регулярно обращаются пользователи, которые оказались в схожих затруднительных ситуациях: необходимо выполнить восстановление из бэкапа, но при попытке это сделать люди натыкаются на неразрешимую для них проблему. И эта проблема – вовсе не отсутствие резервной копии, деятельность CryptoLocker или что-либо подобное. Это «всего лишь» недостаточное внимание к проверке резервных копий и реплик на возможность восстановления. Многие часто фокусируются исключительно на процессе создания бэкапа, забывая о том, что просто наличие резервной копии – не панацея от возможных бед. Нужно понимать, что восстановление – это совершенно иной процесс, у которого есть свои особенности, и который обязательно нужно контролировать и тестировать до запуска в продакшене. Вот вам несколько показательных примеров:<br/>
<br/>
<ol>
<li>У пользователя произошел отказ в работе критичной виртуальной машины размером 20 ТБ. Простои, само собой, недопустимы, и админ запускает процесс мгновенного восстановления (VM instant recovery) – через 5 минут машина поднята. Но мы помним, что такое состояние машины может быть задействовано лишь временно – ее обязательно нужно мигрировать на продакшн датастору (datastore). А в этом примере, как выяснилось, возможности инфраструктуры не позволяли скопировать 20 ТБ данных за разумное время. В настройках же процесса instant recovery было выбрано сохранять изменения на диск <i>С:</i> сервера Veeam Backup &amp; Replication (в отличие от снапшота vSphere) – в результате, конечно же, свободное место на диске быстро заполнилось. К тому моменту, как пользователь обратился в поддержку, у ВМ появились изменения, которые нельзя было игнорировать. То есть имеем ситуацию, когда невозможно быстро финализировать процесс мгновенного восстановления критичной машины – как тут спасти данные? <br/>
<br/>
Признаться, за давностью лет я уже не упомню всех подробностей финала, но помню, что в итоге мы так и не придумали ничего гениального. Клиенты на своей стороне худо-бедно решили эту проблему, расширив диск С: из резервов, скопировали самые важные файлы и уж потом выключили ВМ и так мигрировали. В общем, чуда не случилось.</li>
<li>В инфраструктуре у пользователя работал один контроллер домена, и все компоненты Veeam Backup &amp; Replication были настроены с использованием DNS. Да-да, именно так, вы не ослышались. Вариантов развития событий была сотня, не меньше, а реальности все пошло вот как: люди запланировали ТО и решили переключиться на реплику своего домен-контроллера. Они задействовали плановое переключение, что, в общем-то, и рекомендуется делать в подобных ситуациях. На первом этапе все шло нормально, а на втором исходную ВМ ненадолго выключили, чтобы перенести остатки данных. Разумеется, задание переключения тут же завершилось с ошибкой, поскольку DNS перестал работать. <br/>
<br/>
К счастью, здесь нам удалось справиться с ситуацией, включив реплику вручную из vSphere (вообще-то эту операцию самостоятельно выполнять не рекомендуется, как вы увидите из следующего примера). Но, как вы понимаете, процесс техобслуживания был прерван и отложен. Вдобавок нам пришлось вручную вносить имена хостов в файл <i>C:\Windows\System32\drivers\etc\hosts</i> на сервере Veeam Backup &amp; Replication, чтобы обеспечить корректность при обратном переключении.</li>
<li>Еще у одного клиента вся инфраструктура резервного копирования была построена вокруг накопителей на магнитной ленте, а на диске хранились лишь коротенькие цепочки файлов. Когда же им понадобилось восстановить ряд файлов с большого файлового сервера, оказалось, что ни одну машину нельзя использовать в качестве вспомогательного репозитория при восстановлении с ленты, поскольку ни на одной не было достаточно свободного места. (Про восстановление с магнитной ленты напрямую и с использованием вспомогательного репозитория можно почитать <a href="https://helpcenter.veeam.com/docs/backup/vsphere/vm_restore_from_tape.html?ver=95u4">здесь</a> (пока что на англ.языке)).</li>
</ol><br/>
Думаю, что во всех трех примерах пользователи, так сказать, находились в плену иллюзий – они предположили, что если бэкап прошел успешно, то и с восстановлением проблем не будет. Но это, как вы понимаете, отнюдь не всегда так, и поэтому к восстановлению надо готовиться столь же тщательно, как и к бэкапу. Для начала стоит изучить <a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/data_protection_tasks.html">руководство пользователя</a>, где содержится довольно подробная информация о разных видах восстановления. В начале каждого параграфа перечислены требования, подготовительные действия и возможные ограничения. Описание восстановления с магнитных лент или из аппаратных снимков СХД можно найти в разделах документации и в наших <a href="https://habr.com/ru/company/veeam/blog/443716/">статьях</a> на Хабре. Кроме того, действия по подготовке восстановления объектов приложений с помощью инструментов Veeam Explorers описаны в разделе «Planning and preparation» (планирование и подготовка) <a href="https://helpcenter.veeam.com/docs/backup/explorers/veo_prerequisites.html?ver=95u4">руководства</a> для каждого из инструментов. Рекомендую с ними внимательно ознакомиться — это поможет вам правильно подготовить систему к восстановлению в случае необходимости. На русском языке инструкции для восстановления SQL Server database приведены <a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/sql_backup_and_restore.html">здесь</a>.<br/>
<br/>
<h1>Почему не надо работать с репликами из консоли vSphere?</h1><br/>
По идее, реплики Veeam представляют собой обычные виртуальные машины, с которыми, казалось бы, логично работать, применяя инструментарий vSphere, в частности, vSphere client. Однако мы не рекомендуем этого делать, и вот почему: переключение на реплику в Veeam Backup &amp; Replication – процесс достаточно непростой, требующий строго последовательного выполнения шагов (чтобы в случае чего можно было откатиться на шаг назад) и корректных завершающих действий – вы только посмотрите на картинку, иллюстрирующую процесс:<br/>
<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/zd/as/fl/zdasflixvqvvo8s_nd2v1u7druq.png"/><br/>
<br/>
Если же вы вздумаете включить реплику из vSphere client, то в дальнейшем вас с большой вероятностью ожидает ряд проблем:<br/>
<br/>
<ol>
<li>Механизм переключения на реплику из Veeam Backup &amp; replication (показанный на схеме) для этой машины работать уже не будет.</li>
<li>Данные в базе Veeam Backup не будут соответствовать реальному состоянию ВМ. В наихудшем случае для починки придется редактировать базу.</li>
<li>Возможна даже потеря данных, как вот в таком примере: пользователь вручную включил реплику в vSphere client и решил продолжить работу с ней. Через некоторое время он заметил, что реплика все еще отображается в консоли Veeam Backup &amp; Replication, и решил убрать ее за ненадобностью. Кликнул по ней правой кнопкой и дал команду <i>«Delete from disk»</i>. Veeam Backup &amp; Replication незамедлительно удалил с диска реплику, которая, на минуточку, уже вовсю использовалась как обычная ВМ и содержала нужные и полезные данные.</li>
</ol><br/>
Безусловно, бывают ситуации, когда приходится всё же включать реплику из vSphere client – как правило, это случаи, когда сервер Veeam выключен, а реплику нужно включить с задержкой. Но если с сервером Veeam все в порядке, то работать с репликами нужно именно из его консоли.<br/>
<br/>
Также не следует и удалять реплики, пользуясь vSphere client. Veeam Backup &amp; Replication останется в неведении относительно такого изменения, а это чревато ошибками и устаревшими данными. Если реплика вам более не нужна, удаляйте ее с помощью консоли Veeam, а не как ВМ из vSphere client. Так вы всегда будете иметь актуальный список реплик. <br/>
<br/>
<h1>«О» — осторожно, обновления!</h1><br/>
Тут мы имеем в виду, конечно, обновления для гипервизоров и разнообразных приложений, которые бэкапятся с помощью Veeam. Если смотреть на них с точки зрения работы с Veeam Backup &amp; Replication, то обновления можно условно разделить на 2 категории: большие, серьезные, привносящие массу изменений – и небольшие.<br/>
 <br/>
Рассмотрим сначала первую категорию. <br/>
<br/>
Самые важные обновления – те, которые предназначены для гипервизора. Перед тем, как установить такое обновление, обязательно нужно убедиться, что оно поддерживается Veeam Backup &amp; Replication. Такие обновления привносят множество изменений в библиотеки и интерфейсы APIs, которые задействует Veeam Backup &amp; Replication, поэтому для того, чтобы официально заявить об их поддержке, необходимо обновить код Veeam Backup &amp; Replication и провести тщательное тестирование. <br/>
<br/>
Надо еще иметь в виду, что, к примеру, VMware не предоставляет предварительного доступа к новейшим версиям vSphere для производителей ПО, так что разработчики и тестировщики Veeam получают новую версию одновременно со всем остальным прогрессивным человечеством – поэтому между релизом VMware и официально объявляемой поддержкой обычно проходит определенное время. Количество и разнообразие необходимых к внесению изменений таково, что в простой hotfix уместить их шансов мало – и официальная поддержка, как правило, заявляется вместе с выходом релизной версии Veeam Backup &amp; Replication. <br/>
<br/>
В итоге имеет место тот неловкий момент, когда после выхода новой версии vSphere количество заявок в техподдержку резко возрастает, ибо пользователи сломя голову несутся устанавливать новую версию, и их бэкапы, конечно, тут же немедленно перестают работать. Нам – техподдержке Veeam – приходится разъяснять пользователям, что же именно они сделали не так, просить их откатиться назад (если возможно) или придумывать замысловатые пути для выхода из тупика. <b>Поэтому до установки серьезного обновления обязательно проверяйте его совместимость с работающим у вас софтом, очень вас прошу!</b><br/>
<br/>
Всё вышесказанное относится и к приложениям, которые вы бэкапите и рассчитываете восстанавливать с помощью Veeam. У линейки инструментов Veeam Explorers тоже имеется список поддерживаемых версий соответствующих приложений, который пополняется с каждым релизом Veeam Backup &amp; Replication. Поэтому до установки новой версии вашего приложения – будь то Exchange, Oracle или SharePoint — непременно перечитайте соответствующий раздел <a href="https://helpcenter.veeam.com/docs/backup/explorers/explorers_introduction.html?ver=95u4">документации Veeam Explorers</a>.<br/>
<br/>
Ко второй категории, т.е. к небольшим обновлениям я отношу, например, новые версии VMware Tools, кумулятивные обновления Exchange, обновления безопасности vSphere, и т.д. Как правило, они не несут с собой каких-то серьезных модификаций, и в большинстве случаев Veeam Backup &amp; Replication не испытывает с ними проблем. (Поэтому для них и не бывает публичных объявлений об официальной поддержке в продукте.) Однако в нашей практике встречались случаи, когда и такие обновления столь значительно меняли привычный ход вещей, что приводили к ошибкам в работе Veeam Backup &amp; Replication. В таких ситуациях после подтверждения проблемы инженеры Veeam стараются оперативно выпустить hotfix.<br/>
<br/>
<div class="spoiler"><b class="spoiler_title">Тем, кто владеет техническим английским</b><div class="spoiler_text">Если вы хотите быть в курсе того, над чем трудятся инженеры и с чем сталкиваются системные архитекторы и специалисты техподдержки, рекомендую подписаться на <a href="https://forums.veeam.com/">наши форумы</a>. Каждую неделю для его подписчиков выходит рассылка «Word from Gostev» за авторством <a href="https://habr.com/ru/users/therealgostev/" class="user_link">TheRealGostev</a>. В ней Антон Гостев, возглавляющий департамент product management-а, рассказывает о найденных недавно проблемах (и не только на стороне Veeam), планах на новые версии и новостях из мира IT. Если вам нужно больше информации, можно проштудировать топики форума – если у кого-то из клиентов обнаруживается проблема с работой продукта после какого-либо обновления, он, скорее всего, уже написал об этом на форум.<br/>
</div></div><br/>
Как вы понимаете, патчи и обновления могут привести к проблемам не только с бэкапами, но и с приложениями, для которых эти бэкапы делаются. И тут вам помогут виртуальные лаборатории — Veeam DataLabs. Вы наверняка слышали о функциональности SureBackup, предназначенной для верификации резервных копий. Она базируется как раз-таки на использовании DataLabs, с созданием изолированной среды, в которой можно, в частности, тестировать обновления до установки их в продакшене. Очень советую так и делать – сбережете себе множество нервных клеток. А если кто-то еще не знает о SureBackup, рекомендую почитать <a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/surebackup.html">документацию</a>.<br/>
 <br/>
Пожалуй, на сегодня у меня всё, спасибо за внимание!<br/>
<br/>
<h1>Что еще почитать</h1><br/>
Статьи на Хабре:<br/>
<br/>
<ul>
<li><a href="https://habr.com/ru/company/veeam/blog/193568/">Случай в Pixar или еще раз о важности тестирования резервных копий</a></li>
<li><a href="https://habr.com/ru/company/veeam/blog/170653/">Особенности долгосрочного хранения резервных копий</a></li>
<li><a href="https://habr.com/ru/company/veeam/blog/176927/">Практические рекомендации по политике резервного копирования</a></li>
<li><a href="https://habr.com/ru/company/veeam/blog/163405/">Рекомендации по политике резервного копирования и восстановления после «Конца Света»</a></li>
</ul><br/>
<a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/data_protection_tasks.html">Руководство пользователя (на русском языке)</a></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bveeam%20backup%20and%20replication%5D" class="tm-tags-list__link">veeam backup and replication</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%BE%D1%81%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%5D" class="tm-tags-list__link">восстановление данных</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B5%D0%B7%D0%B5%D1%80%D0%B2%D0%BD%D0%BE%D0%B5%20%D0%BA%D0%BE%D0%BF%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%5D" class="tm-tags-list__link">резервное копирование</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%80%D0%B5%D0%BF%D0%BB%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">реплика</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BB%D1%83%D1%87%D1%88%D0%B8%D0%B5%20%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D0%BA%D0%B8%5D" class="tm-tags-list__link">лучшие практики</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/veeam/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Veeam Software
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/virtualization/" class="tm-hubs-list__link">
    Виртуализация
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/s_admin/" class="tm-hubs-list__link">
    Серверное администрирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/data_recovery/" class="tm-hubs-list__link">
    Восстановление данных
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/backup/" class="tm-hubs-list__link">
    Резервное копирование
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 12: ↑11 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 12: ↑11 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+10</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    29
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/veeam/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/18a/5aa/bd5/18a5aabd53c224ab3ed2402935ddea11.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/veeam/profile/" class="tm-company-snippet__title">Veeam Software</a> <div class="tm-company-snippet__description">Продукты для резервного копирования информации</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://veeam.com/ru?ad=habr" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://careers.veeam.ru/?ad=habr" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://facebook.com/VeeamTeam" rel="noopener" target="_blank" class="tm-article-author__contact">
      Facebook
    </a><a href="https://twitter.com/veeam_ru" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a><a href="https://vk.com/veeam_team" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/polarowl/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/b8b/53a/38c/b8b53a38c0c8b6a97687c9cc4ed61baf.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 49 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    23
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">4</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/polarowl/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @polarowl
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/veeam/blog/451770/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 2 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2006-10-09T20:00:00.000Z" title="2006-10-10, 00:00">10  октября  2006</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Швейцария
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://veeam.com/ru?ad=habr" target="_blank" class="tm-company-basic-info__link">
      veeam.com
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    1 001–5 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2012-08-27T07:36:48.000Z" title="2012-08-27, 11:36">27  августа  2012</time></dd></dl> <!----></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/veeam/blog/451770/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/veeam/blog/451770/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"451770":{"id":"451770","timePublished":"2019-05-14T10:37:09+00:00","isCorporative":true,"lang":"ru","titleHtml":"Veeam Backup &amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик","leadData":{"textHtml":"Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с бэкапами и репликами. Надеюсь, они помогут вам избежать типичных ошибок, и ваши реплики и бэкапы никогда не будут «слабым звеном» в процессе восстановления, если таковое потребуется. \u003Cbr\u003E\r\n\u003Cbr\u003E\r\nИтак, добро пожаловать под кат.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fn2\u002Flg\u002Fct\u002Fn2lgctuzddu-htv1gqmsy-f8jx4.png\"\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Evgenii Ivanov","originalUrl":"https:\u002F\u002Fwww.veeam.com\u002Fblog\u002Fmanage-test-recover-backup-replica.html"}}],"author":{"scoreStats":{"score":23,"votesCount":49},"rating":4,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"830289","alias":"polarowl","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002Fb8b\u002F53a\u002F38c\u002Fb8b53a38c0c8b6a97687c9cc4ed61baf.jpg","speciality":"Пользователь"},"statistics":{"commentsCount":2,"favoritesCount":29,"readingCount":8007,"score":10,"votesCount":12},"hubs":[{"relatedData":null,"id":"17833","alias":"veeam","type":"corporative","title":"Блог компании Veeam Software","titleHtml":"Блог компании Veeam Software","isProfiled":false},{"relatedData":null,"id":"7312","alias":"virtualization","type":"collective","title":"Виртуализация","titleHtml":"Виртуализация","isProfiled":true},{"relatedData":null,"id":"17350","alias":"s_admin","type":"collective","title":"Серверное администрирование","titleHtml":"Серверное администрирование","isProfiled":true},{"relatedData":null,"id":"17351","alias":"data_recovery","type":"collective","title":"Восстановление данных","titleHtml":"Восстановление данных","isProfiled":true},{"relatedData":null,"id":"18792","alias":"backup","type":"collective","title":"Резервное копирование","titleHtml":"Резервное копирование","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EСегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с бэкапами и репликами. Надеюсь, они помогут вам избежать типичных ошибок, и ваши реплики и бэкапы никогда не будут «слабым звеном» в процессе восстановления, если таковое потребуется. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, добро пожаловать под кат.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fn2\u002Flg\u002Fct\u002Fn2lgctuzddu-htv1gqmsy-f8jx4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nВ предыдущей моей \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fveeam\u002Fblog\u002F428069\u002F\"\u003Eстатье\u003C\u002Fa\u003E мы разбирались с тем, как оптимизировать нагрузку на компоненты инфраструктуры резервного копирования, и рассматривали типичные ошибки конфигурации. Переходим к другой важной теме – грамотной подготовке и выполнению восстановления. Ее мы тоже разберем на реальных примерах, с которыми довелось работать команде техподдержки.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\n\u003Ch1\u003EБэкап без рестора — деньги на ветер\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nК нам регулярно обращаются пользователи, которые оказались в схожих затруднительных ситуациях: необходимо выполнить восстановление из бэкапа, но при попытке это сделать люди натыкаются на неразрешимую для них проблему. И эта проблема – вовсе не отсутствие резервной копии, деятельность CryptoLocker или что-либо подобное. Это «всего лишь» недостаточное внимание к проверке резервных копий и реплик на возможность восстановления. Многие часто фокусируются исключительно на процессе создания бэкапа, забывая о том, что просто наличие резервной копии – не панацея от возможных бед. Нужно понимать, что восстановление – это совершенно иной процесс, у которого есть свои особенности, и который обязательно нужно контролировать и тестировать до запуска в продакшене. Вот вам несколько показательных примеров:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EУ пользователя произошел отказ в работе критичной виртуальной машины размером 20 ТБ. Простои, само собой, недопустимы, и админ запускает процесс мгновенного восстановления (VM instant recovery) – через 5 минут машина поднята. Но мы помним, что такое состояние машины может быть задействовано лишь временно – ее обязательно нужно мигрировать на продакшн датастору (datastore). А в этом примере, как выяснилось, возможности инфраструктуры не позволяли скопировать 20 ТБ данных за разумное время. В настройках же процесса instant recovery было выбрано сохранять изменения на диск \u003Ci\u003EС:\u003C\u002Fi\u003E сервера Veeam Backup &amp; Replication (в отличие от снапшота vSphere) – в результате, конечно же, свободное место на диске быстро заполнилось. К тому моменту, как пользователь обратился в поддержку, у ВМ появились изменения, которые нельзя было игнорировать. То есть имеем ситуацию, когда невозможно быстро финализировать процесс мгновенного восстановления критичной машины – как тут спасти данные? \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПризнаться, за давностью лет я уже не упомню всех подробностей финала, но помню, что в итоге мы так и не придумали ничего гениального. Клиенты на своей стороне худо-бедно решили эту проблему, расширив диск С: из резервов, скопировали самые важные файлы и уж потом выключили ВМ и так мигрировали. В общем, чуда не случилось.\u003C\u002Fli\u003E\r\n\u003Cli\u003EВ инфраструктуре у пользователя работал один контроллер домена, и все компоненты Veeam Backup &amp; Replication были настроены с использованием DNS. Да-да, именно так, вы не ослышались. Вариантов развития событий была сотня, не меньше, а реальности все пошло вот как: люди запланировали ТО и решили переключиться на реплику своего домен-контроллера. Они задействовали плановое переключение, что, в общем-то, и рекомендуется делать в подобных ситуациях. На первом этапе все шло нормально, а на втором исходную ВМ ненадолго выключили, чтобы перенести остатки данных. Разумеется, задание переключения тут же завершилось с ошибкой, поскольку DNS перестал работать. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nК счастью, здесь нам удалось справиться с ситуацией, включив реплику вручную из vSphere (вообще-то эту операцию самостоятельно выполнять не рекомендуется, как вы увидите из следующего примера). Но, как вы понимаете, процесс техобслуживания был прерван и отложен. Вдобавок нам пришлось вручную вносить имена хостов в файл \u003Ci\u003EC:\\Windows\\System32\\drivers\\etc\\hosts\u003C\u002Fi\u003E на сервере Veeam Backup &amp; Replication, чтобы обеспечить корректность при обратном переключении.\u003C\u002Fli\u003E\r\n\u003Cli\u003EЕще у одного клиента вся инфраструктура резервного копирования была построена вокруг накопителей на магнитной ленте, а на диске хранились лишь коротенькие цепочки файлов. Когда же им понадобилось восстановить ряд файлов с большого файлового сервера, оказалось, что ни одну машину нельзя использовать в качестве вспомогательного репозитория при восстановлении с ленты, поскольку ни на одной не было достаточно свободного места. (Про восстановление с магнитной ленты напрямую и с использованием вспомогательного репозитория можно почитать \u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fdocs\u002Fbackup\u002Fvsphere\u002Fvm_restore_from_tape.html?ver=95u4\"\u003Eздесь\u003C\u002Fa\u003E (пока что на англ.языке)).\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nДумаю, что во всех трех примерах пользователи, так сказать, находились в плену иллюзий – они предположили, что если бэкап прошел успешно, то и с восстановлением проблем не будет. Но это, как вы понимаете, отнюдь не всегда так, и поэтому к восстановлению надо готовиться столь же тщательно, как и к бэкапу. Для начала стоит изучить \u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fevaluation\u002Fbackup\u002Fvsphere\u002Fru\u002Fdata_protection_tasks.html\"\u003Eруководство пользователя\u003C\u002Fa\u003E, где содержится довольно подробная информация о разных видах восстановления. В начале каждого параграфа перечислены требования, подготовительные действия и возможные ограничения. Описание восстановления с магнитных лент или из аппаратных снимков СХД можно найти в разделах документации и в наших \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fveeam\u002Fblog\u002F443716\u002F\"\u003Eстатьях\u003C\u002Fa\u003E на Хабре. Кроме того, действия по подготовке восстановления объектов приложений с помощью инструментов Veeam Explorers описаны в разделе «Planning and preparation» (планирование и подготовка) \u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fdocs\u002Fbackup\u002Fexplorers\u002Fveo_prerequisites.html?ver=95u4\"\u003Eруководства\u003C\u002Fa\u003E для каждого из инструментов. Рекомендую с ними внимательно ознакомиться — это поможет вам правильно подготовить систему к восстановлению в случае необходимости. На русском языке инструкции для восстановления SQL Server database приведены \u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fevaluation\u002Fbackup\u002Fvsphere\u002Fru\u002Fsql_backup_and_restore.html\"\u003Eздесь\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EПочему не надо работать с репликами из консоли vSphere?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nПо идее, реплики Veeam представляют собой обычные виртуальные машины, с которыми, казалось бы, логично работать, применяя инструментарий vSphere, в частности, vSphere client. Однако мы не рекомендуем этого делать, и вот почему: переключение на реплику в Veeam Backup &amp; Replication – процесс достаточно непростой, требующий строго последовательного выполнения шагов (чтобы в случае чего можно было откатиться на шаг назад) и корректных завершающих действий – вы только посмотрите на картинку, иллюстрирующую процесс:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fzd\u002Fas\u002Ffl\u002Fzdasflixvqvvo8s_nd2v1u7druq.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсли же вы вздумаете включить реплику из vSphere client, то в дальнейшем вас с большой вероятностью ожидает ряд проблем:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EМеханизм переключения на реплику из Veeam Backup &amp; replication (показанный на схеме) для этой машины работать уже не будет.\u003C\u002Fli\u003E\r\n\u003Cli\u003EДанные в базе Veeam Backup не будут соответствовать реальному состоянию ВМ. В наихудшем случае для починки придется редактировать базу.\u003C\u002Fli\u003E\r\n\u003Cli\u003EВозможна даже потеря данных, как вот в таком примере: пользователь вручную включил реплику в vSphere client и решил продолжить работу с ней. Через некоторое время он заметил, что реплика все еще отображается в консоли Veeam Backup &amp; Replication, и решил убрать ее за ненадобностью. Кликнул по ней правой кнопкой и дал команду \u003Ci\u003E«Delete from disk»\u003C\u002Fi\u003E. Veeam Backup &amp; Replication незамедлительно удалил с диска реплику, которая, на минуточку, уже вовсю использовалась как обычная ВМ и содержала нужные и полезные данные.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nБезусловно, бывают ситуации, когда приходится всё же включать реплику из vSphere client – как правило, это случаи, когда сервер Veeam выключен, а реплику нужно включить с задержкой. Но если с сервером Veeam все в порядке, то работать с репликами нужно именно из его консоли.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакже не следует и удалять реплики, пользуясь vSphere client. Veeam Backup &amp; Replication останется в неведении относительно такого изменения, а это чревато ошибками и устаревшими данными. Если реплика вам более не нужна, удаляйте ее с помощью консоли Veeam, а не как ВМ из vSphere client. Так вы всегда будете иметь актуальный список реплик. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003E«О» — осторожно, обновления!\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nТут мы имеем в виду, конечно, обновления для гипервизоров и разнообразных приложений, которые бэкапятся с помощью Veeam. Если смотреть на них с точки зрения работы с Veeam Backup &amp; Replication, то обновления можно условно разделить на 2 категории: большие, серьезные, привносящие массу изменений – и небольшие.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\nРассмотрим сначала первую категорию. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСамые важные обновления – те, которые предназначены для гипервизора. Перед тем, как установить такое обновление, обязательно нужно убедиться, что оно поддерживается Veeam Backup &amp; Replication. Такие обновления привносят множество изменений в библиотеки и интерфейсы APIs, которые задействует Veeam Backup &amp; Replication, поэтому для того, чтобы официально заявить об их поддержке, необходимо обновить код Veeam Backup &amp; Replication и провести тщательное тестирование. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНадо еще иметь в виду, что, к примеру, VMware не предоставляет предварительного доступа к новейшим версиям vSphere для производителей ПО, так что разработчики и тестировщики Veeam получают новую версию одновременно со всем остальным прогрессивным человечеством – поэтому между релизом VMware и официально объявляемой поддержкой обычно проходит определенное время. Количество и разнообразие необходимых к внесению изменений таково, что в простой hotfix уместить их шансов мало – и официальная поддержка, как правило, заявляется вместе с выходом релизной версии Veeam Backup &amp; Replication. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ итоге имеет место тот неловкий момент, когда после выхода новой версии vSphere количество заявок в техподдержку резко возрастает, ибо пользователи сломя голову несутся устанавливать новую версию, и их бэкапы, конечно, тут же немедленно перестают работать. Нам – техподдержке Veeam – приходится разъяснять пользователям, что же именно они сделали не так, просить их откатиться назад (если возможно) или придумывать замысловатые пути для выхода из тупика. \u003Cb\u003EПоэтому до установки серьезного обновления обязательно проверяйте его совместимость с работающим у вас софтом, очень вас прошу!\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВсё вышесказанное относится и к приложениям, которые вы бэкапите и рассчитываете восстанавливать с помощью Veeam. У линейки инструментов Veeam Explorers тоже имеется список поддерживаемых версий соответствующих приложений, который пополняется с каждым релизом Veeam Backup &amp; Replication. Поэтому до установки новой версии вашего приложения – будь то Exchange, Oracle или SharePoint — непременно перечитайте соответствующий раздел \u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fdocs\u002Fbackup\u002Fexplorers\u002Fexplorers_introduction.html?ver=95u4\"\u003Eдокументации Veeam Explorers\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКо второй категории, т.е. к небольшим обновлениям я отношу, например, новые версии VMware Tools, кумулятивные обновления Exchange, обновления безопасности vSphere, и т.д. Как правило, они не несут с собой каких-то серьезных модификаций, и в большинстве случаев Veeam Backup &amp; Replication не испытывает с ними проблем. (Поэтому для них и не бывает публичных объявлений об официальной поддержке в продукте.) Однако в нашей практике встречались случаи, когда и такие обновления столь значительно меняли привычный ход вещей, что приводили к ошибкам в работе Veeam Backup &amp; Replication. В таких ситуациях после подтверждения проблемы инженеры Veeam стараются оперативно выпустить hotfix.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EТем, кто владеет техническим английским\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003EЕсли вы хотите быть в курсе того, над чем трудятся инженеры и с чем сталкиваются системные архитекторы и специалисты техподдержки, рекомендую подписаться на \u003Ca href=\"https:\u002F\u002Fforums.veeam.com\u002F\"\u003Eнаши форумы\u003C\u002Fa\u003E. Каждую неделю для его подписчиков выходит рассылка «Word from Gostev» за авторством \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fusers\u002Ftherealgostev\u002F\" class=\"user_link\"\u003ETheRealGostev\u003C\u002Fa\u003E. В ней Антон Гостев, возглавляющий департамент product management-а, рассказывает о найденных недавно проблемах (и не только на стороне Veeam), планах на новые версии и новостях из мира IT. Если вам нужно больше информации, можно проштудировать топики форума – если у кого-то из клиентов обнаруживается проблема с работой продукта после какого-либо обновления, он, скорее всего, уже написал об этом на форум.\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nКак вы понимаете, патчи и обновления могут привести к проблемам не только с бэкапами, но и с приложениями, для которых эти бэкапы делаются. И тут вам помогут виртуальные лаборатории — Veeam DataLabs. Вы наверняка слышали о функциональности SureBackup, предназначенной для верификации резервных копий. Она базируется как раз-таки на использовании DataLabs, с созданием изолированной среды, в которой можно, в частности, тестировать обновления до установки их в продакшене. Очень советую так и делать – сбережете себе множество нервных клеток. А если кто-то еще не знает о SureBackup, рекомендую почитать \u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fevaluation\u002Fbackup\u002Fvsphere\u002Fru\u002Fsurebackup.html\"\u003Eдокументацию\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n \u003Cbr\u002F\u003E\r\nПожалуй, на сегодня у меня всё, спасибо за внимание!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EЧто еще почитать\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nСтатьи на Хабре:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fveeam\u002Fblog\u002F193568\u002F\"\u003EСлучай в Pixar или еще раз о важности тестирования резервных копий\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fveeam\u002Fblog\u002F170653\u002F\"\u003EОсобенности долгосрочного хранения резервных копий\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fveeam\u002Fblog\u002F176927\u002F\"\u003EПрактические рекомендации по политике резервного копирования\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fveeam\u002Fblog\u002F163405\u002F\"\u003EРекомендации по политике резервного копирования и восстановления после «Конца Света»\u003C\u002Fa\u003E\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhelpcenter.veeam.com\u002Fevaluation\u002Fbackup\u002Fvsphere\u002Fru\u002Fdata_protection_tasks.html\"\u003EРуководство пользователя (на русском языке)\u003C\u002Fa\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"veeam backup and replication"},{"titleHtml":"восстановление данных"},{"titleHtml":"резервное копирование"},{"titleHtml":"реплика"},{"titleHtml":"лучшие практики"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451770\u002F0f4ccafd81fabcb187f83384c9fea624\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451770\u002F0f4ccafd81fabcb187f83384c9fea624\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fveeam\\\u002Fblog\\\u002F451770\\\u002F\"},\"headline\":\"Veeam Backup &amp; Replication: полезные советы по обеспечению жизнеспособности бэкапов и реплик\",\"datePublished\":\"2019-05-14T13:37:09+03:00\",\"dateModified\":\"2019-05-14T19:01:32+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"polarowl\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fveeam\\\u002Fblog\\\u002F451770\\\u002F#post-content-body\",\"about\":[\"c_veeam\",\"h_virtualization\",\"h_s_admin\",\"h_data_recovery\",\"h_backup\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fn2\\\u002Flg\\\u002Fct\\\u002Fn2lgctuzddu-htv1gqmsy-f8jx4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fzd\\\u002Fas\\\u002Ffl\\\u002Fzdasflixvqvvo8s_nd2v1u7druq.png\"]}","metaDescription":"Сегодня я снова с удовольствием представляю вам полезные советы от моего коллеги Евгения Иванова, тим-лида команды технической поддержки Veeam. На этот раз Женя поделился рекомендациями для работы с...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"veeam":{"alias":"veeam","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F18a\u002F5aa\u002Fbd5\u002F18a5aabd53c224ab3ed2402935ddea11.png","titleHtml":"Veeam Software","descriptionHtml":"Продукты для резервного копирования информации","relatedData":null,"statistics":{"postsCount":272,"newsCount":0,"vacanciesCount":4,"employeesCount":56,"careerRating":4.1,"subscribersCount":1971,"rating":92.1,"invest":null},"foundationDate":{"year":"2006","month":"10","day":"10"},"location":{"city":{"id":"559343","title":"Baar"},"region":{"id":"1653","title":"Zug"},"country":{"id":"233","title":"Швейцария"}},"siteUrl":"http:\u002F\u002Fveeam.com\u002Fru?ad=habr","staffNumber":"1 001–5 000 человек","registrationDate":"2012-08-27T07:36:48+00:00","representativeUser":null,"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fveeam.com\u002Fru?ad=habr"},{"title":"Сайт","url":"https:\u002F\u002Fcareers.veeam.ru\u002F?ad=habr"},{"title":"Facebook","url":"https:\u002F\u002Ffacebook.com\u002FVeeamTeam"},{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Fveeam_ru"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fveeam_team"}],"settings":{"analyticsSettings":[{"type":"ym","trackingId":"69922750"}],"branding":null,"status":"active"},"metadata":{"titleHtml":"Veeam Software, Baar - Продукты для резервного копирования информации с 10 октября 2006 г.","title":"Veeam Software, Baar - Продукты для резервного копирования информации с 10 октября 2006 г.","keywords":["Системное администрирование","Резервное копирование","Серверное администрирование","Восстановление данных","Облачные сервисы"],"descriptionHtml":"272 статьи от авторов компании Veeam Software","description":"272 статьи от авторов компании Veeam Software"},"aDeskSettings":null,"careerAlias":"veeam","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
