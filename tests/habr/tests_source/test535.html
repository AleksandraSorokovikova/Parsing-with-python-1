<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Business Intelligence по-русски — на квинтетах / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/neoflex\/blog\/451218\/"},"headline":"Business Intelligence по-русски — на квинтетах","datePublished":"2019-05-16T10:37:56+03:00","dateModified":"2020-02-12T11:04:00+03:00","author":{"@type":"Person","name":"NikZanyat"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"В&nbsp;одной из&nbsp;заметок нашего блога мы&nbsp;освещали подход к&nbsp;хранению и&nbsp;обработке данных, о&nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: &laquo;В&nbsp;общем,...","url":"https:\/\/habr.com\/ru\/company\/neoflex\/blog\/451218\/#post-content-body","about":["c_neoflex","h_programming","h_analysis_design","h_complete_code","h_sql","f_develop"],"image":["https:\/\/habrastorage.org\/webt\/u9\/pk\/5e\/u9pk5ewq1x1ri6jrggrn9e38qu0.png","https:\/\/habrastorage.org\/webt\/ca\/xm\/ow\/caxmowlcuib8qxvoeferzoit26y.gif","https:\/\/habrastorage.org\/webt\/ok\/gd\/9d\/okgd9dlwt9nkiaet4nhee488nl4.png","https:\/\/habrastorage.org\/webt\/ro\/n6\/ft\/ron6ftlagq_rqj5tz8c_ghxdkzk.png","https:\/\/habrastorage.org\/webt\/nr\/4m\/k3\/nr4mk3p6jfxs-ejr8upnxi1vbns.png","https:\/\/habrastorage.org\/webt\/5-\/ty\/xy\/5-tyxyaidwomjswea4rpn8sibhs.png","https:\/\/habrastorage.org\/webt\/07\/ue\/vu\/07uevub4nkj0qnbgctmpqfho9pe.png","https:\/\/habrastorage.org\/webt\/cq\/_e\/d2\/cq_ed2rliwl4gkwnxgp_pqsjlvy.png","https:\/\/habrastorage.org\/webt\/ie\/v1\/g5\/iev1g5bfej66iarj8prm4rxeen4.png","https:\/\/habrastorage.org\/webt\/g1\/8x\/4w\/g18x4wxhcqn-ybvo_fxrocan-s4.png","https:\/\/habrastorage.org\/webt\/dv\/e4\/tr\/dve4trqzpgdl84uijgfbn_1lcds.png","https:\/\/habrastorage.org\/webt\/jd\/vt\/xz\/jdvtxzhmaylnkg-zhv0swxwefqa.png","https:\/\/habrastorage.org\/webt\/up\/el\/pr\/upelprt0of7_mecdtpk_mqgxvd4.png","https:\/\/habrastorage.org\/webt\/jd\/zm\/fc\/jdzmfcrujmetvb_w2vqrkfa6g-y.png","https:\/\/habrastorage.org\/webt\/n4\/kx\/ni\/n4kxnicwdqq4y6_ykf06x-pnhi0.png","https:\/\/habrastorage.org\/webt\/zd\/hi\/rx\/zdhirxamjgonu9xzepqwike0cqe.png","https:\/\/habrastorage.org\/webt\/d6\/tu\/fc\/d6tufcwrz1qaxfhca1fwiokqdjo.png","https:\/\/habrastorage.org\/webt\/4t\/sp\/1a\/4tsp1arr8uu8nbz7zeut6qd0foi.png","https:\/\/habrastorage.org\/webt\/ro\/mx\/tw\/romxtw85qjp94yfrzqmf47vnvsm.png","https:\/\/habrastorage.org\/webt\/_a\/f3\/cs\/_af3cspclqx4lkhvfasksxbchxg.png","https:\/\/habrastorage.org\/webt\/5n\/wb\/du\/5nwbduykd19ryanqanvvtaymp4g.png","https:\/\/habrastorage.org\/webt\/y6\/dg\/tg\/y6dgtgwvwf4yprzf6qvp2dijbss.gif","https:\/\/habrastorage.org\/webt\/j3\/zt\/eu\/j3zteutdk8xhxddxikns8nr12fo.gif","https:\/\/habrastorage.org\/webt\/ig\/a_\/xt\/iga_xtu0manyadhs8cz_ytmj3k4.png","https:\/\/habrastorage.org\/webt\/zn\/an\/je\/znanjexiyp3mkguce5d0ycw0ulc.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Business Intelligence по-русски — на квинтетах" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Business Intelligence по-русски — на квинтетах" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Business Intelligence по-русски — на квинтетах" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="В&amp;nbsp;одной из&amp;nbsp;заметок нашего блога мы&amp;nbsp;освещали подход к&amp;nbsp;хранению и&amp;nbsp;обработке данных, о&amp;nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&amp;nbsp;общем, ждём..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="В&amp;nbsp;одной из&amp;nbsp;заметок нашего блога мы&amp;nbsp;освещали подход к&amp;nbsp;хранению и&amp;nbsp;обработке данных, о&amp;nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&amp;nbsp;общем, ждём..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="В&amp;nbsp;одной из&amp;nbsp;заметок нашего блога мы&amp;nbsp;освещали подход к&amp;nbsp;хранению и&amp;nbsp;обработке данных, о&amp;nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&amp;nbsp;общем, ждём..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="В&amp;nbsp;одной из&amp;nbsp;заметок нашего блога мы&amp;nbsp;освещали подход к&amp;nbsp;хранению и&amp;nbsp;обработке данных, о&amp;nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&amp;nbsp;общем, ждём..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="В&amp;nbsp;одной из&amp;nbsp;заметок нашего блога мы&amp;nbsp;освещали подход к&amp;nbsp;хранению и&amp;nbsp;обработке данных, о&amp;nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&amp;nbsp;общем, ждём..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/451218/a68c1293110573a6e2aad4fa44a5d7fc/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/451218/a68c1293110573a6e2aad4fa44a5d7fc/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/451218/a68c1293110573a6e2aad4fa44a5d7fc/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/451218/a68c1293110573a6e2aad4fa44a5d7fc/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/451218/a68c1293110573a6e2aad4fa44a5d7fc/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="451218" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-16T07:37:56.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/451218/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/neoflex/blog/451218/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/451218/a68c1293110573a6e2aad4fa44a5d7fc/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="neoflex" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/neoflex/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/815/dfd/395/815dfd395f12e5979bea705bdbea89ea.png" width="48" class="tm-entity-image__pic"></div></a> <a href="https://career.habr.com/companies/neoflex-ru" rel="noopener" target="_blank" class="tm-grade tm-company-card__rating"><div class="tm-rating"><div class="tm-rating__header"><svg height="24" width="24" class="tm-svg-img tm-svg-grade__icon"><title>Оценка компании на Хабр Карьере</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#grade"></use></svg> <div class="tm-rating__counter tm-rating__counter_variant-grade">4.12</div></div> <div class="tm-rating__text tm-rating__text_variant-grade">
    Оценка
  </div></div></a> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">77.5</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/neoflex/profile/" class="tm-company-card__name">
        Neoflex
      </a> <div class="tm-company-card__description">Создаем ИТ-платформы для цифровой трансформации</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/NikZanyat/" title="NikZanyat" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_pink"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/NikZanyat/" class="tm-user-info__username">
      NikZanyat
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-16T07:37:56.000Z" title="2019-05-16, 10:37">16  мая  2019 в 10:37</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Business Intelligence по-русски — на квинтетах</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/neoflex/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Neoflex</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/analysis_design/" class="tm-article-snippet__hubs-item-link"><span>Анализ и проектирование систем</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/complete_code/" class="tm-article-snippet__hubs-item-link"><span>Совершенный код</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/sql/" class="tm-article-snippet__hubs-item-link"><span>SQL</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><p>В одной из заметок нашего блога мы освещали <a href="https://habr.com/ru/company/neoflex/blog/433058/">подход к хранению и обработке данных</a>, о котором получили несколько вполне ожидаемых вопросов такого плана: «В общем, ждём реализации, вот уж оно залетает...». По результатам нескольких реализаций я расскажу о плюсах и минусах этого подхода на примере одной из наших разработок.</p><br/>
<p>Своим заказчикам мы обычно предлагаем достаточно мощный и гибкий инструмент BI, способный решить все их задачи, однако это — зарубежный коммерческий продукт, а клиентов всё чаще интересует тема импортозамещения. В рамках изучения наших перспектив в этом плане мы начали тестирование собственного инструментария BI, используя open-source решения и платформу разработки, построенную на квинтетах.</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/u9/pk/5e/u9pk5ewq1x1ri6jrggrn9e38qu0.png"/><br/>
<br/>
<p>В качестве эталона мы взяли наш существующий коммерческий продукт, так что сравнение, по возможности, будем проводить с ним.</p><a name="habracut"></a><br/>
<p>Задача заключалась в создании следующих компонентов:</p><br/>
<ul>
<li>база данных для хранения витрин данных и служебной информации (пользователи, настройки и т.п.);</li>
<li>веб-интерфейс системы и её ORM;</li>
<li>функционал BI — загрузка данных, произвольные отчеты, графики, сводные таблицы.</li>
</ul><br/>
<p>За основу мы взяли <a href="https://habr.com/ru/post/346816/">платформу разработки</a>, которая включает конструктор модели данных, запросов, шаблонизатор и поддерживает ролевую модель управления доступами пользователей.</p><br/>
<blockquote><p>Тематика заказа — сверка банковской отчетности и анализ её данных, накопленных за последние 7 лет. Исходные данные хранятся в HDFS, сами отчеты рассчитываются там же, далее их результаты попадают в витрину реляционной базы данных. Витрины содержат около 300ГБ данных для нескольких десятков различных отчетных форм и нескольких сотен связанных отчетов. Система должна обслуживать 20 пользователей в пике нагрузки, время отклика интерфейса должно быть в пределах 1 секунды.</p></blockquote><br/>
<p>Создание структуры данных не заняло у нас много времени: редактор типов платформы позволяет создавать и описывать объекты бизнеса как есть, без необходимости адаптировать требования пользователя к специфике окружения (типы и размерность данных, ключи, ограничения, имена полей данных, идентификаторы и проч.). Это первый плюс квинтетов, который мы можем зафиксировать.</p><br/>
<p>Вот так создаётся структура данных — мы определяем нужные термины, а из них формируем объекты нашей предметной области:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ca/xm/ow/caxmowlcuib8qxvoeferzoit26y.gif"/><br/>
<p>После нескольких минут активности в формате copy/paste мы получили требуемую структуру данных для одной формы и нескольких вспомогательных справочников для неё. Структура данных формы (после декомпозиции аналитиком) выглядит так:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ok/gd/9d/okgd9dlwt9nkiaet4nhee488nl4.png"/><br/>
<br/>
<p>Аналитик, знакомый с бизнес-смыслом представленных здесь данных, читает здесь следующее: Каждый экземпляр Ф110 (Форма 110 в терминологии ЦБ) имеет заданную точность (она бывает «точная» или «округленная») и включает в себя набор кодов, для каждого из которых указаны суммы в рублях и валюте.</p><br/>
<p>В навигаторе данных, где данные представлены согласно заданной структуре, мы видим такую таблицу о существующих в системе экземплярах формы:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ro/n6/ft/ron6ftlagq_rqj5tz8c_ghxdkzk.png"/><br/>
<br/>
<p>Идентифицирующее значение формы — это её отчетная дата, отчетные коды хранятся в виде подчиненного массива, размер которого мы видим в скобках.</p><br/>
<p>Как было упомянуто, мы немного декомпозировали данные, если их сравнивать с исходной структурой, чтобы не хранить в базе длинные ряды повторяющихся значений, вроде того, что видит программист или администратор базы данных:</p><br/>
Таблица с данными в эталонной системе:<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/nr/4m/k3/nr4mk3p6jfxs-ejr8upnxi1vbns.png"/><br/>
<br/>
<p>Кстати, именно поэтому мы позиционируем платформу (далее будем называть её Интеграл) как средство разработки для аналитика, а не программиста.</p><br/>
<p>Структура вспомогательных данных несоизмеримо больше, потому что в ней хранятся все исходные данные, настройки отчета, правила для проверки целостности данных внутри отчета и в связанных с ним отчетах, история расчетов и сверок, а также некоторые правила бизнес-трансформации данных при построении отчета:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/5-/ty/xy/5-tyxyaidwomjswea4rpn8sibhs.png"/><br/>
<p>(структура приведена не целиком)</p><br/>
<p>Когда структура данных готова, можно загружать в неё данные. Самый простой способ здесь — загрузить файл, подготовленный в формате Интеграла (аналог .csv, но с разметкой типов). Этот формат содержит описание данных и сами данные.</p><br/>
<div class="spoiler"><b class="spoiler_title">Посмотреть файл</b><div class="spoiler_text"><p>В примере ниже первые 3 строки файла описывают структуру формы (если её нет в системе, то она будет создана), а далее идут сами данные — параметры формы и параметры подчиненных ей объектов отчета.</p><br/>
<pre><code class="plaintext">268:Ф110:DATE;277;270;
277:Точность:SHORT;
270:Код обозначения расшифровки:SHORT;Сумма в рублях:SIGNED;Сумма в иностранной валюте:SIGNED;
268::20121231;281;;
270::A/5.2;1233682389.47;;
277:281:Точная;
270::A/5.3;622836720.22;;
270::A/6.4;19800;;
270::A/9.2;27125165.14;;
270::S16203/1.2;608607846.309999;;
270::S16305/4;2727510994.84;;
270::S16305/4.1;32049069.51;;
270::S16305/14;2737711.65;;
270::S25302/4;2725748122.98999;;
270::S25302/4.1;40952511.36;;
270::IL/2;87429694.5699999;62717458.21;
270::IL/4;33517212.95;;
270::IL/9;1423281.69;8278.24;
270::IL/11;86433534.5699999;519956.63;
270::IA/1;147792224.509999;4517060.94;
270::IA/2;737704.92;;
270::IA/3;27099836.07;2637.79;
270::IA/6;5607868.86;408410.4;
270::IA/8;103837028.49;48841202.69;
270::IA/10;112302573.56;;
268::20121231;280;;
270::A/5.2;1233682;;
277:280:Округленная;
270::A/5.3;622837;;
270::A/6.4;20;;
270::A/9.2;27125;;
270::S16203/1.2;608608;;
</code></pre></div></div><br/>
Для этой формы в базе данных 4470 отчетных дат, которые, будучи выгружены в плоский файл, занимают чуть больше 1 МБ. В исходной базе данных (Oracle) они занимают 3.1 МБ (без индексов) в нормализованном виде и 4.2 МБ в денормализованной витрине, которую мы и пытаемся повторить в виде квинтетов. Квинтеты проиндексированы и нормализованы, и в их формате эти данные занимают уже 10МБ.<br/>
<a name="volumes"></a><br/>
<br/>
Объемы данных для сравнения сведены в таблицу (в мегабайтах):<br/>
<div class="scrollable-table"><table>
<tr>
<th></th>
<th align="center">Текст</th>
<th align="center">РСУБД</th>
<th align="center">Квинтеты</th>
</tr>
<tr>
<td>Данные</td>
<td align="right">1.1</td>
<td align="right">3.1</td>
<td align="right">5.1</td>
</tr>
<tr>
<td>Денормализованные</td>
<td> </td>
<td align="right">4.2</td>
<td> </td>
</tr>
<tr>
<td>Индексы</td>
<td></td>
<td align="right">6.2</td>
<td align="right">5.1</td>
</tr>
<tr>
<td>Данные + Индексы</td>
<td> </td>
<td align="right">9.3</td>
<td align="right">10.2</td>
</tr>
</table></div><br/>
<p>В этом месте следует обратить внимание на размер, занимаемый базами при сравниваемых подходах. За счет дополнительной нормализации квинтетов и расходов на составные индексы в эталонной базе итоговый занимаемый базами размер практически одинаков.</p><br/>
Эталонная база:<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/07/ue/vu/07uevub4nkj0qnbgctmpqfho9pe.png"/><br/>
<br/>
Квинтеты:<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/cq/_e/d2/cq_ed2rliwl4gkwnxgp_pqsjlvy.png"/><br/>
<br/>
<p>При этом в Интеграле у нас проиндексированы сразу все поля таблицы, а в эталонной системе — только дата, код и сумма в рублях, что потребует дополнительных затрат при возникновении новых потребностей.</p><br/>
<p><i>Для справки: в базе данных полный размер одной этой формы, включая вспомогательные отчеты и настройки, составляет около 400 МБ (она сравнительно невелика).</i></p><br/>
<p>Итак, данные загружены и предстоит самая сложная часть проекта — создание интерфейса. Интерфейс эталонной системы позволяет просматривать данные форм, вспомогательных отчетов, настроек и жизненного цикла форм. Для управления доступами и общения с базой данных мы использовали базовые возможности нашей платформы — ролевую модель и конструктор отчетов.</p><br/>
<p>Список пользователей с их ролями выглядит так:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ie/v1/g5/iev1g5bfej66iarj8prm4rxeen4.png"/><br/>
<br/>
<p>Если кликнуть название роли (отмечено красным овалом на рисунке выше), то можно посмотреть на её содержимое:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/g1/8x/4w/g18x4wxhcqn-ybvo_fxrocan-s4.png"/><br/>
<br/>
<p>Объектам роли может быть задано 3 уровня доступа, возможно применение маски:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/dv/e4/tr/dve4trqzpgdl84uijgfbn_1lcds.png"/><br/>
<br/>
<p>Редактирование данных также сделано средствами базового интерфейса. Вот, например, форма редактирования пользователя:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/jd/vt/xz/jdvtxzhmaylnkg-zhv0swxwefqa.png"/><br/>
<br/>
<p>Специфическое меню нашего приложения и его рабочие места мы сверстали в одном компактном файле, поскольку все они однотипны: форма запроса из 2-3 элементов и таблица с результатами запросов.</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/up/el/pr/upelprt0of7_mecdtpk_mqgxvd4.png"/><br/>
<br/>
<h4>Архитектура получилась весьма простой: мы создали множество запросов к данным (представлений) и написали плагин, который реализует произвольные выборки данных в рамках входящих в эти представления таблиц и полей.</h4><br/>
<p>Например, у нас есть так называемый расшифровочный отчет к форме 110, он содержит неагрегированные данные, по которым она построена. Вот так выглядит этот отчет:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/jd/zm/fc/jdzmfcrujmetvb_w2vqrkfa6g-y.png"/><br/>
<br/>
<p>В целях проверки правильности формы пользователь должен иметь возможность делать любые выборки, сортировку, фильтрацию, группировку, транспонирование, а также создавать собственные вычисляемые поля. Наш плагин вызывается кнопкой «Действия» вверху таблицы.</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/n4/kx/ni/n4kxnicwdqq4y6_ykf06x-pnhi0.png"/><br/>
<br/>
<p>Плагин повторяет функционал построителя запросов Интеграла, но помимо выборки данных может рисовать графики и сводные таблицы. Например, нам нужно наложить фильтр по Разделу, добавить пару вычисляемых колонок и сделать выборку сумм с группировкой по ним. Задаём всё это:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/zd/hi/rx/zdhirxamjgonu9xzepqwike0cqe.png"/><br/>
<br/>
<p>Новые колонки добавляются в список одноименной ссылкой. По кнопке «Вычисления» задаем формулы для них с помощью простого конструктора:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/d6/tu/fc/d6tufcwrz1qaxfhca1fwiokqdjo.png"/><br/>
<br/>
<p>Задаем новый порядок колонок и нажимаем «Применить» и наш отчет видоизменяется, как требовалось — вместо 7 базовых колонок мы видим три, две из которых мы только что создали:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/4t/sp/1a/4tsp1arr8uu8nbz7zeut6qd0foi.png"/><br/>
<br/>
<div class="spoiler"><b class="spoiler_title">Как это работает под капотом?</b><div class="spoiler_text"><p>Плагин общается с веб-сервисом приложения по api, он выполнил такой запрос:</p><br/>
<pre><code class="plaintext">api/neo/report/1392573?FR_date=20181231&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=LEFT(\:1392578\:\,5),SUBSTRING(\:1392578\:\,6\,3),1392617:SUM&amp;ORDER=1392617&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=1&amp;TOTALS=1392617:SUM&amp;LIMIT=10
</code></pre><br/>
<p>И получил такой ответ:</p><br/>
<pre><code class="json">{
«columns»: [
«LEFT(:1392578:,5)»,
«SUBSTRING(:1392578:,6,3)»,
«1392617»
],
«formats»: [
«SHORT»,
«SHORT»,
«SIGNED»
],
«data»: {
«LEFT(:1392578:,5)»: [
«60324»,
«40817»,
«47425»,
«47404»,
«60302»,
«47404»
],
«SUBSTRING(:1392578:,6,3)»: [
«810»,
«810»,
«810»,
«840»,
«810»,
«978»
],
«Сумма в рублях»: [
«153 825.71»,
«527 901.11»,
«2 415 189.23»,
«3 000 000.02»,
«5 588 330.88»,
«58 000 000.00»
]
},
«totals»: [
«„,
“»,
«69 685 246.95»
]
}
</code></pre><br/>
<p>Если кому интересно, какой реальный SQL-запрос был выполнен в базе квинтетов, то вот он:</p><br/>
<div class="spoiler"><b class="spoiler_title">Посмотреть SQL</b><div class="spoiler_text"><h4>Аналитик не видит этот SQL, он пользуется построителем запросов, описанным ниже.</h4><br/>
<pre><code class="sql">SELECT LEFT(a182088.val, 5) v13,
SUBSTRING(a182088.val, 6, 3) v14,
SUM(round(a182090.val, 2)) ’Сумма в рублях’
FROM neo a182081
LEFT JOIN neo a182083 ON a182083.up=a182081.id AND a182083.t=182083
LEFT JOIN neo a182088 ON a182088.up=a182083.id AND a182088.t=182088
LEFT JOIN neo a182090 ON a182090.up=a182083.id AND a182090.t=182090
LEFT JOIN neo a182091 ON a182091.up=a182083.id AND a182091.t=182091
LEFT JOIN neo a182092 ON a182092.up=a182083.id AND a182092.t=182092
LEFT JOIN neo a299 ON a299.t=299 AND a182083.val=a299.val
LEFT JOIN neo a328 ON a328.up=a299.id AND a328.t=328
LEFT JOIN neo a303 ON a303.up=a299.id AND a303.t=303
LEFT JOIN neo a304 ON a304.up=a299.id AND a304.t=304
LEFT JOIN neo a182089 ON a182089.up=a182083.id AND a182089.t=182089
WHERE a182081.up!=0 AND length(a182081.val)!=0
AND a182081.t=182081 AND a182081.val=’20181231′
AND a328.val =’1′
AND a303.val>=’19000101′ AND a303.val&lt;=’20181231′
AND a304.val>=’20181231′ AND a304.val&lt;=’20991231′
GROUP BY v13, v14
ORDER BY CAST(SUM(round(a182090.val, 2)) AS SIGNED)
LIMIT 10</code></pre></div></div><br/>
<p>Запрос может показаться несколько сложнее, чем ожидалось, потому что он выбирает актуальные данные отчетных кодов с учетом их срока действия. В построителе отчетов Интеграла этот запрос состоит из колонок отчета, параметров и условий объединения таблиц, если это необходимо.</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ro/mx/tw/romxtw85qjp94yfrzqmf47vnvsm.png"/><br/>
<br/>
<p>Интеграл сам способен сгенерировать условия объединения таблиц, так как все они определяются связями квинтетов, однако в случае проверки версионности нам пришлось объединить таблицы вручную и явно указать условие для JOIN. Коды в условии ON — это идентификаторы объектов колонок и запросов.</p><br/>
<p>Запрос объединяет три таблицы, выбирая из них следующие поля данных (реквизит «Колонки запроса»):</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/_a/f3/cs/_af3cspclqx4lkhvfasksxbchxg.png"/><br/>
<a href="https://hsto.org/webt/_a/f3/cs/_af3cspclqx4lkhvfasksxbchxg.png">(полноразмерная картинка)</a><br/>
<br/>
<p>Здесь перечислены колонки отчета, вычисляемые поля, фильтры и прочее, из чего состоит SQL-запрос. Построитель отчета позволяет реализовать почти любую конструкцию языка SQL, в том числе объединение запросов и вложенные запросы.</p><br/>
</div></div><br/>
<p>Помимо выборок с группировками пользователю полезен механизм сводных таблиц. Мы добавили в наш плагин популярный инструмент для работы с таблицами <a href="http://pivottable.js.org">pivottable.js.org</a>.<br/>
Выберем интересующие нас колонки и переключимся в режим сводных таблиц:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/5n/wb/du/5nwbduykd19ryanqanvvtaymp4g.png"/><br/>
<br/>
<p>Здесь, используя drag’n’drop, мы можем анализировать данные, полученные сконфигурированной нами выборкой, включая наши произвольные поля. Кроме того, здесь можно дополнительно фильтровать данные по любому полю.</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/y6/dg/tg/y6dgtgwvwf4yprzf6qvp2dijbss.gif"/><br/>
<br/>
<p>Для рисования графиков мы использовали бесплатный продукт <a href="http://www.amcharts.com">www.amcharts.com</a>. С ним, как и с pivottable, все достаточно просто: мы выбираем тип графика и инициализируем компонент нашим массивом данных, полученным из Интеграла:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/j3/zt/eu/j3zteutdk8xhxddxikns8nr12fo.gif"/><br/>
<br/>
<p>На этом мы, фактически, выполнили поставленную задачу в той мере, которая удовлетворяет пользователей существующего продукта. Теперь у нас есть система, проходящая по требованиям импортозамещения: все продукты свободные и заменяемые. Да, мы реализовали далеко не все возможности, что предоставляет существующая система, а только те, что необходимы <i>этому</i> заказчику. Но ведь мы только начали!</p><br/>
<a name="tests"></a><br/>
<h2>Так залетало или нет?</h2><br/>
<p>Отдельно стоит обсудить быстродействие получившейся системы. В этой задаче, при достаточно большом объеме данных (сотни гигабайт), выборки затрагивают небольшие фрагменты, квинтеты которых всегда собираются с использованием индексов. Это приводит к тому, что при любом размере базы данных запросы отрабатывают с приемлемой скоростью, не приводя к лавинообразной деградации производительности.</p><br/>
<p>Мы записали 20 действий пользователей в тест-скрипт и прогнали его на сервисе <a href="https://loadimpact.com">loadimpact.com</a>. Получилось 27 различных запросов, потому что некоторые действия выполняются за 2 запроса к серверу (для построения постраничного отображения, например).</p><br/>
<div class="spoiler"><b class="spoiler_title">Тестовый скрипт получился такой</b><div class="spoiler_text"><pre><code class="javascript">import { group, sleep } from ’k6′;
import http from ’k6/http’;

// Version: 1.3
// Creator: Load Impact URL test analyzer

export let options = {
stages: [
{
«duration»: «3m0s»,
«target»: 25
}
],
maxRedirects: 0,
discardResponseBodies: true,
};

export default function() {

	group("page_1 — https://*****.ru/neo/dict«, function() {
		let req, res;
		req = [{
			«method»: «get»,
			«url»: «https://*****.ru/neo/info»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«upgrade-insecure-requests»: «1»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8»
				}
			}
		}];
		res = http.batch(req);
		sleep(0.62);
		req = [{
			«method»: «get»,
			«url»: «https://*****.ru/neo/info»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«upgrade-insecure-requests»: «1»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392573?FR_date=20181231&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392573?FR_date=20181130&amp;ORDER=1392617&amp;LIMIT=10&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392573?FR_date=20181031»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392573?FR_date=20180930&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «*/*»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «*/*»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=10&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «*/*»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392741?»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392757?&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392768?&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_dropdown_arrow.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_detailed_report.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_classifiers.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_launch_report.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_manage_form_status.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_quality_management.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/img/nav_download.svg»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «image/webp,image/apng,image/*,*/*;q=0.8»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/download/neo/css/variables.css»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392779?&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392538?&amp;LIMIT=10&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/edit_obj/1392129»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/edit_obj/1390552»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/object/18»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1387723?&amp;LIMIT=140,10&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392573?FR_date=20180731&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=1392576,1392617:SUM,1392589&amp;LIMIT=100»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392678?FR_date=20180831&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392678?FR_date=20180630&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392678?FR_date=20180531&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=2&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/report/1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/neo/info»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/api/neo/report/1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50&amp;RECORD_COUNT»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://*****.ru/api/neo/report/1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;ORDER=1392617&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302/9&amp;LIMIT=10»,
			«params»: {
				«headers»: {
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «text/css,*/*;q=0.1»,
					«referer»: «https://*****.ru/neo/dict»
				}
			}
		},{
			«method»: «get»,
			«url»: «https://fonts.gstatic.com/s/roboto/v19/KFOmCnqEu92Fr1Mu4mxP.ttf»,
			«params»: {
				«headers»: {
					«origin»: «https://*****.ru»,
					«accept-encoding»: «gzip, deflate»,
					«accept-language»: «en-US»,
					«user-agent»: «Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/62.0.3183.0 Safari/537.36»,
					«accept»: «*/*»,
					«referer»: «https://fonts.googleapis.com/css?family=Roboto»
				}
			}
		}];
		res = http.batch(req);
		// Random sleep between 5s and 10s
		sleep(Math.floor(Math.random()*5+5));
	});

}</code></pre><br/>
</div></div><br/>
<p>Вот что мы увидели, запустив скрипт — генератор нагрузки отправлял нашему приложению всё возрастающее число запросов в секунду, получилась классическая лесенка для поиска максимальной/пиковой производительности:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ig/a_/xt/iga_xtu0manyadhs8cz_ytmj3k4.png"/><br/>
<br/>
<p>Этот генератор отправляет запросы пачками, а не равномерно, как это было бы при одновременной работе пользователей. Поэтому график показывает скачки нагрузки, и общие показатели также выглядят хуже в таком режиме.</p><br/>
<p>С точки зрения нашего сервера всё это происходило вот так:</p><br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/zn/an/je/znanjexiyp3mkguce5d0ycw0ulc.png"/><br/>
<br/>
<p>Поскольку база данных организована с использованием метаданных, каждый запрос тест-скрипта к приложению преобразуется в набор SQL-запросов. В данном тесте, судя по логам, требовалось от 8 до 33 SQL-запросов для выполнения каждого такого запроса: необходимо проверить сессию пользователя и его права, выбрать мета-данные, сконструировать SQL-запрос (включая вложенные и присоединенные, если есть) и только после этого выполнить его.</p><br/>
<p>Тем не менее, при 20-25 запросах в секунду (пиковая нагрузка при работе 20 пользователей), сервер укладывается в требования по производительности — 1 секунда на отклик. В целом ресурсы его недогружены, хотя это самый бюджетный вариант: 1 ядро 2.4 ГГц при 1 ГБ оперативной памяти.</p><br/>
<p>На ненагруженной системе (до 10 запросов в секунду) запросы к серверу выполняются за 0.1-0.3 секунды, в зависимости от сложности выборки.</p><br/>
<h4>В целом, по результатам этой и нескольких предыдущих работ мы видим работоспособность Интеграла и думаем над дальнейшим развитием этого направления.</h4></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BA%D0%B2%D0%B8%D0%BD%D1%82%D0%B5%D1%82%5D" class="tm-tags-list__link">квинтет</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B2%D0%B0%20BI%5D" class="tm-tags-list__link">средства BI</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B8%D0%BC%D0%BF%D0%BE%D1%80%D1%82%D0%BE%D0%B7%D0%B0%D0%BC%D0%B5%D1%89%D0%B5%D0%BD%D0%B8%D0%B5%5D" class="tm-tags-list__link">импортозамещение</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B0%D0%BD%D0%B0%D0%BB%D0%B8%D0%B7%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%5D" class="tm-tags-list__link">анализ данных</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bquintet%20data%20model%5D" class="tm-tags-list__link">quintet data model</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/neoflex/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Neoflex
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/analysis_design/" class="tm-hubs-list__link">
    Анализ и проектирование систем
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/complete_code/" class="tm-hubs-list__link">
    Совершенный код
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/sql/" class="tm-hubs-list__link">
    SQL
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 6: ↑5 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 6: ↑5 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+4</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.9K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    11
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/neoflex/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/815/dfd/395/815dfd395f12e5979bea705bdbea89ea.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/neoflex/profile/" class="tm-company-snippet__title">Neoflex</a> <div class="tm-company-snippet__description">Создаем ИТ-платформы для цифровой трансформации</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="http://www.neoflex.ru/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://facebook.com/neoflexcompany" rel="noopener" target="_blank" class="tm-article-author__contact">
      Facebook
    </a><a href="https://telegram.me/neoflexlive" rel="noopener" target="_blank" class="tm-article-author__contact">
      Telegram
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/NikZanyat/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_pink"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 16 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes">
    0
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/NikZanyat/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @NikZanyat
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Аналитик</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/neoflex/blog/451218/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 2 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2005-02-20T21:00:00.000Z" title="2005-02-21, 00:00">21  февраля  2005</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Россия
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://www.neoflex.ru/" target="_blank" class="tm-company-basic-info__link">
      www.neoflex.ru
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    1 001–5 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2018-04-20T08:00:04.000Z" title="2018-04-20, 11:00">20  апреля  2018</time></dd></dl> <!----></div></div> <!----></section> <div class="tm-company-widgets"></div> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/neoflex/blog/451218/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/neoflex/blog/451218/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"451218":{"id":"451218","timePublished":"2019-05-16T07:37:56+00:00","isCorporative":true,"lang":"ru","titleHtml":"Business Intelligence по-русски — на квинтетах","leadData":{"textHtml":"\u003Cp\u003EВ&nbsp;одной из&nbsp;заметок нашего блога мы&nbsp;освещали \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fneoflex\u002Fblog\u002F433058\u002F\"\u003Eподход к&nbsp;хранению и&nbsp;обработке данных\u003C\u002Fa\u003E, о&nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&nbsp;общем, ждём реализации, вот уж&nbsp;оно залетает...». По&nbsp;результатам нескольких реализаций я&nbsp;расскажу о&nbsp;плюсах и&nbsp;минусах этого подхода на&nbsp;примере одной из&nbsp;наших разработок.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cp\u003EСвоим заказчикам мы&nbsp;обычно предлагаем достаточно мощный и&nbsp;гибкий инструмент&nbsp;BI, способный решить все их&nbsp;задачи, однако это&nbsp;&mdash; зарубежный коммерческий продукт, а&nbsp;клиентов всё чаще интересует тема импортозамещения. В&nbsp;рамках изучения наших перспектив в&nbsp;этом плане мы&nbsp;начали тестирование собственного инструментария&nbsp;BI, используя open-source решения и&nbsp;платформу разработки, построенную на&nbsp;квинтетах.\u003C\u002Fp\u003E\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fu9\u002Fpk\u002F5e\u002Fu9pk5ewq1x1ri6jrggrn9e38qu0.png\"\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cp\u003EВ&nbsp;качестве эталона мы&nbsp;взяли наш существующий коммерческий продукт, так что сравнение, по&nbsp;возможности, будем проводить с&nbsp;ним.\u003C\u002Fp\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше &rarr;","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":0,"votesCount":16},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1905409","alias":"NikZanyat","fullname":null,"avatarUrl":null,"speciality":"Аналитик"},"statistics":{"commentsCount":2,"favoritesCount":11,"readingCount":2913,"score":4,"votesCount":6},"hubs":[{"relatedData":null,"id":"21430","alias":"neoflex","type":"corporative","title":"Блог компании Neoflex","titleHtml":"Блог компании Neoflex","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"397","alias":"analysis_design","type":"collective","title":"Анализ и проектирование систем","titleHtml":"Анализ и проектирование систем","isProfiled":true},{"relatedData":null,"id":"524","alias":"complete_code","type":"collective","title":"Совершенный код","titleHtml":"Совершенный код","isProfiled":true},{"relatedData":null,"id":"594","alias":"sql","type":"collective","title":"SQL","titleHtml":"SQL","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EВ одной из заметок нашего блога мы освещали \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fneoflex\u002Fblog\u002F433058\u002F\"\u003Eподход к хранению и обработке данных\u003C\u002Fa\u003E, о котором получили несколько вполне ожидаемых вопросов такого плана: «В общем, ждём реализации, вот уж оно залетает...». По результатам нескольких реализаций я расскажу о плюсах и минусах этого подхода на примере одной из наших разработок.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСвоим заказчикам мы обычно предлагаем достаточно мощный и гибкий инструмент BI, способный решить все их задачи, однако это — зарубежный коммерческий продукт, а клиентов всё чаще интересует тема импортозамещения. В рамках изучения наших перспектив в этом плане мы начали тестирование собственного инструментария BI, используя open-source решения и платформу разработки, построенную на квинтетах.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fu9\u002Fpk\u002F5e\u002Fu9pk5ewq1x1ri6jrggrn9e38qu0.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ качестве эталона мы взяли наш существующий коммерческий продукт, так что сравнение, по возможности, будем проводить с ним.\u003C\u002Fp\u003E\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗадача заключалась в создании следующих компонентов:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eбаза данных для хранения витрин данных и служебной информации (пользователи, настройки и т.п.);\u003C\u002Fli\u003E\r\n\u003Cli\u003Eвеб-интерфейс системы и её ORM;\u003C\u002Fli\u003E\r\n\u003Cli\u003Eфункционал BI — загрузка данных, произвольные отчеты, графики, сводные таблицы.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗа основу мы взяли \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F346816\u002F\"\u003Eплатформу разработки\u003C\u002Fa\u003E, которая включает конструктор модели данных, запросов, шаблонизатор и поддерживает ролевую модель управления доступами пользователей.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Cp\u003EТематика заказа — сверка банковской отчетности и анализ её данных, накопленных за последние 7 лет. Исходные данные хранятся в HDFS, сами отчеты рассчитываются там же, далее их результаты попадают в витрину реляционной базы данных. Витрины содержат около 300ГБ данных для нескольких десятков различных отчетных форм и нескольких сотен связанных отчетов. Система должна обслуживать 20 пользователей в пике нагрузки, время отклика интерфейса должно быть в пределах 1 секунды.\u003C\u002Fp\u003E\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСоздание структуры данных не заняло у нас много времени: редактор типов платформы позволяет создавать и описывать объекты бизнеса как есть, без необходимости адаптировать требования пользователя к специфике окружения (типы и размерность данных, ключи, ограничения, имена полей данных, идентификаторы и проч.). Это первый плюс квинтетов, который мы можем зафиксировать.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВот так создаётся структура данных — мы определяем нужные термины, а из них формируем объекты нашей предметной области:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fca\u002Fxm\u002Fow\u002Fcaxmowlcuib8qxvoeferzoit26y.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПосле нескольких минут активности в формате copy\u002Fpaste мы получили требуемую структуру данных для одной формы и нескольких вспомогательных справочников для неё. Структура данных формы (после декомпозиции аналитиком) выглядит так:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fok\u002Fgd\u002F9d\u002Fokgd9dlwt9nkiaet4nhee488nl4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EАналитик, знакомый с бизнес-смыслом представленных здесь данных, читает здесь следующее: Каждый экземпляр Ф110 (Форма 110 в терминологии ЦБ) имеет заданную точность (она бывает «точная» или «округленная») и включает в себя набор кодов, для каждого из которых указаны суммы в рублях и валюте.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ навигаторе данных, где данные представлены согласно заданной структуре, мы видим такую таблицу о существующих в системе экземплярах формы:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fro\u002Fn6\u002Fft\u002Fron6ftlagq_rqj5tz8c_ghxdkzk.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИдентифицирующее значение формы — это её отчетная дата, отчетные коды хранятся в виде подчиненного массива, размер которого мы видим в скобках.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКак было упомянуто, мы немного декомпозировали данные, если их сравнивать с исходной структурой, чтобы не хранить в базе длинные ряды повторяющихся значений, вроде того, что видит программист или администратор базы данных:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\nТаблица с данными в эталонной системе:\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fnr\u002F4m\u002Fk3\u002Fnr4mk3p6jfxs-ejr8upnxi1vbns.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКстати, именно поэтому мы позиционируем платформу (далее будем называть её Интеграл) как средство разработки для аналитика, а не программиста.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСтруктура вспомогательных данных несоизмеримо больше, потому что в ней хранятся все исходные данные, настройки отчета, правила для проверки целостности данных внутри отчета и в связанных с ним отчетах, история расчетов и сверок, а также некоторые правила бизнес-трансформации данных при построении отчета:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F5-\u002Fty\u002Fxy\u002F5-tyxyaidwomjswea4rpn8sibhs.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E(структура приведена не целиком)\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EКогда структура данных готова, можно загружать в неё данные. Самый простой способ здесь — загрузить файл, подготовленный в формате Интеграла (аналог .csv, но с разметкой типов). Этот формат содержит описание данных и сами данные.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EПосмотреть файл\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EВ примере ниже первые 3 строки файла описывают структуру формы (если её нет в системе, то она будет создана), а далее идут сами данные — параметры формы и параметры подчиненных ей объектов отчета.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E268:Ф110:DATE;277;270;\n277:Точность:SHORT;\n270:Код обозначения расшифровки:SHORT;Сумма в рублях:SIGNED;Сумма в иностранной валюте:SIGNED;\n268::20121231;281;;\n270::A\u002F5.2;1233682389.47;;\n277:281:Точная;\n270::A\u002F5.3;622836720.22;;\n270::A\u002F6.4;19800;;\n270::A\u002F9.2;27125165.14;;\n270::S16203\u002F1.2;608607846.309999;;\n270::S16305\u002F4;2727510994.84;;\n270::S16305\u002F4.1;32049069.51;;\n270::S16305\u002F14;2737711.65;;\n270::S25302\u002F4;2725748122.98999;;\n270::S25302\u002F4.1;40952511.36;;\n270::IL\u002F2;87429694.5699999;62717458.21;\n270::IL\u002F4;33517212.95;;\n270::IL\u002F9;1423281.69;8278.24;\n270::IL\u002F11;86433534.5699999;519956.63;\n270::IA\u002F1;147792224.509999;4517060.94;\n270::IA\u002F2;737704.92;;\n270::IA\u002F3;27099836.07;2637.79;\n270::IA\u002F6;5607868.86;408410.4;\n270::IA\u002F8;103837028.49;48841202.69;\n270::IA\u002F10;112302573.56;;\n268::20121231;280;;\n270::A\u002F5.2;1233682;;\n277:280:Округленная;\n270::A\u002F5.3;622837;;\n270::A\u002F6.4;20;;\n270::A\u002F9.2;27125;;\n270::S16203\u002F1.2;608608;;\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nДля этой формы в базе данных 4470 отчетных дат, которые, будучи выгружены в плоский файл, занимают чуть больше 1 МБ. В исходной базе данных (Oracle) они занимают 3.1 МБ (без индексов) в нормализованном виде и 4.2 МБ в денормализованной витрине, которую мы и пытаемся повторить в виде квинтетов. Квинтеты проиндексированы и нормализованы, и в их формате эти данные занимают уже 10МБ.\u003Cbr\u002F\u003E\r\n\u003Ca name=\"volumes\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбъемы данных для сравнения сведены в таблицу (в мегабайтах):\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"scrollable-table\"\u003E\u003Ctable\u003E\r\n\u003Ctr\u003E\r\n\u003Cth\u003E\u003C\u002Fth\u003E\r\n\u003Cth align=\"center\"\u003EТекст\u003C\u002Fth\u003E\r\n\u003Cth align=\"center\"\u003EРСУБД\u003C\u002Fth\u003E\r\n\u003Cth align=\"center\"\u003EКвинтеты\u003C\u002Fth\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EДанные\u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E1.1\u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E3.1\u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E5.1\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EДенормализованные\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E \u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E4.2\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E \u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EИндексы\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E\u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E6.2\u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E5.1\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EДанные + Индексы\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E \u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E9.3\u003C\u002Ftd\u003E\r\n\u003Ctd align=\"right\"\u003E10.2\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ этом месте следует обратить внимание на размер, занимаемый базами при сравниваемых подходах. За счет дополнительной нормализации квинтетов и расходов на составные индексы в эталонной базе итоговый занимаемый базами размер практически одинаков.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\nЭталонная база:\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F07\u002Fue\u002Fvu\u002F07uevub4nkj0qnbgctmpqfho9pe.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКвинтеты:\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fcq\u002F_e\u002Fd2\u002Fcq_ed2rliwl4gkwnxgp_pqsjlvy.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПри этом в Интеграле у нас проиндексированы сразу все поля таблицы, а в эталонной системе — только дата, код и сумма в рублях, что потребует дополнительных затрат при возникновении новых потребностей.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Ci\u003EДля справки: в базе данных полный размер одной этой формы, включая вспомогательные отчеты и настройки, составляет около 400 МБ (она сравнительно невелика).\u003C\u002Fi\u003E\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИтак, данные загружены и предстоит самая сложная часть проекта — создание интерфейса. Интерфейс эталонной системы позволяет просматривать данные форм, вспомогательных отчетов, настроек и жизненного цикла форм. Для управления доступами и общения с базой данных мы использовали базовые возможности нашей платформы — ролевую модель и конструктор отчетов.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСписок пользователей с их ролями выглядит так:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fie\u002Fv1\u002Fg5\u002Fiev1g5bfej66iarj8prm4rxeen4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЕсли кликнуть название роли (отмечено красным овалом на рисунке выше), то можно посмотреть на её содержимое:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fg1\u002F8x\u002F4w\u002Fg18x4wxhcqn-ybvo_fxrocan-s4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОбъектам роли может быть задано 3 уровня доступа, возможно применение маски:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdv\u002Fe4\u002Ftr\u002Fdve4trqzpgdl84uijgfbn_1lcds.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EРедактирование данных также сделано средствами базового интерфейса. Вот, например, форма редактирования пользователя:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjd\u002Fvt\u002Fxz\u002Fjdvtxzhmaylnkg-zhv0swxwefqa.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСпецифическое меню нашего приложения и его рабочие места мы сверстали в одном компактном файле, поскольку все они однотипны: форма запроса из 2-3 элементов и таблица с результатами запросов.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fup\u002Fel\u002Fpr\u002Fupelprt0of7_mecdtpk_mqgxvd4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EАрхитектура получилась весьма простой: мы создали множество запросов к данным (представлений) и написали плагин, который реализует произвольные выборки данных в рамках входящих в эти представления таблиц и полей.\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНапример, у нас есть так называемый расшифровочный отчет к форме 110, он содержит неагрегированные данные, по которым она построена. Вот так выглядит этот отчет:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fjd\u002Fzm\u002Ffc\u002Fjdzmfcrujmetvb_w2vqrkfa6g-y.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ целях проверки правильности формы пользователь должен иметь возможность делать любые выборки, сортировку, фильтрацию, группировку, транспонирование, а также создавать собственные вычисляемые поля. Наш плагин вызывается кнопкой «Действия» вверху таблицы.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fn4\u002Fkx\u002Fni\u002Fn4kxnicwdqq4y6_ykf06x-pnhi0.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПлагин повторяет функционал построителя запросов Интеграла, но помимо выборки данных может рисовать графики и сводные таблицы. Например, нам нужно наложить фильтр по Разделу, добавить пару вычисляемых колонок и сделать выборку сумм с группировкой по ним. Задаём всё это:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fzd\u002Fhi\u002Frx\u002Fzdhirxamjgonu9xzepqwike0cqe.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНовые колонки добавляются в список одноименной ссылкой. По кнопке «Вычисления» задаем формулы для них с помощью простого конструктора:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fd6\u002Ftu\u002Ffc\u002Fd6tufcwrz1qaxfhca1fwiokqdjo.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗадаем новый порядок колонок и нажимаем «Применить» и наш отчет видоизменяется, как требовалось — вместо 7 базовых колонок мы видим три, две из которых мы только что создали:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4t\u002Fsp\u002F1a\u002F4tsp1arr8uu8nbz7zeut6qd0foi.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EКак это работает под капотом?\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cp\u003EПлагин общается с веб-сервисом приложения по api, он выполнил такой запрос:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Eapi\u002Fneo\u002Freport\u002F1392573?FR_date=20181231&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=LEFT(\\:1392578\\:\\,5),SUBSTRING(\\:1392578\\:\\,6\\,3),1392617:SUM&amp;ORDER=1392617&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=1&amp;TOTALS=1392617:SUM&amp;LIMIT=10\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИ получил такой ответ:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"json\"\u003E{\n«columns»: [\n«LEFT(:1392578:,5)»,\n«SUBSTRING(:1392578:,6,3)»,\n«1392617»\n],\n«formats»: [\n«SHORT»,\n«SHORT»,\n«SIGNED»\n],\n«data»: {\n«LEFT(:1392578:,5)»: [\n«60324»,\n«40817»,\n«47425»,\n«47404»,\n«60302»,\n«47404»\n],\n«SUBSTRING(:1392578:,6,3)»: [\n«810»,\n«810»,\n«810»,\n«840»,\n«810»,\n«978»\n],\n«Сумма в рублях»: [\n«153 825.71»,\n«527 901.11»,\n«2 415 189.23»,\n«3 000 000.02»,\n«5 588 330.88»,\n«58 000 000.00»\n]\n},\n«totals»: [\n«„,\n“»,\n«69 685 246.95»\n]\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЕсли кому интересно, какой реальный SQL-запрос был выполнен в базе квинтетов, то вот он:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EПосмотреть SQL\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Ch4\u003EАналитик не видит этот SQL, он пользуется построителем запросов, описанным ниже.\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"sql\"\u003ESELECT LEFT(a182088.val, 5) v13,\nSUBSTRING(a182088.val, 6, 3) v14,\nSUM(round(a182090.val, 2)) ’Сумма в рублях’\nFROM neo a182081\nLEFT JOIN neo a182083 ON a182083.up=a182081.id AND a182083.t=182083\nLEFT JOIN neo a182088 ON a182088.up=a182083.id AND a182088.t=182088\nLEFT JOIN neo a182090 ON a182090.up=a182083.id AND a182090.t=182090\nLEFT JOIN neo a182091 ON a182091.up=a182083.id AND a182091.t=182091\nLEFT JOIN neo a182092 ON a182092.up=a182083.id AND a182092.t=182092\nLEFT JOIN neo a299 ON a299.t=299 AND a182083.val=a299.val\nLEFT JOIN neo a328 ON a328.up=a299.id AND a328.t=328\nLEFT JOIN neo a303 ON a303.up=a299.id AND a303.t=303\nLEFT JOIN neo a304 ON a304.up=a299.id AND a304.t=304\nLEFT JOIN neo a182089 ON a182089.up=a182083.id AND a182089.t=182089\nWHERE a182081.up!=0 AND length(a182081.val)!=0\nAND a182081.t=182081 AND a182081.val=’20181231′\nAND a328.val =’1′\nAND a303.val\u003E=’19000101′ AND a303.val&lt;=’20181231′\nAND a304.val\u003E=’20181231′ AND a304.val&lt;=’20991231′\nGROUP BY v13, v14\nORDER BY CAST(SUM(round(a182090.val, 2)) AS SIGNED)\nLIMIT 10\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗапрос может показаться несколько сложнее, чем ожидалось, потому что он выбирает актуальные данные отчетных кодов с учетом их срока действия. В построителе отчетов Интеграла этот запрос состоит из колонок отчета, параметров и условий объединения таблиц, если это необходимо.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fro\u002Fmx\u002Ftw\u002Fromxtw85qjp94yfrzqmf47vnvsm.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EИнтеграл сам способен сгенерировать условия объединения таблиц, так как все они определяются связями квинтетов, однако в случае проверки версионности нам пришлось объединить таблицы вручную и явно указать условие для JOIN. Коды в условии ON — это идентификаторы объектов колонок и запросов.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗапрос объединяет три таблицы, выбирая из них следующие поля данных (реквизит «Колонки запроса»):\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F_a\u002Ff3\u002Fcs\u002F_af3cspclqx4lkhvfasksxbchxg.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhsto.org\u002Fwebt\u002F_a\u002Ff3\u002Fcs\u002F_af3cspclqx4lkhvfasksxbchxg.png\"\u003E(полноразмерная картинка)\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗдесь перечислены колонки отчета, вычисляемые поля, фильтры и прочее, из чего состоит SQL-запрос. Построитель отчета позволяет реализовать почти любую конструкцию языка SQL, в том числе объединение запросов и вложенные запросы.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПомимо выборок с группировками пользователю полезен механизм сводных таблиц. Мы добавили в наш плагин популярный инструмент для работы с таблицами \u003Ca href=\"http:\u002F\u002Fpivottable.js.org\"\u003Epivottable.js.org\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\nВыберем интересующие нас колонки и переключимся в режим сводных таблиц:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F5n\u002Fwb\u002Fdu\u002F5nwbduykd19ryanqanvvtaymp4g.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗдесь, используя drag’n’drop, мы можем анализировать данные, полученные сконфигурированной нами выборкой, включая наши произвольные поля. Кроме того, здесь можно дополнительно фильтровать данные по любому полю.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fy6\u002Fdg\u002Ftg\u002Fy6dgtgwvwf4yprzf6qvp2dijbss.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EДля рисования графиков мы использовали бесплатный продукт \u003Ca href=\"http:\u002F\u002Fwww.amcharts.com\"\u003Ewww.amcharts.com\u003C\u002Fa\u003E. С ним, как и с pivottable, все достаточно просто: мы выбираем тип графика и инициализируем компонент нашим массивом данных, полученным из Интеграла:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fj3\u002Fzt\u002Feu\u002Fj3zteutdk8xhxddxikns8nr12fo.gif\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНа этом мы, фактически, выполнили поставленную задачу в той мере, которая удовлетворяет пользователей существующего продукта. Теперь у нас есть система, проходящая по требованиям импортозамещения: все продукты свободные и заменяемые. Да, мы реализовали далеко не все возможности, что предоставляет существующая система, а только те, что необходимы \u003Ci\u003Eэтому\u003C\u002Fi\u003E заказчику. Но ведь мы только начали!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"tests\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ch2\u003EТак залетало или нет?\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОтдельно стоит обсудить быстродействие получившейся системы. В этой задаче, при достаточно большом объеме данных (сотни гигабайт), выборки затрагивают небольшие фрагменты, квинтеты которых всегда собираются с использованием индексов. Это приводит к тому, что при любом размере базы данных запросы отрабатывают с приемлемой скоростью, не приводя к лавинообразной деградации производительности.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EМы записали 20 действий пользователей в тест-скрипт и прогнали его на сервисе \u003Ca href=\"https:\u002F\u002Floadimpact.com\"\u003Eloadimpact.com\u003C\u002Fa\u003E. Получилось 27 различных запросов, потому что некоторые действия выполняются за 2 запроса к серверу (для построения постраничного отображения, например).\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"spoiler\"\u003E\u003Cb class=\"spoiler_title\"\u003EТестовый скрипт получился такой\u003C\u002Fb\u003E\u003Cdiv class=\"spoiler_text\"\u003E\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003Eimport { group, sleep } from ’k6′;\nimport http from ’k6\u002Fhttp’;\n\n\u002F\u002F Version: 1.3\n\u002F\u002F Creator: Load Impact URL test analyzer\n\nexport let options = {\nstages: [\n{\n«duration»: «3m0s»,\n«target»: 25\n}\n],\nmaxRedirects: 0,\ndiscardResponseBodies: true,\n};\n\nexport default function() {\n\n\tgroup(\"page_1 — https:\u002F\u002F*****.ru\u002Fneo\u002Fdict«, function() {\n\t\tlet req, res;\n\t\treq = [{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Finfo»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«upgrade-insecure-requests»: «1»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fhtml,application\u002Fxhtml+xml,application\u002Fxml;q=0.9,image\u002Fwebp,image\u002Fapng,*\u002F*;q=0.8»\n\t\t\t\t}\n\t\t\t}\n\t\t}];\n\t\tres = http.batch(req);\n\t\tsleep(0.62);\n\t\treq = [{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Finfo»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«upgrade-insecure-requests»: «1»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fhtml,application\u002Fxhtml+xml,application\u002Fxml;q=0.9,image\u002Fwebp,image\u002Fapng,*\u002F*;q=0.8»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392573?FR_date=20181231&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392573?FR_date=20181130&amp;ORDER=1392617&amp;LIMIT=10&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392573?FR_date=20181031»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392573?FR_date=20180930&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «*\u002F*»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1387723?&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «*\u002F*»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1387723?&amp;LIMIT=10&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «*\u002F*»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392741?»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392757?&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392768?&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_dropdown_arrow.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_detailed_report.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_classifiers.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_launch_report.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_manage_form_status.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_quality_management.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fimg\u002Fnav_download.svg»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «image\u002Fwebp,image\u002Fapng,image\u002F*,*\u002F*;q=0.8»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fdownload\u002Fneo\u002Fcss\u002Fvariables.css»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392779?&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392538?&amp;LIMIT=10&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fedit_obj\u002F1392129»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fedit_obj\u002F1390552»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fobject\u002F18»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1387723?&amp;LIMIT=140,10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1387723?&amp;LIMIT=140,10&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392573?FR_date=20180731&amp;FR_%D0%A0%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB=&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=&amp;SELECT=1392576,1392617:SUM,1392589&amp;LIMIT=100»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392678?FR_date=20180831&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392678?FR_date=20180630&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=10&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392678?FR_date=20180531&amp;FR_section=1&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392678?FR_date=20181231&amp;FR_section=2&amp;SELECT=1392698,1392685,1392690&amp;LIMIT=500»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Freport\u002F1392678?FR_date=20181231&amp;FR_section=4&amp;SELECT=1392698,1392685,1392690,1392694&amp;LIMIT=20&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fneo\u002Finfo»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fapi\u002Fneo\u002Freport\u002F1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fapi\u002Fneo\u002Freport\u002F1392678?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;SELECT=1392698,1392685,1392715&amp;LIMIT=50&amp;RECORD_COUNT»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fapi\u002Fneo\u002Freport\u002F1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302\u002F9&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002F*****.ru\u002Fapi\u002Fneo\u002Freport\u002F1392573?FR_date=20190131&amp;FR_section=1&amp;FR_precision=280&amp;ORDER=1392617&amp;FR_%D0%9A%D0%BE%D0%B4_%D0%BE%D0%B1%D0%BE%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D1%8F=A60302\u002F9&amp;LIMIT=10»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «text\u002Fcss,*\u002F*;q=0.1»,\n\t\t\t\t\t«referer»: «https:\u002F\u002F*****.ru\u002Fneo\u002Fdict»\n\t\t\t\t}\n\t\t\t}\n\t\t},{\n\t\t\t«method»: «get»,\n\t\t\t«url»: «https:\u002F\u002Ffonts.gstatic.com\u002Fs\u002Froboto\u002Fv19\u002FKFOmCnqEu92Fr1Mu4mxP.ttf»,\n\t\t\t«params»: {\n\t\t\t\t«headers»: {\n\t\t\t\t\t«origin»: «https:\u002F\u002F*****.ru»,\n\t\t\t\t\t«accept-encoding»: «gzip, deflate»,\n\t\t\t\t\t«accept-language»: «en-US»,\n\t\t\t\t\t«user-agent»: «Mozilla\u002F5.0 (X11; Linux x86_64) AppleWebKit\u002F537.36 (KHTML, like Gecko) HeadlessChrome\u002F62.0.3183.0 Safari\u002F537.36»,\n\t\t\t\t\t«accept»: «*\u002F*»,\n\t\t\t\t\t«referer»: «https:\u002F\u002Ffonts.googleapis.com\u002Fcss?family=Roboto»\n\t\t\t\t}\n\t\t\t}\n\t\t}];\n\t\tres = http.batch(req);\n\t\t\u002F\u002F Random sleep between 5s and 10s\n\t\tsleep(Math.floor(Math.random()*5+5));\n\t});\n\n}\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВот что мы увидели, запустив скрипт — генератор нагрузки отправлял нашему приложению всё возрастающее число запросов в секунду, получилась классическая лесенка для поиска максимальной\u002Fпиковой производительности:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fig\u002Fa_\u002Fxt\u002Figa_xtu0manyadhs8cz_ytmj3k4.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЭтот генератор отправляет запросы пачками, а не равномерно, как это было бы при одновременной работе пользователей. Поэтому график показывает скачки нагрузки, и общие показатели также выглядят хуже в таком режиме.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EС точки зрения нашего сервера всё это происходило вот так:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fzn\u002Fan\u002Fje\u002Fznanjexiyp3mkguce5d0ycw0ulc.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПоскольку база данных организована с использованием метаданных, каждый запрос тест-скрипта к приложению преобразуется в набор SQL-запросов. В данном тесте, судя по логам, требовалось от 8 до 33 SQL-запросов для выполнения каждого такого запроса: необходимо проверить сессию пользователя и его права, выбрать мета-данные, сконструировать SQL-запрос (включая вложенные и присоединенные, если есть) и только после этого выполнить его.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТем не менее, при 20-25 запросах в секунду (пиковая нагрузка при работе 20 пользователей), сервер укладывается в требования по производительности — 1 секунда на отклик. В целом ресурсы его недогружены, хотя это самый бюджетный вариант: 1 ядро 2.4 ГГц при 1 ГБ оперативной памяти.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНа ненагруженной системе (до 10 запросов в секунду) запросы к серверу выполняются за 0.1-0.3 секунды, в зависимости от сложности выборки.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EВ целом, по результатам этой и нескольких предыдущих работ мы видим работоспособность Интеграла и думаем над дальнейшим развитием этого направления.\u003C\u002Fh4\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"квинтет"},{"titleHtml":"средства BI"},{"titleHtml":"импортозамещение"},{"titleHtml":"анализ данных"},{"titleHtml":"quintet data model"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451218\u002Fa68c1293110573a6e2aad4fa44a5d7fc\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451218\u002Fa68c1293110573a6e2aad4fa44a5d7fc\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fneoflex\\\u002Fblog\\\u002F451218\\\u002F\"},\"headline\":\"Business Intelligence по-русски — на квинтетах\",\"datePublished\":\"2019-05-16T10:37:56+03:00\",\"dateModified\":\"2020-02-12T11:04:00+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"NikZanyat\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"В&nbsp;одной из&nbsp;заметок нашего блога мы&nbsp;освещали подход к&nbsp;хранению и&nbsp;обработке данных, о&nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: &laquo;В&nbsp;общем,...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fneoflex\\\u002Fblog\\\u002F451218\\\u002F#post-content-body\",\"about\":[\"c_neoflex\",\"h_programming\",\"h_analysis_design\",\"h_complete_code\",\"h_sql\",\"f_develop\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fu9\\\u002Fpk\\\u002F5e\\\u002Fu9pk5ewq1x1ri6jrggrn9e38qu0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fca\\\u002Fxm\\\u002Fow\\\u002Fcaxmowlcuib8qxvoeferzoit26y.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fok\\\u002Fgd\\\u002F9d\\\u002Fokgd9dlwt9nkiaet4nhee488nl4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fro\\\u002Fn6\\\u002Fft\\\u002Fron6ftlagq_rqj5tz8c_ghxdkzk.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fnr\\\u002F4m\\\u002Fk3\\\u002Fnr4mk3p6jfxs-ejr8upnxi1vbns.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F5-\\\u002Fty\\\u002Fxy\\\u002F5-tyxyaidwomjswea4rpn8sibhs.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F07\\\u002Fue\\\u002Fvu\\\u002F07uevub4nkj0qnbgctmpqfho9pe.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fcq\\\u002F_e\\\u002Fd2\\\u002Fcq_ed2rliwl4gkwnxgp_pqsjlvy.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fie\\\u002Fv1\\\u002Fg5\\\u002Fiev1g5bfej66iarj8prm4rxeen4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fg1\\\u002F8x\\\u002F4w\\\u002Fg18x4wxhcqn-ybvo_fxrocan-s4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fdv\\\u002Fe4\\\u002Ftr\\\u002Fdve4trqzpgdl84uijgfbn_1lcds.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fjd\\\u002Fvt\\\u002Fxz\\\u002Fjdvtxzhmaylnkg-zhv0swxwefqa.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fup\\\u002Fel\\\u002Fpr\\\u002Fupelprt0of7_mecdtpk_mqgxvd4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fjd\\\u002Fzm\\\u002Ffc\\\u002Fjdzmfcrujmetvb_w2vqrkfa6g-y.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fn4\\\u002Fkx\\\u002Fni\\\u002Fn4kxnicwdqq4y6_ykf06x-pnhi0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fzd\\\u002Fhi\\\u002Frx\\\u002Fzdhirxamjgonu9xzepqwike0cqe.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fd6\\\u002Ftu\\\u002Ffc\\\u002Fd6tufcwrz1qaxfhca1fwiokqdjo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F4t\\\u002Fsp\\\u002F1a\\\u002F4tsp1arr8uu8nbz7zeut6qd0foi.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fro\\\u002Fmx\\\u002Ftw\\\u002Fromxtw85qjp94yfrzqmf47vnvsm.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F_a\\\u002Ff3\\\u002Fcs\\\u002F_af3cspclqx4lkhvfasksxbchxg.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F5n\\\u002Fwb\\\u002Fdu\\\u002F5nwbduykd19ryanqanvvtaymp4g.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fy6\\\u002Fdg\\\u002Ftg\\\u002Fy6dgtgwvwf4yprzf6qvp2dijbss.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fj3\\\u002Fzt\\\u002Feu\\\u002Fj3zteutdk8xhxddxikns8nr12fo.gif\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fig\\\u002Fa_\\\u002Fxt\\\u002Figa_xtu0manyadhs8cz_ytmj3k4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fzn\\\u002Fan\\\u002Fje\\\u002Fznanjexiyp3mkguce5d0ycw0ulc.png\"]}","metaDescription":"В&nbsp;одной из&nbsp;заметок нашего блога мы&nbsp;освещали подход к&nbsp;хранению и&nbsp;обработке данных, о&nbsp;котором получили несколько вполне ожидаемых вопросов такого плана: «В&nbsp;общем, ждём...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"neoflex":{"alias":"neoflex","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F815\u002Fdfd\u002F395\u002F815dfd395f12e5979bea705bdbea89ea.png","titleHtml":"Neoflex","descriptionHtml":"Создаем ИТ-платформы для цифровой трансформации","relatedData":null,"statistics":{"postsCount":28,"newsCount":0,"vacanciesCount":0,"employeesCount":13,"careerRating":4.12,"subscribersCount":1102,"rating":77.5,"invest":null},"foundationDate":{"year":"2005","month":"02","day":"21"},"location":{"city":{"id":"447159","title":"Москва"},"region":{"id":"1885","title":"Москва и Московская обл."},"country":{"id":"168","title":"Россия"}},"siteUrl":"http:\u002F\u002Fwww.neoflex.ru\u002F","staffNumber":"1 001–5 000 человек","registrationDate":"2018-04-20T08:00:04+00:00","representativeUser":null,"contacts":[{"title":"Сайт","url":"http:\u002F\u002Fwww.neoflex.ru\u002F"},{"title":"Facebook","url":"https:\u002F\u002Ffacebook.com\u002Fneoflexcompany"},{"title":"Telegram","url":"https:\u002F\u002Ftelegram.me\u002Fneoflexlive"}],"settings":{"analyticsSettings":[{"type":"ga","trackingId":"UA-127726177-1"}],"branding":null,"status":"active"},"metadata":{"titleHtml":"Neoflex, Москва - Создаем ИТ-платформы для цифровой трансформации с 21 февраля 2005 г.","title":"Neoflex, Москва - Создаем ИТ-платформы для цифровой трансформации с 21 февраля 2005 г.","keywords":["Big Data","Apache","Data Engineering","SQL","Серверное администрирование"],"descriptionHtml":"28 статей от авторов компании Neoflex","description":"28 статей от авторов компании Neoflex"},"aDeskSettings":null,"careerAlias":"neoflex-ru","maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
