<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/wolfram\/blog\/451640\/"},"headline":"«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое","datePublished":"2019-05-13T20:09:28+03:00","dateModified":"2019-11-13T21:35:34+03:00","author":{"@type":"Person","name":"Осипов Роман"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Оригинал поста + Вспомогательные функции и исходные данные  Оглавление Взаимоотношения персонажей &mdash; Кто кого родил &mdash; Кто кому брат или сестра &mdash; Кто кого убил...","url":"https:\/\/habr.com\/ru\/company\/wolfram\/blog\/451640\/#post-content-body","about":["c_wolfram","h_zadachki","h_programming","h_infographics","f_develop","f_popsci"],"image":["https:\/\/habrastorage.org\/webt\/ka\/8m\/4l\/ka8m4l-mpbkpfspbe8q9keplkzs.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/1d2\/05f\/8c3\/1d205f8c38e2d9be18e9fced3da5be55.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/8d9\/8e5\/5c7\/8d98e55c7719b1448e907685895dd2b4.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/1da\/3a2\/950\/1da3a2950b308bbfeff0caf27a2e48ea.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/0c2\/9aa\/f2f\/0c29aaf2f2d9c263106592d4f722bc0f.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/c06\/2a7\/893\/c062a7893a94788233c4cb77c8222bef.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/eca\/813\/d99\/eca813d99da5e342c43ec7a8e48cab5f.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/28e\/a6f\/097\/28ea6f097d8bdbc00a110e8eed9be1ab.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/28b\/d3d\/aa7\/28bd3daa7bcf2b767331523aaae300b6.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/5e3\/479\/03b\/5e347903b7a68e584ae18b68601f780a.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/f3f\/feb\/c89\/f3ffebc896236cd2085901b024ec4f29.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/f8c\/8d3\/8d0\/f8c8d38d06335601eb16192d440be693.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/da7\/d2a\/17d\/da7d2a17dab3f36c041c19d89f612b99.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/d97\/e35\/cdd\/d97e35cdda6cad0baec9c7ab7f97f628.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/a4b\/a7e\/3b9\/a4ba7e3b965705771dbae1e007f04a4f.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/2a9\/760\/57e\/2a976057e3e7a4e3be3a8401e5a889af.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/082\/883\/a77\/082883a77bbdd1b45a2809056ef8cd27.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/765\/02a\/8d1\/76502a8d1f5cf895486c7669d698c63b.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/798\/a71\/7b0\/798a717b08d21cc15025907955a6c9a5.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/634\/3ab\/31a\/6343ab31a8d8659f93116ac503e64c14.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/abb\/5b5\/f79\/abb5b5f79db2e696c49763942ac35060.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/525\/3ff\/6b8\/5253ff6b8f946b0c8f5ee020bcbf5972.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/320\/b5d\/c83\/320b5dc83aba58b3bd1878210bb6095b.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/b9c\/659\/84c\/b9c65984c2fe42c23c04ef27f7761eb4.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/352\/a92\/379\/352a92379609ec597bd794081aee9351.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/2bc\/f1e\/8ee\/2bcf1e8ee1ba27027b91124780d9373f.jpg","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/0fa\/606\/ead\/0fa606eadb6b14b9e5cbed21f4a9099a.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/c92\/2d0\/3ac\/c922d03acb8de795ddb0bf1eee42eb3b.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/06d\/e2e\/f97\/06de2ef97a573f8fdcd8425884de6852.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/846\/5ca\/59f\/8465ca59f891f1798de32416611c56f1.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/4e9\/57c\/973\/4e957c97384cf7896d02be985966e65b.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/e61\/555\/a87\/e61555a87a46cc708f4d9e6fa651e2c2.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/07e\/33d\/550\/07e33d550effc9715baccb24d6f2e987.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/1e2\/f37\/b4e\/1e2f37b4e5e30eefb69ebaf1eeefdd99.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/5f5\/f4c\/27d\/5f5f4c27db89d75f25b853830ef0ec0c.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Оригинал поста + Вспомогательные функции и исходные данные

Оглавление
Взаимоотношения персонажей
— Кто кого родил
— Кто кому брат или сестра
— Кто кого убил
— Кто кому служит
— Кто с..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Оригинал поста + Вспомогательные функции и исходные данные

Оглавление
Взаимоотношения персонажей
— Кто кого родил
— Кто кому брат или сестра
— Кто кого убил
— Кто кому служит
— Кто с..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Оригинал поста + Вспомогательные функции и исходные данные

Оглавление
Взаимоотношения персонажей
— Кто кого родил
— Кто кому брат или сестра
— Кто кого убил
— Кто кому служит
— Кто с..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Оригинал поста + Вспомогательные функции и исходные данные

Оглавление
Взаимоотношения персонажей
— Кто кого родил
— Кто кому брат или сестра
— Кто кого убил
— Кто кому служит
— Кто с..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Оригинал поста + Вспомогательные функции и исходные данные

Оглавление
Взаимоотношения персонажей
— Кто кого родил
— Кто кому брат или сестра
— Кто кого убил
— Кто кому служит
— Кто с..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/451640/9fc981e12fdee9788a68599d3671f863/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/451640/9fc981e12fdee9788a68599d3671f863/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/451640/9fc981e12fdee9788a68599d3671f863/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/451640/9fc981e12fdee9788a68599d3671f863/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/451640/9fc981e12fdee9788a68599d3671f863/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="451640" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-13T17:09:28.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/451640/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/wolfram/blog/451640/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/451640/9fc981e12fdee9788a68599d3671f863/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="wolfram" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/wolfram/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/52d/aff/3ce/52daff3ce7aa11f0abdf47d8295ce8ff.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/wolfram/profile/" class="tm-company-card__name">
        Wolfram Research
      </a> <div class="tm-company-card__description">Wolfram Language, Mathematica, Wolfram Alpha и др.</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/OsipovRoman/" title="OsipovRoman" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/023/54a/bd3/02354abd3288d831c9d107fa7277a941.jpg" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/OsipovRoman/" class="tm-user-info__username">
      OsipovRoman
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-13T17:09:28.000Z" title="2019-05-13, 20:09">13  мая  2019 в 20:09</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/wolfram/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании Wolfram Research</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/zadachki/" class="tm-article-snippet__hubs-item-link"><span>Занимательные задачки</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/infographics/" class="tm-article-snippet__hubs-item-link"><span>Инфографика</span> <!----></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/webt/ka/8m/4l/ka8m4l-mpbkpfspbe8q9keplkzs.png"/><br/>
<br/>
<div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.2493%;"><div class="tm-iframe_temp" data-src="https://www.youtube.com/embed/RaSoSuSCMZM?rel=0&amp;showinfo=1&amp;hl=en-US" data-style="border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;" id="" width=""></div></div></div></div><br/>
<a href="https://blog.wolframmathematica.ru/680/18-09-2019/">Оригинал поста + Вспомогательные функции и исходные данные</a><br/>
<br/>
<h1>Оглавление</h1><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#1">Взаимоотношения персонажей</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-1">Кто кого родил</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-2">Кто кому брат или сестра</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-3">Кто кого убил</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-4">Кто кому служит</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-5">Кто с кем женат или помолвлен</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-6">У кого с кем был секс</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#1-7">Все отношения на одном графе</a><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#2">Связь персонажей по сценам</a><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#3">Кто самый «популярный» персонаж Игры престолов?</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#4">Количество экранного времени у персонажей</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#5">Сколько персонажей было в сериях?</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#6">Кто из персонажей был в самом большом количестве серий «Игры престолов»?</a><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#7">Самые популярные локации «Игры престолов»</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#8">Карта локаций «Игры престолов»</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#9">Перемещения персонажей «Игры престолов» от серии к серии</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#10">Кто больше всего «путешествовал» из персонажей «Игры престолов»?</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#11">Самые популярные локации «Игры престолов» (по экранному времени)</a><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#12">В каких фильмах ещё играли актёры Игры престолов и насколько они знакомы?</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#13">Фильмы, в которых играли самые «востребованные» актёры «Игры престолов»:</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#14">Актёры «Игры престолов» в «Гарри Поттере»</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#15">Актёры «Игры престолов» в «Звёздных войнах»</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#16">Актёры «Игры престолов» в «Пиратах карибского моря»</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#17">В каких фильмах/сериалах много актёров «Игры престолов»</a><br/>
— <a href="https://habr.com/ru/company/wolfram/blog/451640/#18">Как тесно связаны между собой актёры «Игры престолов»</a><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#19">Разговоры в «Игре престолов»</a><br/>
<a href="https://habr.com/ru/company/wolfram/blog/451640/#20">Пол персонажей «Игры престолов»: кого больше, мужчин или женщин?</a><hr/>В этом посте я расскажу о том, как применять язык Wolfram Languge в анализе и визуализации данных на примере базы данных по «Игре престолов». В этой статье не уделяется особого внимания парсингу данных, об этом я расскажу отдельно. Вместо этого пост целиком посвящен интересной инфографике и её созданию.<br/>
<br/>
Надеюсь, что построенные визуализации заинтересуют тех, кому нравится этот замечательный сериал).<br/>
<a name="habracut"></a><br/>
<blockquote>Созданная для поста инфографика интерактивна в документе Mathematica, который можно скачать по ссылке в шапке.</blockquote><br/>
<a name="1"></a><h1>Взаимоотношения персонажей</h1><br/>
Набор рёбер графа взаимоотношений персонажей по типам:<br/>
<br/>
<pre><code class="plaintext">$GOTCharacterLinks=
    Module[{parser},        
        parser=            
            Flatten[                
                Thread/@
                    DeleteCases[                        
                        Lookup[                            
                            GOTRawData["characters.json"][
                                "characters"
                            ],
                            {"characterName",#}
                        ],
                        {_,_Missing}
                    ],
                1
            ]&amp;;        &lt;|                
        "РодительИРебёнок"
        ->
        Union[            
            DirectedEdge[#[[2]],#[[1]]]&amp;/@parser["parents"],
            DirectedEdge[#[[1]],#[[2]]]&amp;/@parser["parentOf"]
        ],        
        "БратьяИСёстры"
        ->
        DeleteDuplicates[            
            UndirectedEdge[#[[2]],#[[1]]]&amp;/@parser["siblings"],
            #1===Reverse[#2]&amp;
        ],
        "Убил"->
            Union[                
                DirectedEdge[#[[2]],#[[1]]]&amp;/@parser["killedBy"],
                DirectedEdge[#[[1]],#[[2]]]&amp;/@parser["killed"]
            ],
        "Служит"->(DirectedEdge[#[[1]],#[[2]]]&amp;/@parser["serves"]),        
        "ЖенатыОбручены"
        ->
        DeleteDuplicates[            
            UndirectedEdge[#[[1]],#[[2]]]&amp;/@parser["marriedEngaged"],
            #1===Reverse[#2]&amp;
        ],
        "Секс"->
            DeleteDuplicates[                
                Flatten[
                    Map[                        
                        Thread@UndirectedEdge[#[[1]],#[[2]]["with"]]&amp;,
                        Lookup[#,{"name","sex"}]&amp;/@
                            Select[                                
                                Select[                                    
                                    Flatten[
                                        Lookup[                                            
                                            Flatten[                                                
                                                GOTRawData[
                                                    "episodes.json"
                                                ][
                                                    "episodes"
                                                ][
                                                    [;;,"scenes"]
                                                ],
                                                1
                                            ],
                                            "characters"
                                        ]
                                    ],
                                    Keys[#]=!={"name"}&amp;
                                ],
                                MemberQ[Keys[#],"sex"]&amp;
                            ]
                    ]
                ],
                #1===Reverse[#2]&amp;
            ]|>
    ];</code></pre><br/>
Функция <b>GOTCharacterLinksGraph</b> для построения графов взаимосвязей персонажей «Игры престолов».<br/>
<br/>
<pre><code class="plaintext">ClearAll[GOTCharacterLinksGraph];
GOTCharacterLinksGraph[    
    data_,
    OptionsPattern[
        {            
            "ImageSize"->1500,
            "VertexSize"->Automatic,
            "GraphLayout"->"GravityEmbedding"
        }
    ]
]:=
    Module[{vertexList},        
        vertexList=
            DeleteDuplicates[Flatten[data[[;;,1]]/._[x_,y_]:>{x,y}]];
        Graph[            
            data,
            VertexLabels->
                Map[                                        
                    Rule[                        
                        #,
                        Placed[                            
                            Tooltip[                                                                
                                If[
                                    Head[#]===Image,
                                    Image[#,ImageSize->60],
                                    (* else *)
                                    Style[                                        
                                        StringReplace[#," "->"\n"],
                                        LineSpacing->{0.8,0,0},
                                        FontFamily->"Open Sans Light",
                                        Bold,
                                        12
                                    ]
                                ]&amp;[
                                    #/.$characterImage
                                ],
                                #/.$characterCardFull
                            ],
                            {1/2,1/2}
                        ]
                    ]&amp;,
                    vertexList
                ],
            VertexShapeFunction->"Circle",
            VertexSize->OptionValue["VertexSize"],
            VertexStyle->
                Directive[
                    {White,EdgeForm[{LightGray,AbsoluteThickness[2]}]}
                ],
            ImageSize->OptionValue["ImageSize"],
            Background->GrayLevel[0.95],
            AspectRatio->1,
            GraphLayout->OptionValue["GraphLayout"]
        ]
    ];</code></pre><br/>
<a name="1-1"></a>Узнаем кто кого родил в «Игре престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
       #, "Родители и их дети в \"Игре престолов\"", 
   "ImageSize" -> 1500
   ] &amp;@
     GOTCharacterLinksGraph[                
          Property[            
                 #,
                 {
                      EdgeStyle ->
                           Directive[
                                {                            
                                     AbsoluteThickness[2],
                                     Blue,
                                     Arrowheads[{0, {0.01, 0.5}}]
                                 }
                            ]
                  }
             ] &amp; /@
               $GOTCharacterLinks["РодительИРебёнок"],
          "VertexSize" -> 3
      ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3265-3331-4430-b030-633365643937/------.png"/><br/>
<br/>
<a name="1-2"></a>Теперь посмотрим, кто кому является братом или сестрой в «Игре престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
    #,"Братья и сёстры в \"Игре престолов\"","ImageSize"->1500
]&amp;@
    GOTCharacterLinksGraph[                
        Property[            
            #,
            {EdgeStyle->Directive[{AbsoluteThickness[2],Darker@Green}]}
        ]&amp;/@
            $GOTCharacterLinks["БратьяИСёстры"],
        "VertexSize"->0.7,
        "GraphLayout"->Automatic
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6363-6334-4634-b231-623463353637/-----.png"/><br/>
<br/>
<a name="1-3"></a>Одно из самых интересных: граф убийств в «Игре престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
    #,"Кто кого убил в \"Игре престолов\"","ImageSize"->2500
]&amp;@
    GOTCharacterLinksGraph[                
        Property[            
            #,
            {
                EdgeStyle->
                    Directive[
                        {                            
                            AbsoluteThickness[2],
                            Black,
                            Arrowheads[{0,{0.0075,0.5}}]
                        }
                    ]
            }
        ]&amp;/@
            $GOTCharacterLinks["Убил"],
        "VertexSize"->1.1,
        "ImageSize"->2500
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6266-3764-4131-b936-393162373636/-----.png"/><br/>
(<a href="https://yadi.sk/i/CLdyc-0BuckNag">оригинал</a>)<br/>
<br/>
<a name="1-4"></a>Не так интересно, но тем не менее — кто кому служит в «Игре престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
    #,"Кто кому служит в \"Игре престолов\"","ImageSize"->1000
]&amp;@
    GOTCharacterLinksGraph[                
        Property[            
            #,
            {
                EdgeStyle->
                    Directive[
                        {                            
                            AbsoluteThickness[2],
                            Magenta,
                            Arrowheads[{0,{0.02,0.5}}]
                        }
                    ]
            }
        ]&amp;/@
            $GOTCharacterLinks["Служит"],
        "VertexSize"->0.5,
        "ImageSize"->1000,
        "GraphLayout"->Automatic
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6632-3164-4466-a130-386539373931/-----.png"/><br/>
<br/>
<a name="1-5"></a>Помолвленные и женатые персонажи «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Кто с кем женат или обручен в \"Игре престолов\"",
    "ImageSize"->1000
]&amp;@
    GOTCharacterLinksGraph[                
        Property[
            #,{EdgeStyle->Directive[{AbsoluteThickness[2],Orange}]}
        ]&amp;/@
            $GOTCharacterLinks["ЖенатыОбручены"],
        "VertexSize"->0.5,
        "ImageSize"->1000,
        "GraphLayout"->Automatic
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6331-3339-4163-a366-613036393962/--------.png"/><br/>
<br/>
<a name="1-6"></a>Немного погорячее — кто с кем имел секс в «Игре престолов» (количество линий, думаю, не сложно догадаться, что означает ;)).<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[#, "Секс в \"Игре престолов\"", 
   "ImageSize" -> 1300] &amp;@
     GOTCharacterLinksGraph[        
          
  Property[#, {EdgeStyle -> 
       Directive[{AbsoluteThickness[2], Red}]}] &amp; /@
               $GOTCharacterLinks["Секс"],
          "VertexSize" -> 0.9,
          "ImageSize" -> 1300,
          "GraphLayout" -> "LayeredDigraphEmbedding"
      ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6630-3230-4166-b334-313362646537/---.png"/><br/>
<br/>
<a name="1-7"></a>Теперь сведем все графы в один большой граф взаимоотношений персонажей в «Игре престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Взаимоотношения персонажей в \"Игре престолов\"",
    "ImageSize"->3000
]&amp;@
    Legended[        
        GOTCharacterLinksGraph[            
            Join[                                
                Property[                    
                    #,
                    {
                        EdgeStyle->
                            Directive[
                                {                                    
                                    AbsoluteThickness[3],
                                    Blue,
                                    Arrowheads[{0,{0.005,0.5}}]
                                }
                            ]
                    }
                ]&amp;/@
                    $GOTCharacterLinks["РодительИРебёнок"],                
                Property[                    
                    #,
                    {
                        EdgeStyle->
                            Directive[
                                {AbsoluteThickness[3],Darker@Green}
                            ]
                    }
                ]&amp;/@
                    $GOTCharacterLinks["БратьяИСёстры"],                
                Property[                    
                    #,
                    {
                        EdgeStyle->
                            Directive[
                                {                                    
                                    AbsoluteThickness[3],
                                    Black,
                                    Arrowheads[{0,{0.005,0.5}}]
                                }
                            ]
                    }
                ]&amp;/@
                    $GOTCharacterLinks["Убил"],                
                Property[                    
                    #,
                    {
                        EdgeStyle->
                            Directive[
                                {                                    
                                    AbsoluteThickness[1],
                                    Magenta,
                                    Arrowheads[{0,{0.005,0.5}}]
                                }
                            ]
                    }
                ]&amp;/@
                    $GOTCharacterLinks["Служит"],                
                Property[                    
                    #,
                    {
                        EdgeStyle->
                            Directive[{AbsoluteThickness[2],Orange}]
                    }
                ]&amp;/@
                    $GOTCharacterLinks["ЖенатыОбручены"],                
                Property[                    
                    #,
                    {EdgeStyle->Directive[{AbsoluteThickness[3],Red}]}
                ]&amp;/@
                    DeleteDuplicates[$GOTCharacterLinks["Секс"]]
            ],
            "ImageSize"->3000,
            "VertexSize"->0.9
        ],
        Placed[            
            LineLegend[                
                {Blue,Darker@Green,Black,Magenta,Orange,Red},
                {                    
                    "Родитеи и дети",
                    "Братья и сёстры",
                    "Убил",
                    "Служит",
                    "Женаты или обручены",
                    "Секс"
                },
                LegendLayout->"Row"
            ],
            Top
        ]
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6339-3734-4664-a136-323062313237/----.png"/><br/>
(<a href="https://yadi.sk/i/stH4G2mvTBo1cQ">оригинал</a>)<br/>
<br/>
<a name="2"></a><h1>Связь персонажей по сценам</h1><br/>
<br/>
Посмотрим на то, какие персонажи появлялись в одной и той же сцене. Каждое ребро между персонажами означает, что они были в одной сцене. Чем ребро толще и краснее, тем больше общих сцен.<br/>
<br/>
Построим несколько графов: первый — показывает связи, с минимальным количеством сцен 2. Далее — 5, 10 и 20.<br/>
<br/>
<pre><code class="plaintext">Table[    
    Print[        
        GOTInfographicsPoster[            
            GOTGraphPlot[                
                #,
                min,
                "ImageSize"->Which[min==1,5000,min==4,3000,True,2000],
                "MaxThickness"->25
            ],            
            "Появление персонажей \"Игры престолов\" в одной сцене не менее "
            &lt;>
            ToString[min+1]
            &lt;>
            " раз",
            "ImageSize"->Which[min==1,5000,min==4,3000,True,2000]
        ]&amp;@
            Tally[
                UndirectedEdge@@@
                    Map[                        
                        Sort,
                        Flatten[                            
                            Map[                                
                                Subsets[#,{2}]&amp;,
                                Map[                                    
                                    #[[;;,"name"]]&amp;,
                                    Flatten[
                                        Lookup[                                            
                                            GOTRawData[
                                                "episodes.json"
                                            ][
                                                "episodes"
                                            ],
                                            "scenes"
                                        ]
                                    ][
                                        [;;,"characters"]
                                    ]
                                ]
                            ],
                            1
                        ]
                    ]
            ]
    ],
    {min,{1,4,9,19}}
];</code></pre><br/>
<br/>
<img src="https://static.tildacdn.com/tild6432-3138-4662-a639-333430383361/---------2-.jpg" alt="image" data-src="https://static.tildacdn.com/tild6432-3138-4662-a639-333430383361/---------2-.jpg" data-blurred="true"/><br/>
(<a href="https://yadi.sk/i/jOG8UFakjCVpeQ">оригинал</a>)<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6166-3262-4137-b331-306137366539/---------5-.png"/><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6337-3566-4362-b936-346238363938/---------10-.png"/><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6634-3433-4533-b134-653066636139/---------20-.png"/><br/>
<br/>
<a name="3"></a><h1>Кто самый «популярный» персонаж Игры престолов?</h1><br/>
<br/>
Для ответа на этот вопрос, создадим переменную <b>$GOTEpisodeData</b> в которую поместим набор очищенных данных о сценах по каждому эпизоду «Игры престолов».<br/>
<br/>
<pre><code class="plaintext">$GOTEpisodeData=    
    With[{data=#},        &lt;|        
        "EpisodeN"->#[[1]],
        "ScreenTime"->
            SortBy[                
                GroupBy[                    
                    Flatten[                                                
                        ReplaceAll[                            
                            Thread/@
                                Transpose[
                                    {                                        
                                        Map[                                            
                                            Lookup[#[[1]],"name"]&amp;,
                                            #[[2]]
                                        ],
                                        Round@
                                            Map[                                                                                                
                                                QuantityMagnitude[
                                                    UnitConvert[                                                        
                                                        Subtract@@
                                                            (
                                                                TimeObject/@
                                                                    #[                                                                        
                                                                        [
                                                                        {                                                                            
                                                                            3,
                                                                            2
                                                                        }
                                                                        ]
                                                                    ]
                                                            ),
                                                        "Seconds"
                                                    ]
                                                ]&amp;,
                                                #[[2]]
                                            ]
                                    }
                                ],                            
                            {Missing["KeyAbsent","name"],x_}
                            :>
                            {{"БезПерсонажей",x}}
                        ]&amp;@
                            data,
                        1
                    ],
                    First,
                    #[[;;,2]]&amp;
                ],
                -Total[#]&amp;
            ],        
        "LocationTime"
        ->
        SortBy[            
            GroupBy[                
                Flatten[                                        
                    ReplaceAll[                        
                        Thread/@
                            Transpose[
                                {                                                                        
                                    Map[{#[[{4,5}]]}&amp;,#[[2]]]
                                    /.
                                    Missing["KeyAbsent","subLocation"]->
                                        Nothing,
                                    Round@
                                        Map[                                                                                        
                                            QuantityMagnitude[
                                                UnitConvert[                                                    
                                                    Subtract@@
                                                        (
                                                            TimeObject/@
                                                                #[                                                                    
                                                                    [
                                                                    {                                                                        
                                                                        3,
                                                                        2
                                                                    }
                                                                    ]
                                                                ]
                                                        ),
                                                    "Seconds"
                                                ]
                                            ]&amp;,
                                            #[[2]]
                                        ]
                                }
                            ],                        
                        {Missing["KeyAbsent","name"],x_}
                        :>
                        {{"БезПерсонажей",x}}
                    ]&amp;@
                        data,
                    1
                ],
                First,
                #[[;;,2]]&amp;
            ],
            -Total[#]&amp;
        ],
        "CharacterLocations"->
            GroupBy[                                
                DeleteCases[                    
                    #/.Missing["KeyAbsent","subLocation"]->Nothing,
                    _Missing
                ]&amp;@
                    Flatten[                        
                        Map[                                                        
                            With[{location=#[[2]]},
                                {#,location}&amp;/@#[[1]]
                            ]&amp;,
                            Transpose[
                                {                                    
                                    Map[Lookup[#[[1]],"name"]&amp;,#[[2]]],
                                    #[[2,;;,{4,5}]]
                                }
                            ]
                        ],
                        1
                    ],
                First,
                #[[;;,2]]&amp;
            ]|>
    ]&amp;/@
        DeleteCases[            
            Map[                                
                {                    
                    #[[{1,2}]],
                    Lookup[                        
                        #[[3]],
                        {                            
                            "characters",
                            "sceneStart",
                            "sceneEnd",
                            "location",
                            "subLocation"
                        }
                    ]
                }&amp;,
                Lookup[                    
                    GOTRawData["episodes.json"]["episodes"],
                    {"seasonNum","episodeNum","scenes"}
                ]
            ],
            {_,{_Missing...}}
        ];</code></pre><br/>
<br/>
Пример данных по первой серии первого сезона:<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3136-3534-4931-a262-666131366232/2019-05-13_12-56-49.png"/><br/>
<br/>
<a name="4"></a><h2>Количество экранного времени у персонажей</h2><br/>
<br/>
30 персонажей «Игры престолов» с самым большим количеством экранного времени:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "30 персонажей, которых мы видим больше всего на экране",
    "ImageSize"->1500
]&amp;@
    circleInfographics[                
        {            
            Tooltip[                
                Row[                    
                    {                        
                        #[[1]]/.$characterImage,
                        Style[#[[1]],14,White,Bold],
                        Style[                            
                            UnitConvert[                                
                                Quantity[#[[2]],"Seconds"],
                                MixedUnit[
                                    {"Hours","Minutes","Seconds"}
                                ]
                            ],
                            14,
                            White
                        ]
                    },
                    "\n"
                ],
                #[[1]]/.$characterCardFull
            ],
            #[[2]]
        }&amp;/@
            KeyValueMap[                
                {#1,#2}&amp;,
                SortBy[                    
                    Merge[                        
                        $GOTEpisodeData[[All,"ScreenTime"]],
                        Total[Flatten[#]]&amp;
                    ],
                    -#&amp;
                ]
            ][
                [1;;30]
            ],
        "Precision"->10^-6,
        "StepDecrease"->0.99,
        "ShapeFunction"->Disk,
        "ColorFunction"->ColorData["Rainbow"],
        "ImageSize"->1500
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3865-3366-4137-a439-363862303839/30--------.png"/><br/>
(<a href="https://yadi.sk/i/UEfcEzTTAb5Hxg">оригинал</a>)<br/>
<br/>
Остальных тоже не будем обделять и построим большую таблицу:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "550+ персонажей и их экранное время",
    "ImageSize"->1500,
    "ImageResolution"->150
]&amp;@
    Multicolumn[                
        Style[
            Row[{#[[1]]," \[LongDash] ",#[[2]]," c"}],FontFamily->"Myriad Pro",8
        ]&amp;/@
            KeyValueMap[                
                {#1,#2}&amp;,
                SortBy[                    
                    Merge[                        
                        $GOTEpisodeData[[All,"ScreenTime"]],
                        Total[Flatten[#]]&amp;
                    ],
                    -#&amp;
                ]
            ],
        6
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6132-3834-4166-a138-343538396439/550_-----.png"/><br/>
(<a href="https://yadi.sk/i/jSYT0k6rKE6AaQ">оригинал</a>)<br/>
<br/>
<a name="5"></a><h2>Сколько персонажей было в сериях?</h2><br/>
<br/>
<b>$GOTEpisodeN</b> — переводит серию из формата <b>{сезон, порядновый номер серии в сезоне}</b> к просто порядковому номеру серии во всём сериале.<br/>
<br/>
<pre><code class="plaintext">$GOTEpisodeN=    &lt;|
    Thread[
        Rule[#,Range[Length[#]]]&amp;@$GOTEpisodeData[[All,"EpisodeN"]]
    ]|>;</code></pre><br/>
<br/>
<b>$GOTEpisodeID</b> — операция, обратная к <b>$GOTEpisodeN</b>.<br/>
<br/>
<pre><code class="plaintext">$GOTEpisodeID=    &lt;|
    Thread[
        Rule[Range[Length[#]],#]&amp;@$GOTEpisodeData[[All,"EpisodeN"]]
    ]|>;</code></pre><br/>
<br/>
Построим гистрограмму количества персонажей, задействованных в каждой из серий «Игры престолов»<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Количество персонажей в сериях \"Игры престолов\"",
    "ImageSize"->1000
]&amp;@
    BarChart[        
        #,
        BarSpacing->{0.05,2},
        AspectRatio->1/2,
        ImageSize->1000,
        ChartLabels->{Keys[#],Range[10]},
        ColorFunction->Function[{x},ColorData["Rainbow"][x]],
        GridLines->{None,Range[0,100,5]},
        FrameLabel->
            Map[                
                Style[#,FontFamily->"Open Sans",20,Bold]&amp;,
                {                    
                    "Сезон и серия в нём",
                    "Число задействованных персонажей"
                }
            ],
        Frame->True,
        Background->GrayLevel[0.95]
    ]&amp;@
    GroupBy[        
        Map[            
            {#["EpisodeN"],Length[#["ScreenTime"]]}&amp;,
            $GOTEpisodeData[[All,{"EpisodeN","ScreenTime"}]]
        ],
        #[[1,1]]&amp;,
        #[[;;,2]]&amp;
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6633-3163-4134-b264-313261633565/-----.png"/><br/>
<br/>
<a name="6"></a><h2>Кто из персонажей был в самом большом количестве серий «Игры престолов»?</h2><br/>
<br/>
Список персонажей «Игры престолов», отсортированный по количеству серий, в которых они встречались:<br/>
<br/>
<pre><code class="plaintext">$GOTCharacters=
    DeleteCases[        
        Reverse[
            SortBy[                
                Tally[
                    Flatten[Keys@$GOTEpisodeData[[All,"ScreenTime"]]]
                ],
                Last
            ]
        ][
            [;;,1]
        ],
        "БезПерсонажей"
    ];</code></pre><br/>
<br/>
Количество серий в сезоне:<br/>
<br/>
<pre><code class="plaintext">$GOTSeriesInSeason=    &lt;|
    KeyValueMap[#1->Length@#2&amp;,GroupBy[$GOTEpisodeData[[;;,1]],First]]|>;</code></pre><br/>
<br/>
«Маска» сезона (служебный символ):<br/>
<br/>
<pre><code class="plaintext">$GOTSeasonsMask=KeyValueMap[ConstantArray[#1,#2]&amp;,$GOTSeriesInSeason];
</code></pre><br/>
<br/>
<b>GOTCharacterBySeason</b> вычисляет в каких сериях каких сезонов был задействован персонаж «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTCharacterBySeason[name_]:=
    Module[{initialData,empty},        
        initialData=
            Map[                
                #[[;;,2]]&amp;,
                GroupBy[                    
                    Cases[                        
                        {#[[1]],Keys[#[[2]]]}&amp;/@
                            Lookup[                                
                                $GOTEpisodeData,
                                {"EpisodeN","ScreenTime"}
                            ],
                        {number_,episode_/;Not[FreeQ[episode,name]]}:>
                            number
                    ],
                    First
                ]
            ];
        empty=Complement[Range[1,8],Keys[initialData]];
        If[
            Length[empty]===0,
            initialData,
            (* else *)
            KeySort@&lt;|initialData,&lt;|#->{}&amp;/@empty|>|>
        ]
    ]</code></pre><br/>
<br/>
<b>GOTCharacterBySeasonPlot</b> визуализирует данные, полученные <b>GOTCharacterBySeason</b>.<br/>
<br/>
<pre><code class="plaintext">GOTCharacterBySeasonPlot[name_]:=
    Flatten@
        KeyValueMap[                        
            ReplacePart[                
                $GOTSeasonsMask[[#1]],
                Thread[
                    Complement[Range[1,$GOTSeriesInSeason[#1]],#2]->0
                ]
            ]&amp;,
            GOTCharacterBySeason[name]
        ]</code></pre><br/>
<br/>
<b>$GOTSeasonColors</b> набор цветов, для того, чтобы наглядно отображать набор серий сезона.<br/>
<br/>
<pre><code class="plaintext">$GOTSeasonColors=    
    {0->White}
    ~
    Join
    ~
    Thread[Range[1,8]->ColorData[54,"ColorList"][[1;;8]]];</code></pre><br/>
<br/>
Наконец, построим таблицу, в которой наглядно видно, кто из персонажей в какой серии «Игры престолов» был, а в какой не был)<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "100 персонажей \"Игры престолов\", присутствовавших в наибольшем количестве серий",
    "ImageSize"->2500
]&amp;@
    Grid[                
        {            
            {                
                "Персонаж \\ Сезон и серия",
                SpanFromLeft,
                Style["% серий\nс участием\nперсонажа",12]
            }
            ~
            Join
            ~
            Map[                                
                Style[
                    "S"&lt;>ToString[#[[1]]]&lt;>"\nE"&lt;>ToString[#[[2]]],10
                ]&amp;,
                Keys[$GOTEpisodeN]
            ]
        }
        ~
        Join
        ~
        (
            (                                
                {                    
                    ImageResize[#/.$characterImage,{Automatic,25}],
                    #,
                    PercentForm[                        
                        N@Total[Length/@GOTCharacterBySeason[#]]
                        /
                        Last[$GOTEpisodeN]
                    ]
                }
                ~
                Join
                ~
                ReplaceAll[                    
                    GOTCharacterBySeasonPlot[#],
                    x_Integer:>Item["",Background->x/.$GOTSeasonColors]
                ]&amp;/@
                    DeleteCases[
                        $GOTCharacters[[1;;100]],"БезПерсонажей"
                    ]
            )
        ),
        ItemSize->{{2,10,5,{1.2}},{4,{1}}},
        Background->White,
        Dividers->Gray,        
        ItemStyle
        ->
        Directive[
            FontFamily->"Open Sans",14,Bold,LineSpacing->{0.8,0,0}
        ],
        Alignment->{Center,Center}
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3066-6635-4536-b232-386533336663/100--------.png"/><br/>
(<a href="https://yadi.sk/i/vWRbzw6UG7bWlA">оригинал</a>)<br/>
<br/>
<a name="7"></a><h1>Самые популярные локации «Игры престолов»</h1><br/>
<br/>
<a name="8"></a><h2>Карта локаций «Игры престолов»</h2><br/>
<br/>
Построим карту из геометрических примитивов. Создадим их набор:<br/>
<br/>
<pre><code class="plaintext">index=1;
$GOTLakesIDs=
    {        
        11,
        8,
        9,
        10,
        2,
        529,
        530,
        522,
        523,
        533,
        532,
        526,
        521,
        525,
        531,
        524,
        528,
        527,
        7,
        3,
        4,
        5,
        6
    };
</code></pre><br/>
<br/>
<pre><code class="plaintext">$GOTMapPolygons=    
    {        
        FaceForm@If[MemberQ[$GOTLakesIDs,index],LightBlue,LightOrange],
        EdgeForm[AbsoluteThickness[1]],
        index++;Polygon[Accumulate[#]]
    }&amp;/@
        GOTRawData["lands-of-ice-and-fire.json"]["arcs"];</code></pre><br/>
<br/>
Создадим набор мест на карте «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">$GOTMapPlaces=
    Lookup[        
        GOTRawData["lands-of-ice-and-fire.json"]["objects"]["places"][
            "geometries"
        ],
        {"coordinates","properties"}
    ];</code></pre><br/>
<br/>
<pre><code class="plaintext">$GOTMapPlaceCoordinates=Map[#[[2,"name"]]->#[[1]]&amp;,$GOTMapPlaces];
</code></pre><br/>
<br/>
Функция <b>GOTMap</b> служит для построения всевозможных «географических» мест и траекторий на карте «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTMap[additinals_,OptionsPattern[{"ImageSize"->1500}]]:=
    Legended[        
        Graphics[            
            {                
                $GOTMapPolygons,                
                (                    
                    {                        
                        {                            
                            AbsolutePointSize[10],
                            Black,
                            Point[#1[[1]]],
                            AbsolutePointSize[5],
                            White,
                            Point[#1[[1]]]
                        },
                        Inset[                            
                            With[{placeType=#1[[2]]["type"]},                                
                                (                                    
                                    Framed[                                        
                                        #1,                                        
                                        Background
                                        ->
                                        (                                            
                                            placeType
                                            /.
                                            Thread[                                                
                                                {                                                    
                                                    "city",
                                                    "castle",
                                                    "ruin",
                                                    "town"
                                                }
                                                ->                                                
                                                (                                                    
                                                    Lighter[                                                        
                                                        RGBColor[
                                                            #1/255
                                                        ],
                                                        0.5
                                                    ]&amp;
                                                )/@
                                                    {                                                        
                                                        {254,92,7},
                                                        {254,252,9},
                                                        {138,182,7},
                                                        {2,130,237}
                                                    }
                                            ]
                                        ),
                                        RoundingRadius->6,
                                        FrameStyle->None,
                                        FrameMargins->2
                                    ]&amp;
                                )[
                                    Style[                                        
                                        #1[[2]]["name"],
                                        LineSpacing->{0.8,0,0},
                                        FontFamily->"Open Sans",
                                        Bold,
                                        12
                                    ]
                                ]
                            ],
                            #1[[1]],
                            If[
                                MemberQ[                                    
                                    {                                        
                                        "Eastwatch",
                                        "The Dreadfort",
                                        "White Harbor",
                                        "Storm's End",
                                        "Ghoyan Drohe",
                                        "Qohor"
                                    },
                                    #1[[2]]["name"]
                                ],
                                Scaled[{-0.1,1/2}],
                                (* else *)
                                Scaled[{1.1,1/2}]
                            ]
                        ]
                    }&amp;
                )/@
                    $GOTMapPlaces,
                additinals
            },
            ImageSize->OptionValue["ImageSize"],
            Background->LightBlue,
            PlotRangePadding->0
        ],
        (Placed[#1,"Bottom"]&amp;)[
            SwatchLegend[                
                (RGBColor[#1/255]&amp;)/@
                    {{254,92,7},{254,252,9},{138,182,7},{2,130,237}},
                {"city","castle","ruin","town"},
                LegendLayout->"Row"
            ]
        ]
    ]</code></pre><br/>
<br/>
Построим саму карту:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
    #,"Карта расположения локаций \"Игры престолов\"","ImageSize"->1500
]&amp;@
    GOTMap[{}]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3562-6466-4163-b664-656535363135/----.png"/><br/>
<br/>
<a name="9"></a><h2>Перемещения персонажей «Игры престолов» от серии к серии</h2><br/>
<br/>
Функция <b>GOTCharacterLocationNamesSequence</b> вычисляет перемещения персонажа между локациями «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTCharacterLocationNamesSequence[name_]:=
    Merge[$GOTEpisodeData[[;;,"CharacterLocations"]],Identity][name];</code></pre><br/>
<br/>
Функция <b>GOTCharacterLocationSequence</b> переводит названия мест в их «географические» координаты:<br/>
<br/>
<pre><code class="plaintext">GOTCharacterLocationSequence[name_]:=
    DeleteCases[        
        Partition[            
            Flatten[                
                DeleteCases[                                                            
                    GOTCharacterLocationNamesSequence[name]
                    /.
                    {{x_String,y_String}:>y,{x_String}:>x}
                    /.
                    $GOTMapPlaceCoordinates,
                    _String,
                    Infinity
                ],
                1
            ],
            2,
            1
        ],
        {x_,x_}
    ];</code></pre><br/>
<br/>
Функция <b>GOTMapTraectory</b> строит траекторию на карте «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">ClearAll[GOTMapTraectory];
GOTMapTraectory[path_,colorFunction_:ColorData["Rainbow"]]:=
    Module[{kol},        
        kol=Length[path];
        Table[            
            {                
                Opacity[0.5],
                colorFunction[(i-1)/(kol-1)],
                AbsoluteThickness[10i/kol+1],
                CapForm["Round"],
                Arrow[
                    BSplineCurve[
                        {                            
                            path[[i,1]],                            
                            Mean[path[[i]]]
                            +                            
                            RandomInteger[{5000,20000}]
                            Function[#/Norm[#]][                                
                                RandomChoice[{1,1}]
                                {-1,1}
                                *
                                Reverse[path[[i,2]]-path[[i,1]]]
                            ],
                            path[[i,2]]
                        }
                    ]
                ]
            },
            {i,1,kol}
        ]
    ];</code></pre><br/>
<br/>
Наконец, мы можем построить карту перемещения любого персонажа «Игры престолов». Построим их для 10 самых популярных героев.<br/>
<br/>
<pre><code class="plaintext">(    
    Print[
        With[{track=#1,name=#1[[1]]},            
            (                
                GOTInfographicsPoster[                    
                    #1,
                    Row[
                        {                            
                            "Перемещения ",
                            Style[name,Bold],
                            " в \"Игре престолов\"",
                            "\n",
                            Style[                                
                                "(линия перемещения утолщается от начала к концу)",
                                25
                            ]
                        }
                    ],
                    "ImageSize"->1500
                ]&amp;
            )[
                GOTMap[
                    {                        
                        Arrowheads[{0,0.01}],                        
                        (                            
                            With[{color=#1[[2]]},
                                GOTMapTraectory[
                                    GOTCharacterLocationSequence[name]
                                ]
                            ]&amp;
                        )[
                            track
                        ],
                        Inset[                            
                            track[[1]]/.$characterCardFull,
                            Scaled[{0.99,0.99}],
                            Scaled[{1,1}]
                        ]
                    }
                ]
            ]
        ]
    ]&amp;
)/@
    ({#1,RGBColor[{200,42,102}/255]}&amp;)/@$GOTCharacters[[1;;10]];</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3730-3931-4632-a362-613761336462/-tyrion-lannister---.png"/><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6664-6536-4137-b035-663634346362/-daenerys-targaryen-.png"/><br/>
(другие карты см. <a href="http://wolframmathematica.ru/blog/got">здесь</a>)<br/>
<br/>
<a name="10"></a><h2>Кто больше всего «путешествовал» из персонажей «Игры престолов»?</h2><br/>
<br/>
Найдем длину пути, пройденного каждым персонажем «Игры престолов» в условных единицах и посмотрим, кто больше всех поколесил по Вестеросу:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #1,
    "Кто больше всего \"путешествовал\" в \"Игре престолов\"?",
    "ImageSize"->1500
]&amp;@
    (        
        (            
            BarChart[                
                #1[[1;;All,1]],
                PlotRangePadding->0,
                BarSpacing->0.25,
                BarOrigin->Left,
                AspectRatio->1.8,
                ImageSize->1500,
                ChartLabels->#1[[1;;All,2]],
                Frame->True,
                GridLines->{Range[0,10^6,10^4],None},
                ColorFunction->ColorData["Rainbow"],
                FrameLabel->
                    {                        
                        {None,None},
                        Style[#,FontFamily->"Open Sans Light",16]&amp;/@
                            {                                
                                "Длина пути в условных единицах",
                                "Длина пути в условных единицах"
                            }
                    },
                Background->GrayLevel[0.95]
            ]&amp;
        )[
            Cases[                
                SortBy[                                        
                    (                        
                        {                            
                            Total[
                                (Norm[Subtract@@#1]&amp;)/@
                                    GOTCharacterLocationSequence[#1]
                            ],
                            #1/.$characterCardShortSmall
                        }&amp;
                    )/@
                        DeleteCases[                            
                            $GOTCharacters,
                            Alternatives@@
                                {                                    
                                    "БезПерсонажей",
                                    "Musician #1",
                                    "Musician #2",
                                    "Musician #3"
                                }
                        ],
                    First[#1]&amp;
                ],
                {x_/;x>0,_}
            ][
                [-50;;-1]
            ]
        ]
    )</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3039-6131-4033-b163-336661303236/------.png"/><br/>
<br/>
<a name="11"></a><h2>Самые популярные локации «Игры престолов» (по экранному времени)</h2><br/>
<br/>
Вычислим для каждой локации (и региона) на карте «Игры престолов» общее экранное время и отобразим результат в нескольких формах. Сразу будет видно самые популярные локации.<br/>
<br/>
Данные в виде столбчатой гистограммы:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #1,
    "Локации \"Игры престолов\" по экранному времени (вид 1)",
    "ImageSize"->2000
]&amp;@
    (        
        BarChart[            
            #[[;;,1]],
            PlotRangePadding->0,
            BarSpacing->{0.5,3},
            BarOrigin->Left,
            AspectRatio->1.5,
            ImageSize->2000,
            ChartLabels->{#[[;;,2]],None},
            ColorFunction->
                Function[
                    {x},If[x>4000,Red,ColorData["Rainbow"][x/4000]]
                ],
            ColorFunctionScaling->False,
            PlotRange->{0,55000},
            Frame->True,
            GridLines->{Range[0,60000,1000],None},
            GridLinesStyle->LightGray,
            FrameTicks->{All,Automatic},
            FrameLabel->
                {                    
                    {None,None},
                    Style[#,FontFamily->"Open Sans Light",16]&amp;/@
                        {                            
                            "Экранное время, секунды",
                            "Экранное время, секунды"
                        }
                },
            Background->GrayLevel[0.95]
        ]&amp;@
            KeyValueMap[                                
                {                                        
                    Callout[                        
                        #[[1]],
                        #[[2]],
                        If[#[[1]]&gt;20000,Bottom,Right],
                        If[#[[1]]&gt;4000,Scaled[1/2],Automatic]
                    ]&amp;/@
                        Transpose[{#2[[;;,2]],#2[[;;,1]]}],
                    #1
                }&amp;,
                SortBy[                    
                    GroupBy[                        
                        KeyValueMap[                            
                            {#1,#2}&amp;,
                            Merge[                                
                                $GOTEpisodeData[[All,"LocationTime"]],
                                Total[Flatten[#]]&amp;
                            ]
                        ],
                        #[[1,1]]&amp;,                        
                        SortBy[                                                        
                            Transpose[
                                {                                                                        
                                    #[[;;,1]]
                                    /.
                                    {                                        
                                        {x_String,y_String}:>y,
                                        {x_String}:>x
                                    },
                                    #[[;;,2]]
                                }
                            ]
                            /.
                            {"",_}:>Nothing,
                            Last[#]&amp;
                        ]&amp;
                    ],
                    Total[#[[;;,2]]]&amp;
                ]
            ]
    )
</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3631-3630-4264-b566-303263366536/-------1.png"/><br/>
(<a href="https://yadi.sk/i/eudGxMBWqcRfuQ">оригинал</a>)<br/>
<br/>
Данные в виде круговой парной диаграммы:<br/>
<br/>
<pre><code class="plaintext">{    
    Print[        
        GOTInfographicsPoster[            
            #1,
            "Локации \"Игры престолов\" по экранному времени (вид 2)",
            "ImageSize"->1500
        ]&amp;@
            stripLineInfographics[                
                #,
                "Reverse"->False,
                "Gaps"->{75,50},
                "ColorFunctionRight"->ColorData["Rainbow"]
            ]
    ],
    Print[        
        GOTInfographicsPoster[            
            #1,
            "Локации \"Игры престолов\" по экранному времени\n(отсортированы по географическим областям)",
            "ImageSize"->1500
        ]&amp;@
            stripLineInfographics[                
                #,
                "Reverse"->True,
                "Gaps"->{50,75},
                "ColorFunctionRight"->ColorData["Rainbow"]
            ]
    ]
}&amp;@
    SortBy[        
        GroupBy[            
            KeyValueMap[                
                {#1,#2}&amp;,
                Merge[                    
                    $GOTEpisodeData[[All,"LocationTime"]],
                    Total[Flatten[#]]&amp;
                ]
            ],
            #[[1,1]]&amp;,            
            SortBy[                                
                Transpose[
                    {                                                
                        #[[;;,1]]
                        /.
                        {{x_String,y_String}:>y,{x_String}:>x},
                        #[[;;,2]]
                    }
                ]
                /.
                {"",_}:>Nothing,
                Last[#]&amp;
            ]&amp;
        ],
        -Total[#[[;;,2]]]&amp;
    ];</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3831-3535-4263-b765-633965663237/-------2.png"/><br/>
(<a href="https://yadi.sk/i/YDlblA-z0YEL_Q">оригинал</a>)<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3134-6538-4164-b130-633031663037/---------.png"/><br/>
(<a href="https://yadi.sk/i/f_hPtir6TmEcGA">оригинал</a>)<br/>
<br/>
<a name="12"></a><h1>В каких фильмах ещё играли актёры Игры престолов и насколько они знакомы?</h1><br/>
<br/>
Конечно, актёры из «Игры престолов» ещё много где играли. Вычислим и поместим в переменную <b>$GOTCharactersInAnotherFilms</b> данные о том, в каких фильмах кто из актёров играл.<br/>
<br/>
<pre><code class="plaintext">$GOTCharactersInAnotherFilms=
    SortBy[        
        Map[                        
            {                
                #[[1]],
                #[[2]][[;;,"characterName"]],                
                If[
                    Head[#[[3]]]===Missing,
                    0,
                    (* else *)                    
                    StringCases[#[[3]],DigitCharacter..]
                    /.
                    x_/;Length[x]>0:>ToExpression[x]
                ]
                /.
                {{x_}:>x,{}->0}
            }&amp;,
            Lookup[                
                Values[GOTRawData["costars.json"]],
                {"title","actors","year"}
            ]
        ],
        -Length[#[[2]]]&amp;
    ];</code></pre><br/>
<br/>
Теперь вычислим для каждого актера, в каких фильмах он играл и поместим результат в переменную <b>$GOTCharactersFilmography</b>.<br/>
<br/>
<pre><code class="plaintext">$GOTCharactersFilmography=
    Association@
        SortBy[            
            Select[                                
                #->
                    SortBy[                        
                        Cases[                            
                            $GOTCharactersInAnotherFilms,
                            {film_,list_/;MemberQ[list,#],year_}:>
                                {film,year}
                        ],
                        -Last[#]&amp;
                    ]&amp;/@
                    $GOTCharacters,
                Length[#[[2]]]&gt;0&amp;
            ],
            -Length[#[[2]]]&amp;
        ];</code></pre><br/>
<br/>
Выясним в фильмах каких годов выпуска играли актёры «Игры престолов»:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #1,
    "Количество фильмов в зависимости от года выпуска, в которых играли актёры \"Игры престолов\"",
    "ImageSize"->800
]&amp;@
    DateHistogram[        
        DeleteMissing@
            Lookup[Values[GOTRawData["costars.json"]],"year"],
        ColorFunction->"Rainbow",
        ImageSize->800,
        Background->GrayLevel[0.95]
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3461-3865-4463-b963-663465343839/------------.png"/><br/>
<br/>
<a name="13"></a><h2>Фильмы, в которых играли самые «востребованные» актёры «Игры престолов»:</h2><br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #1,
    "Фильмы в которых играли 20 самых \"востребованных\" актёров \"Игры престолов\"",
    "ImageSize"->1500
]&amp;@
    Grid[                
        {            
            #/.$characterCardFull,            
            TextCell[                
                Grid[                    
                    KeyValueMap[                        
                        {#1/.{0->"неизв."},Row[#2," - "]}&amp;,
                        GroupBy[#,Last,#[[;;,1]]&amp;]
                    ],
                    Alignment->{{Center,Left},{Top,Top}}
                ],
                FontFamily->"Open Sans Light",
                FontSize->14,
                TextAlignment->Left,
                LineSpacing->{0.9,0,0}
            ]&amp;@
                $GOTCharactersFilmography[#]
        }&amp;/@
            $GOTCharacters[[1;;20]],
        Alignment->{{Center,Left},Center},
        ItemSize->{{20,70},Automatic},
        Background->GrayLevel[0.95],
        Dividers->{None,{None,{Gray},None}}
    ]</code></pre><br/>
<br/>
<img src="https://static.tildacdn.com/tild6234-3831-4261-a639-333563353935/----20-----.jpg" alt="image" data-src="https://static.tildacdn.com/tild6234-3831-4261-a639-333563353935/----20-----.jpg" data-blurred="true"/><br/>
(<a href="https://yadi.sk/i/bUCPH-QiIWyAtA">оригинал</a>)<br/>
<br/>
<a name="14"></a><h2>Актёры «Игры престолов» в «Гарри Поттере»</h2><br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
    #,"Актёры \"Игры престолов\" в \"Гарри Поттере\"","ImageSize"->1500
]&amp;@
    Grid[                
        {            
            Style[#[[1]],FontFamily->"Open Sans Light",16,Bold],
            Row[Magnify[#,0.75]&amp;/@(#[[2]]/.$characterCardFull),"  "]
        }&amp;/@
            SortBy[                
                Select[                    
                    $GOTCharactersInAnotherFilms,                    
                    StringMatchQ[
                        ToLowerCase@#[[1]],___~~"harry potter"~~___
                    ]&amp;
                ],
                -Last[#]&amp;
            ][
                [{1,-1,2,3,4,5,6,7}]
            ],
        Background->GrayLevel[0.95],
        ItemSize->{{25,70},Automatic},
        Dividers->{None,{None,{LightGray},None}},
        Alignment->{{Center,Left},Center}
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3039-3465-4463-a338-633434313137/-----.png"/><br/>
<br/>
<a name="15"></a><h2>Актёры «Игры престолов» в «Звёздных войнах»</h2><br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Актёры \"Игры престолов\" в \"Звёздных войнах\"",
    "ImageSize"->1100
]&amp;@
    Grid[                
        {            
            Style[#[[1]],FontFamily->"Open Sans Light",16,Bold],
            Row[Magnify[#,0.75]&amp;/@(#[[2]]/.$characterCardFull),"  "]
        }&amp;/@
            SortBy[                
                Select[                    
                    $GOTCharactersInAnotherFilms,                    
                    StringMatchQ[
                        ToLowerCase@#[[1]],___~~"star wars"~~___
                    ]&amp;
                ],
                -Last[#]&amp;
            ],
        Background->GrayLevel[0.95],
        ItemSize->{{25,45},Automatic},
        Dividers->{None,{None,{LightGray},None}},
        Alignment->{{Center,Left},Center}
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6562-6464-4738-a665-646366316561/-----.png"/><br/>
<br/>
<a name="16"></a><h2>Актёры «Игры престолов» в «Пиратах карибского моря»</h2><br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Актёры \"Игры престолов\" в \"Пиратах карибского моря\"",
    "ImageSize"->1300
]&amp;@
    Grid[                
        {            
            Style[#[[1]],FontFamily->"Open Sans Light",16,Bold],
            Row[Magnify[#,0.75]&amp;/@(#[[2]]/.$characterCardFull),"  "]
        }&amp;/@
            SortBy[                
                Select[                    
                    $GOTCharactersInAnotherFilms,                    
                    StringMatchQ[
                        ToLowerCase@#[[1]],___~~"pirates of the"~~___
                    ]&amp;
                ],
                -Last[#]&amp;
            ],
        Background->GrayLevel[0.95],
        ItemSize->{{25,50},Automatic},
        Dividers->{None,{None,{LightGray},None}},
        Alignment->{{Center,Left},Center}
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3763-6563-4761-a261-633366623962/------.png"/><br/>
<br/>
<a name="17"></a><h2>В каких фильмах/сериалах много актёров «Игры престолов»</h2><br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Фильмы (сериалы) в которых играет больше всего актёров \"Игры престолов\"",
    "ImageSize"->2000
]&amp;@
    Grid[                
        {            
            Style[#[[1]],FontFamily->"Open Sans Light",16,Bold],
            Row[Magnify[#,0.75]&amp;/@(#[[2]]/.$characterCardFull),"  "]
        }&amp;/@
            SortBy[                
                Select[$GOTCharactersInAnotherFilms,Length[#[[2]]]&gt;5&amp;],
                -Length[#[[2]]]&amp;
            ],
        Background->GrayLevel[0.95],
        ItemSize->{{20,100},Automatic},
        Dividers->{None,{None,{LightGray},None}},
        Alignment->{{Center,Left},Center}
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6566-3861-4634-a263-633463626137/---------.png"/><br/>
(<a href="https://yadi.sk/i/yZJA2b2CPQuR9g">оригинал</a>)<br/>
<br/>
<a name="18"></a><h2>Как тесно связаны между собой актёры «Игры престолов»</h2><br/>
<br/>
Построим граф, показывающий в скольких картинах (фильмах, сериалах и пр.) актёры «Игры престолов» играли вместе. Чем толще и краснее линия, тем больше общих картин у данной пары актёров. (<a href="https://yadi.sk/i/AGcM7GmFR7bAOA">Оригинал</a>)<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Как тесно связаны между собой актёры \"Игры престолов\"",
    "ImageSize"->2500
]&amp;@
    (        
        ConnectedGraphComponents[
            GOTGraphPlot[#,1,"ImageSize"->2500,"MaxThickness"->20]
        ][
            [1]
        ]&amp;@
            Tally[
                UndirectedEdge@@@
                    Map[                        
                        Sort,
                        Flatten[                            
                            Map[                                
                                Subsets[#,{2}]&amp;,
                                Select[                                    
                                    Values[GOTRawData["costars.json"]][                                        
                                        [                                        
                                        ;;,
                                        "actors",
                                        All,
                                        "characterName"
                                        ]
                                    ],
                                    Length[#]>1&amp;
                                ]
                            ],
                            1
                        ]
                    ]
            ]
    )</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6630-3234-4535-a261-643632613931/-------.png"/><br/>
<br/>
<a name="19"></a><h1>Разговоры в «Игре престолов»</h1><br/>
<br/>
Многие любят «Игру престолов» за диалоги. Посмотрим, в какой серии их больше всего:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #,
    "Количество слов, сказанных в сериях \"Игры престолов\"",
    "ImageSize"->1000
]&amp;@
    BarChart[        
        #,
        BarSpacing->{0.05,1},
        AspectRatio->1/2,
        ImageSize->1000,
        ChartLabels->{Keys[#],Range[10]},
        ColorFunction->Function[{x},ColorData["Rainbow"][x]],
        GridLines->{None,Range[0,10000,500]},
        FrameLabel->
            Map[                
                Style[#,FontFamily->"Open Sans",20,Bold]&amp;,
                {"Сезон и серия в нём","Количество сказанных слов"}
            ],
        Frame->True,
        Background->GrayLevel[0.95],
        PlotRangePadding->0,
        PlotRange->All
    ]&amp;@
    GroupBy[        
        Map[            
            {#[[1;;2]],Total[#[[3]][[;;,"count"]]]}&amp;,
            Lookup[                
                GOTRawData["wordcount.json"]["count"],
                {"seasonNum","episodeNum","text"}
            ]
        ],
        #[[1,1]]&amp;,
        #[[;;,2]]&amp;
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6532-3330-4862-a536-343335333163/------.png"/><br/>
<br/>
Выясним, кто больше всего «болтает» в «Игре престолов» — ответ довольно предсказуем, но удивляет отрыв Тириона почти в 2 раза от ближайшего к нему персонажа.<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #1,
    "Кто больше всего говорит в \"Игре престолов\"?",
    "ImageSize"->1500
]&amp;@
    (        
        (            
            BarChart[                
                #1[[1;;All,1]],
                PlotRangePadding->0,
                BarSpacing->0.25,
                BarOrigin->Left,
                AspectRatio->1.9,
                ImageSize->1500,
                ChartLabels->#1[[1;;All,2]],
                Frame->True,
                GridLines->{Range[0,10^5,10^3],None},
                ColorFunction->ColorData["Rainbow"],
                FrameLabel->
                    {                        
                        {None,None},
                        Style[#,FontFamily->"Open Sans Light",16]&amp;/@
                            {                                
                                "Количество сказанных слов",
                                "Количество сказанных слов"
                            }
                    },
                FrameTicks->{Automatic,{All,All}},
                Background->GrayLevel[0.95]
            ]&amp;
        )[
            KeyValueMap[                
                {#2,#1/.$characterCardShortSmall}&amp;,
                Select[                    
                    SortBy[                        
                        GroupBy[                            
                            Flatten[
                                GOTRawData["wordcount.json"]["count"][
                                    [;;,"text"]
                                ]
                            ],
                            #[["name"]]&amp;,
                            Total[#[[;;,"count"]]]&amp;
                        ],
                        #&amp;
                    ],
                    #>1000&amp;
                ]
            ]
        ]
    )
</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6563-3936-4564-b635-303938333466/------.png"/><br/>
<br/>
Наконец, построим диаграмму, показывающую количество экранного времени и количество сказанным персонажем слов вместе:<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[    
    #1,
    "Соотношение количества экранного времени и сказанных слов у персонажей \"Игры престолов\"\n(масштаб логарифмический)",
    "ImageSize"->2000
]&amp;@
    Module[{data1,data2,intersection},        
        data1=
            Merge[
                $GOTEpisodeData[[;;,"ScreenTime"]],Total[Flatten[#]]&amp;
            ];
        data2=
            GroupBy[                
                Flatten[
                    GOTRawData["wordcount.json"]["count"][[;;,"text"]]
                ],
                #[["name"]]&amp;,
                Total[#[[;;,"count"]]]&amp;
            ];
        intersection=Intersection[Keys@data1,Keys@data2];
        ListPlot[            
            Callout[{data1[#],data2[#]},#/.$characterCardShortSmall]&amp;/@
                intersection,
            AspectRatio->1,
            ImageSize->2000,
            PlotRange->All,
            ScalingFunctions->{"Log10","Log10"},
            GridLines->
                {                    
                    {10,100}~Join~Range[0,10^5,1000],
                    {10,100}~Join~Range[0,10^5,1000]
                },
            Frame->True,
            FrameTicks->All,
            FrameLabel->
                ReplaceAll[                    
                    {                        
                        {1,1}"Количество сказанных слов",
                        {1,1}"Время на экране, с"
                    },
                    x_String:>Style[x,FontFamily->"Open Sans",20,Bold]
                ],
            Background->GrayLevel[0.95],
            PlotMarkers->{Automatic,Small},
            GridLinesStyle->GrayLevel[0.85]
        ]
    ]</code></pre><br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild6662-6631-4866-b930-356533663439/------------.png"/><br/>
(<a href="https://yadi.sk/i/790Nq8sVUZ0o6w">оригинал</a>)<br/>
<br/>
<a name="20"></a><h1>Пол персонажей «Игры престолов»: кого больше, мужчин или женщин?</h1><br/>
<br/>
Пол по имени персонажа:<br/>
<br/>
<pre><code class="plaintext">$gender=    &lt;|    
    Flatten[
        KeyValueMap[
            Thread[#2->#1]&amp;,GOTRawData["characters-gender-all.json"]
        ]
    ]
    ~
    Join
    ~
    {        
        "Aegon Targaryen"->"male",
        "Aerys II Targaryen"->"male",
        "Archmaester Marwyn"->"male",
        "Baratheon Guard"->"male",
        "Brandon Stark"->"male",
        "Child of the Forest"->"male",
        "Elia Martell"->"female",
        "Eon Hunter"->"male",
        "Goldcloak #1"->"male",
        "Goldcloak #2"->"male",
        "Knight of House Frey"->"male",
        "Knight of House Lynderly"->"male",
        "Kurleket"->"male",
        "Lannister Guardsman"->"male",
        "Lord Galbart Glover"->"male",
        "Male Prostitute"->"male",
        "Masha Heddle"->"female",
        "Meereen Slave Master"->"male",
        "Mikken"->"male",
        "Night's Watch Deserter"->"male",
        "Night's Watch Messenger"->"male",
        "Night's Watch Officer"->"male",
        "Pentoshi Servant"->"male",
        "Rhaella Targaryen"->"female",
        "Rhaenys Targaryen"->"female",
        "Stark Bannerman"->"male",
        "Stark Guard"->"male",
        "Wedding Band"->"male",
        "White Walker #2"->"male",
        "Willis Wode"->"male",
        "Young Ned"->"male"
    }|></code></pre><br/>
<br/>
Соотношение персонажей «Игры престолов» по полу — видно, что на одну женщину приходится по 3 мужчины. Создается ощущение иногда, что мужские персонажи лишь антураж для мощных женских).<br/>
<br/>
<pre><code class="plaintext">GOTInfographicsPoster[
    #,"Соотношение мужских и женских персонажей в Игре престолов"
]&amp;@
    Module[{labels,counts,percents},        
        {labels,counts}=Transpose[Tally[Values[$gender]]];
        percents=PercentForm/@N[counts/Total[counts]];
        PieChart[            
            counts,
            ChartLabels->
                Map[                                        
                    Style[                        
                        Row[#,"\n"],
                        20,
                        Bold,
                        Black,
                        FontFamily->"Open Sans"
                    ]&amp;,
                    Transpose[{labels,counts,percents}]
                ],
            ChartStyle->{LightRed,LightBlue},
            ImageSize->600,
            Background->GrayLevel[0.95]
        ]
    ]</code></pre><br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://static.tildacdn.com/tild3665-3061-4262-a536-363837616163/-------.png"/><br/>
<br/>
<b>Напоминаю, что <a href="http://wolframmathematica.ru/blog/got">здесь</a> вы можете скачать оригинал поста со всеми вспомогательными функциями и исходными данными.</b><br/>
<br/>
<blockquote>Для сотрудничества — пишите личное сообщение на Хабре или в <a href="https://vk.com/wolfram24">мою группу ВКонтакте</a>.<br/>
<a href="https://www.youtube.com/channel/UC7JeG87kenaPEjEJBA6tmKw">Канал YouTube</a> — вебинары и обучающие ролики.<br/>
<a href="http://wolframmathematica.ru/#course"><b>Регистрация</b> на новые курсы</a>. Готовый <a href="https://blog.wolframmathematica.ru/2076/08-10-2019/"><b>онлайн курс</b></a>.</blockquote></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B8%D0%B3%D1%80%D0%B0%20%D0%BF%D1%80%D0%B5%D1%81%D1%82%D0%BE%D0%BB%D0%BE%D0%B2%5D" class="tm-tags-list__link">игра престолов</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bgame%20of%20thrones%5D" class="tm-tags-list__link">game of thrones</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bwolfram%20language%5D" class="tm-tags-list__link">wolfram language</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bwolfram%20mathematica%5D" class="tm-tags-list__link">wolfram mathematica</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B2%D0%B8%D0%B7%D1%83%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%20%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85%5D" class="tm-tags-list__link">визуализация данных</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B3%D0%B8%D1%81%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%5D" class="tm-tags-list__link">гистограмма</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B4%D0%B8%D0%B0%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%5D" class="tm-tags-list__link">диаграмма</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B3%D1%80%D0%B0%D1%84%D1%8B%5D" class="tm-tags-list__link">графы</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/wolfram/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании Wolfram Research
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/zadachki/" class="tm-hubs-list__link">
    Занимательные задачки
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/infographics/" class="tm-hubs-list__link">
    Инфографика
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 148: ↑134 и ↓14</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 148: ↑134 и ↓14" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+120</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">74K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    220
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/wolfram/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/52d/aff/3ce/52daff3ce7aa11f0abdf47d8295ce8ff.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/wolfram/profile/" class="tm-company-snippet__title">Wolfram Research</a> <div class="tm-company-snippet__description">Wolfram Language, Mathematica, Wolfram Alpha и др.</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="http://www.wolfram.com/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="http://www.youtube.com/user/WolframMathematicaRu" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://facebook.com/wolframresearch" rel="noopener" target="_blank" class="tm-article-author__contact">
      Facebook
    </a><a href="https://twitter.com/wolframresearch" rel="noopener" target="_blank" class="tm-article-author__contact">
      Twitter
    </a><a href="https://vk.com/wolframmathematica" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/OsipovRoman/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/023/54a/bd3/02354abd3288d831c9d107fa7277a941.jpg" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 303 голоса " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    235.5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Осипов Роман</span> <a href="/ru/users/OsipovRoman/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @OsipovRoman
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Руководитель IT-студии, эксперт Wolfram, математик</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <button type="submit" class="tm-user-card__button btn btn_transparent btn_small">
      Задонатить
    </button> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="http://wolframmathematica.ru/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://www.youtube.com/channel/UC7JeG87kenaPEjEJBA6tmKw" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a><a href="https://vk.com/wl.expert" rel="noopener" target="_blank" class="tm-article-author__contact">
      ВКонтакте
    </a></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/wolfram/blog/451640/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 77 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><span>
      1987
    </span></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    США
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="http://www.wolfram.com/" target="_blank" class="tm-company-basic-info__link">
      www.wolfram.com
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    1 001–5 000 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2009-05-09T16:40:52.000Z" title="2009-05-09, 20:40">9  мая  2009</time></dd></dl> <!----></div></div> <!----></section> <!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/wolfram/blog/451640/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/wolfram/blog/451640/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"451640":{"id":"451640","timePublished":"2019-05-13T17:09:28+00:00","isCorporative":true,"lang":"ru","titleHtml":"«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое","leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fka\u002F8m\u002F4l\u002Fka8m4l-mpbkpfspbe8q9keplkzs.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv\u003E\u003Cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.2493%;\"\u003E\u003Ciframe src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FRaSoSuSCMZM?rel=0&amp;showinfo=1&amp;hl=en-US\" style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" allowfullscreen scrolling=\"no\"\u003E\u003C\u002Fiframe\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fblog.wolframmathematica.ru\u002F680\u002F18-09-2019\u002F\"\u003EОригинал поста + Вспомогательные функции и исходные данные\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EОглавление\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1\"\u003EВзаимоотношения персонажей\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-1\"\u003EКто кого родил\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-2\"\u003EКто кому брат или сестра\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-3\"\u003EКто кого убил\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-4\"\u003EКто кому служит\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-5\"\u003EКто с кем женат или помолвлен\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-6\"\u003EУ кого с кем был секс\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-7\"\u003EВсе отношения на одном графе\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#2\"\u003EСвязь персонажей по сценам\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#3\"\u003EКто самый «популярный» персонаж Игры престолов?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#4\"\u003EКоличество экранного времени у персонажей\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#5\"\u003EСколько персонажей было в сериях?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#6\"\u003EКто из персонажей был в самом большом количестве серий «Игры престолов»?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#7\"\u003EСамые популярные локации «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#8\"\u003EКарта локаций «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#9\"\u003EПеремещения персонажей «Игры престолов» от серии к серии\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#10\"\u003EКто больше всего «путешествовал» из персонажей «Игры престолов»?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#11\"\u003EСамые популярные локации «Игры престолов» (по экранному времени)\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#12\"\u003EВ каких фильмах ещё играли актёры Игры престолов и насколько они знакомы?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#13\"\u003EФильмы, в которых играли самые «востребованные» актёры «Игры престолов»:\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#14\"\u003EАктёры «Игры престолов» в «Гарри Поттере»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#15\"\u003EАктёры «Игры престолов» в «Звёздных войнах»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#16\"\u003EАктёры «Игры престолов» в «Пиратах карибского моря»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#17\"\u003EВ каких фильмах\u002Fсериалах много актёров «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#18\"\u003EКак тесно связаны между собой актёры «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#19\"\u003EРазговоры в «Игре престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#20\"\u003EПол персонажей «Игры престолов»: кого больше, мужчин или женщин?\u003C\u002Fa\u003E\u003Chr\u002F\u003EВ этом посте я расскажу о том, как применять язык Wolfram Languge в анализе и визуализации данных на примере базы данных по «Игре престолов». В этой статье не уделяется особого внимания парсингу данных, об этом я расскажу отдельно. Вместо этого пост целиком посвящен интересной инфографике и её созданию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНадеюсь, что построенные визуализации заинтересуют тех, кому нравится этот замечательный сериал).\u003Cbr\u002F\u003E\r\n","imageUrl":null,"buttonTextHtml":null,"image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":235.5,"votesCount":303},"rating":0,"relatedData":null,"contacts":[{"title":"Сайт","url":"http:\u002F\u002Fwolframmathematica.ru\u002F","value":"http:\u002F\u002Fwolframmathematica.ru\u002F"},{"title":"Сайт","url":"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUC7JeG87kenaPEjEJBA6tmKw","value":"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUC7JeG87kenaPEjEJBA6tmKw"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fwl.expert","value":"wl.expert"}],"authorContacts":[{"title":"Сайт","url":"http:\u002F\u002Fwolframmathematica.ru\u002F","value":"http:\u002F\u002Fwolframmathematica.ru\u002F"},{"title":"Сайт","url":"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUC7JeG87kenaPEjEJBA6tmKw","value":"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUC7JeG87kenaPEjEJBA6tmKw"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fwl.expert","value":"wl.expert"}],"paymentDetails":{"paymentYandexMoney":"41001377809276","paymentPayPalMe":null,"paymentWebmoney":null},"id":"593575","alias":"OsipovRoman","fullname":"Осипов Роман","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F023\u002F54a\u002Fbd3\u002F02354abd3288d831c9d107fa7277a941.jpg","speciality":"Руководитель IT-студии, эксперт Wolfram, математик"},"statistics":{"commentsCount":77,"favoritesCount":220,"readingCount":73875,"score":120,"votesCount":148},"hubs":[{"relatedData":null,"id":"10020","alias":"wolfram","type":"corporative","title":"Блог компании Wolfram Research","titleHtml":"Блог компании Wolfram Research","isProfiled":false},{"relatedData":null,"id":"287","alias":"zadachki","type":"collective","title":"Занимательные задачки","titleHtml":"Занимательные задачки","isProfiled":false},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"21926","alias":"infographics","type":"collective","title":"Инфографика","titleHtml":"Инфографика","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fka\u002F8m\u002F4l\u002Fka8m4l-mpbkpfspbe8q9keplkzs.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"oembed\"\u003E\u003Cdiv\u003E\u003Cdiv style=\"left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.2493%;\"\u003E\u003Cdiv class=\"tm-iframe_temp\" data-src=\"https:\u002F\u002Fwww.youtube.com\u002Fembed\u002FRaSoSuSCMZM?rel=0&amp;showinfo=1&amp;hl=en-US\" data-style=\"border: 0; top: 0; left: 0; width: 100%; height: 100%; position: absolute;\" id=\"\" width=\"\"\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fblog.wolframmathematica.ru\u002F680\u002F18-09-2019\u002F\"\u003EОригинал поста + Вспомогательные функции и исходные данные\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EОглавление\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1\"\u003EВзаимоотношения персонажей\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-1\"\u003EКто кого родил\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-2\"\u003EКто кому брат или сестра\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-3\"\u003EКто кого убил\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-4\"\u003EКто кому служит\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-5\"\u003EКто с кем женат или помолвлен\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-6\"\u003EУ кого с кем был секс\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#1-7\"\u003EВсе отношения на одном графе\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#2\"\u003EСвязь персонажей по сценам\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#3\"\u003EКто самый «популярный» персонаж Игры престолов?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#4\"\u003EКоличество экранного времени у персонажей\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#5\"\u003EСколько персонажей было в сериях?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#6\"\u003EКто из персонажей был в самом большом количестве серий «Игры престолов»?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#7\"\u003EСамые популярные локации «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#8\"\u003EКарта локаций «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#9\"\u003EПеремещения персонажей «Игры престолов» от серии к серии\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#10\"\u003EКто больше всего «путешествовал» из персонажей «Игры престолов»?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#11\"\u003EСамые популярные локации «Игры престолов» (по экранному времени)\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#12\"\u003EВ каких фильмах ещё играли актёры Игры престолов и насколько они знакомы?\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#13\"\u003EФильмы, в которых играли самые «востребованные» актёры «Игры престолов»:\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#14\"\u003EАктёры «Игры престолов» в «Гарри Поттере»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#15\"\u003EАктёры «Игры престолов» в «Звёздных войнах»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#16\"\u003EАктёры «Игры престолов» в «Пиратах карибского моря»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#17\"\u003EВ каких фильмах\u002Fсериалах много актёров «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n— \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#18\"\u003EКак тесно связаны между собой актёры «Игры престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#19\"\u003EРазговоры в «Игре престолов»\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fwolfram\u002Fblog\u002F451640\u002F#20\"\u003EПол персонажей «Игры престолов»: кого больше, мужчин или женщин?\u003C\u002Fa\u003E\u003Chr\u002F\u003EВ этом посте я расскажу о том, как применять язык Wolfram Languge в анализе и визуализации данных на примере базы данных по «Игре престолов». В этой статье не уделяется особого внимания парсингу данных, об этом я расскажу отдельно. Вместо этого пост целиком посвящен интересной инфографике и её созданию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНадеюсь, что построенные визуализации заинтересуют тех, кому нравится этот замечательный сериал).\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EСозданная для поста инфографика интерактивна в документе Mathematica, который можно скачать по ссылке в шапке.\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EВзаимоотношения персонажей\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nНабор рёбер графа взаимоотношений персонажей по типам:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTCharacterLinks=\n    Module[{parser},        \n        parser=            \n            Flatten[                \n                Thread\u002F@\n                    DeleteCases[                        \n                        Lookup[                            \n                            GOTRawData[\"characters.json\"][\n                                \"characters\"\n                            ],\n                            {\"characterName\",#}\n                        ],\n                        {_,_Missing}\n                    ],\n                1\n            ]&amp;;        &lt;|                \n        \"РодительИРебёнок\"\n        -\u003E\n        Union[            \n            DirectedEdge[#[[2]],#[[1]]]&amp;\u002F@parser[\"parents\"],\n            DirectedEdge[#[[1]],#[[2]]]&amp;\u002F@parser[\"parentOf\"]\n        ],        \n        \"БратьяИСёстры\"\n        -\u003E\n        DeleteDuplicates[            \n            UndirectedEdge[#[[2]],#[[1]]]&amp;\u002F@parser[\"siblings\"],\n            #1===Reverse[#2]&amp;\n        ],\n        \"Убил\"-\u003E\n            Union[                \n                DirectedEdge[#[[2]],#[[1]]]&amp;\u002F@parser[\"killedBy\"],\n                DirectedEdge[#[[1]],#[[2]]]&amp;\u002F@parser[\"killed\"]\n            ],\n        \"Служит\"-\u003E(DirectedEdge[#[[1]],#[[2]]]&amp;\u002F@parser[\"serves\"]),        \n        \"ЖенатыОбручены\"\n        -\u003E\n        DeleteDuplicates[            \n            UndirectedEdge[#[[1]],#[[2]]]&amp;\u002F@parser[\"marriedEngaged\"],\n            #1===Reverse[#2]&amp;\n        ],\n        \"Секс\"-\u003E\n            DeleteDuplicates[                \n                Flatten[\n                    Map[                        \n                        Thread@UndirectedEdge[#[[1]],#[[2]][\"with\"]]&amp;,\n                        Lookup[#,{\"name\",\"sex\"}]&amp;\u002F@\n                            Select[                                \n                                Select[                                    \n                                    Flatten[\n                                        Lookup[                                            \n                                            Flatten[                                                \n                                                GOTRawData[\n                                                    \"episodes.json\"\n                                                ][\n                                                    \"episodes\"\n                                                ][\n                                                    [;;,\"scenes\"]\n                                                ],\n                                                1\n                                            ],\n                                            \"characters\"\n                                        ]\n                                    ],\n                                    Keys[#]=!={\"name\"}&amp;\n                                ],\n                                MemberQ[Keys[#],\"sex\"]&amp;\n                            ]\n                    ]\n                ],\n                #1===Reverse[#2]&amp;\n            ]|\u003E\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nФункция \u003Cb\u003EGOTCharacterLinksGraph\u003C\u002Fb\u003E для построения графов взаимосвязей персонажей «Игры престолов».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EClearAll[GOTCharacterLinksGraph];\nGOTCharacterLinksGraph[    \n    data_,\n    OptionsPattern[\n        {            \n            \"ImageSize\"-\u003E1500,\n            \"VertexSize\"-\u003EAutomatic,\n            \"GraphLayout\"-\u003E\"GravityEmbedding\"\n        }\n    ]\n]:=\n    Module[{vertexList},        \n        vertexList=\n            DeleteDuplicates[Flatten[data[[;;,1]]\u002F._[x_,y_]:\u003E{x,y}]];\n        Graph[            \n            data,\n            VertexLabels-\u003E\n                Map[                                        \n                    Rule[                        \n                        #,\n                        Placed[                            \n                            Tooltip[                                                                \n                                If[\n                                    Head[#]===Image,\n                                    Image[#,ImageSize-\u003E60],\n                                    (* else *)\n                                    Style[                                        \n                                        StringReplace[#,\" \"-\u003E\"\\n\"],\n                                        LineSpacing-\u003E{0.8,0,0},\n                                        FontFamily-\u003E\"Open Sans Light\",\n                                        Bold,\n                                        12\n                                    ]\n                                ]&amp;[\n                                    #\u002F.$characterImage\n                                ],\n                                #\u002F.$characterCardFull\n                            ],\n                            {1\u002F2,1\u002F2}\n                        ]\n                    ]&amp;,\n                    vertexList\n                ],\n            VertexShapeFunction-\u003E\"Circle\",\n            VertexSize-\u003EOptionValue[\"VertexSize\"],\n            VertexStyle-\u003E\n                Directive[\n                    {White,EdgeForm[{LightGray,AbsoluteThickness[2]}]}\n                ],\n            ImageSize-\u003EOptionValue[\"ImageSize\"],\n            Background-\u003EGrayLevel[0.95],\n            AspectRatio-\u003E1,\n            GraphLayout-\u003EOptionValue[\"GraphLayout\"]\n        ]\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-1\"\u003E\u003C\u002Fa\u003EУзнаем кто кого родил в «Игре престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n       #, \"Родители и их дети в \\\"Игре престолов\\\"\", \n   \"ImageSize\" -\u003E 1500\n   ] &amp;@\n     GOTCharacterLinksGraph[                \n          Property[            \n                 #,\n                 {\n                      EdgeStyle -\u003E\n                           Directive[\n                                {                            \n                                     AbsoluteThickness[2],\n                                     Blue,\n                                     Arrowheads[{0, {0.01, 0.5}}]\n                                 }\n                            ]\n                  }\n             ] &amp; \u002F@\n               $GOTCharacterLinks[\"РодительИРебёнок\"],\n          \"VertexSize\" -\u003E 3\n      ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3265-3331-4430-b030-633365643937\u002F------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-2\"\u003E\u003C\u002Fa\u003EТеперь посмотрим, кто кому является братом или сестрой в «Игре престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n    #,\"Братья и сёстры в \\\"Игре престолов\\\"\",\"ImageSize\"-\u003E1500\n]&amp;@\n    GOTCharacterLinksGraph[                \n        Property[            \n            #,\n            {EdgeStyle-\u003EDirective[{AbsoluteThickness[2],Darker@Green}]}\n        ]&amp;\u002F@\n            $GOTCharacterLinks[\"БратьяИСёстры\"],\n        \"VertexSize\"-\u003E0.7,\n        \"GraphLayout\"-\u003EAutomatic\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6363-6334-4634-b231-623463353637\u002F-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-3\"\u003E\u003C\u002Fa\u003EОдно из самых интересных: граф убийств в «Игре престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n    #,\"Кто кого убил в \\\"Игре престолов\\\"\",\"ImageSize\"-\u003E2500\n]&amp;@\n    GOTCharacterLinksGraph[                \n        Property[            \n            #,\n            {\n                EdgeStyle-\u003E\n                    Directive[\n                        {                            \n                            AbsoluteThickness[2],\n                            Black,\n                            Arrowheads[{0,{0.0075,0.5}}]\n                        }\n                    ]\n            }\n        ]&amp;\u002F@\n            $GOTCharacterLinks[\"Убил\"],\n        \"VertexSize\"-\u003E1.1,\n        \"ImageSize\"-\u003E2500\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6266-3764-4131-b936-393162373636\u002F-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FCLdyc-0BuckNag\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-4\"\u003E\u003C\u002Fa\u003EНе так интересно, но тем не менее — кто кому служит в «Игре престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n    #,\"Кто кому служит в \\\"Игре престолов\\\"\",\"ImageSize\"-\u003E1000\n]&amp;@\n    GOTCharacterLinksGraph[                \n        Property[            \n            #,\n            {\n                EdgeStyle-\u003E\n                    Directive[\n                        {                            \n                            AbsoluteThickness[2],\n                            Magenta,\n                            Arrowheads[{0,{0.02,0.5}}]\n                        }\n                    ]\n            }\n        ]&amp;\u002F@\n            $GOTCharacterLinks[\"Служит\"],\n        \"VertexSize\"-\u003E0.5,\n        \"ImageSize\"-\u003E1000,\n        \"GraphLayout\"-\u003EAutomatic\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6632-3164-4466-a130-386539373931\u002F-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-5\"\u003E\u003C\u002Fa\u003EПомолвленные и женатые персонажи «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Кто с кем женат или обручен в \\\"Игре престолов\\\"\",\n    \"ImageSize\"-\u003E1000\n]&amp;@\n    GOTCharacterLinksGraph[                \n        Property[\n            #,{EdgeStyle-\u003EDirective[{AbsoluteThickness[2],Orange}]}\n        ]&amp;\u002F@\n            $GOTCharacterLinks[\"ЖенатыОбручены\"],\n        \"VertexSize\"-\u003E0.5,\n        \"ImageSize\"-\u003E1000,\n        \"GraphLayout\"-\u003EAutomatic\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6331-3339-4163-a366-613036393962\u002F--------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-6\"\u003E\u003C\u002Fa\u003EНемного погорячее — кто с кем имел секс в «Игре престолов» (количество линий, думаю, не сложно догадаться, что означает ;)).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[#, \"Секс в \\\"Игре престолов\\\"\", \n   \"ImageSize\" -\u003E 1300] &amp;@\n     GOTCharacterLinksGraph[        \n          \n  Property[#, {EdgeStyle -\u003E \n       Directive[{AbsoluteThickness[2], Red}]}] &amp; \u002F@\n               $GOTCharacterLinks[\"Секс\"],\n          \"VertexSize\" -\u003E 0.9,\n          \"ImageSize\" -\u003E 1300,\n          \"GraphLayout\" -\u003E \"LayeredDigraphEmbedding\"\n      ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6630-3230-4166-b334-313362646537\u002F---.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"1-7\"\u003E\u003C\u002Fa\u003EТеперь сведем все графы в один большой граф взаимоотношений персонажей в «Игре престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Взаимоотношения персонажей в \\\"Игре престолов\\\"\",\n    \"ImageSize\"-\u003E3000\n]&amp;@\n    Legended[        \n        GOTCharacterLinksGraph[            \n            Join[                                \n                Property[                    \n                    #,\n                    {\n                        EdgeStyle-\u003E\n                            Directive[\n                                {                                    \n                                    AbsoluteThickness[3],\n                                    Blue,\n                                    Arrowheads[{0,{0.005,0.5}}]\n                                }\n                            ]\n                    }\n                ]&amp;\u002F@\n                    $GOTCharacterLinks[\"РодительИРебёнок\"],                \n                Property[                    \n                    #,\n                    {\n                        EdgeStyle-\u003E\n                            Directive[\n                                {AbsoluteThickness[3],Darker@Green}\n                            ]\n                    }\n                ]&amp;\u002F@\n                    $GOTCharacterLinks[\"БратьяИСёстры\"],                \n                Property[                    \n                    #,\n                    {\n                        EdgeStyle-\u003E\n                            Directive[\n                                {                                    \n                                    AbsoluteThickness[3],\n                                    Black,\n                                    Arrowheads[{0,{0.005,0.5}}]\n                                }\n                            ]\n                    }\n                ]&amp;\u002F@\n                    $GOTCharacterLinks[\"Убил\"],                \n                Property[                    \n                    #,\n                    {\n                        EdgeStyle-\u003E\n                            Directive[\n                                {                                    \n                                    AbsoluteThickness[1],\n                                    Magenta,\n                                    Arrowheads[{0,{0.005,0.5}}]\n                                }\n                            ]\n                    }\n                ]&amp;\u002F@\n                    $GOTCharacterLinks[\"Служит\"],                \n                Property[                    \n                    #,\n                    {\n                        EdgeStyle-\u003E\n                            Directive[{AbsoluteThickness[2],Orange}]\n                    }\n                ]&amp;\u002F@\n                    $GOTCharacterLinks[\"ЖенатыОбручены\"],                \n                Property[                    \n                    #,\n                    {EdgeStyle-\u003EDirective[{AbsoluteThickness[3],Red}]}\n                ]&amp;\u002F@\n                    DeleteDuplicates[$GOTCharacterLinks[\"Секс\"]]\n            ],\n            \"ImageSize\"-\u003E3000,\n            \"VertexSize\"-\u003E0.9\n        ],\n        Placed[            \n            LineLegend[                \n                {Blue,Darker@Green,Black,Magenta,Orange,Red},\n                {                    \n                    \"Родитеи и дети\",\n                    \"Братья и сёстры\",\n                    \"Убил\",\n                    \"Служит\",\n                    \"Женаты или обручены\",\n                    \"Секс\"\n                },\n                LegendLayout-\u003E\"Row\"\n            ],\n            Top\n        ]\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6339-3734-4664-a136-323062313237\u002F----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FstH4G2mvTBo1cQ\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"2\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EСвязь персонажей по сценам\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосмотрим на то, какие персонажи появлялись в одной и той же сцене. Каждое ребро между персонажами означает, что они были в одной сцене. Чем ребро толще и краснее, тем больше общих сцен.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПостроим несколько графов: первый — показывает связи, с минимальным количеством сцен 2. Далее — 5, 10 и 20.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003ETable[    \n    Print[        \n        GOTInfographicsPoster[            \n            GOTGraphPlot[                \n                #,\n                min,\n                \"ImageSize\"-\u003EWhich[min==1,5000,min==4,3000,True,2000],\n                \"MaxThickness\"-\u003E25\n            ],            \n            \"Появление персонажей \\\"Игры престолов\\\" в одной сцене не менее \"\n            &lt;\u003E\n            ToString[min+1]\n            &lt;\u003E\n            \" раз\",\n            \"ImageSize\"-\u003EWhich[min==1,5000,min==4,3000,True,2000]\n        ]&amp;@\n            Tally[\n                UndirectedEdge@@@\n                    Map[                        \n                        Sort,\n                        Flatten[                            \n                            Map[                                \n                                Subsets[#,{2}]&amp;,\n                                Map[                                    \n                                    #[[;;,\"name\"]]&amp;,\n                                    Flatten[\n                                        Lookup[                                            \n                                            GOTRawData[\n                                                \"episodes.json\"\n                                            ][\n                                                \"episodes\"\n                                            ],\n                                            \"scenes\"\n                                        ]\n                                    ][\n                                        [;;,\"characters\"]\n                                    ]\n                                ]\n                            ],\n                            1\n                        ]\n                    ]\n            ]\n    ],\n    {min,{1,4,9,19}}\n];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6432-3138-4662-a639-333430383361\u002F---------2-.jpg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6432-3138-4662-a639-333430383361\u002F---------2-.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FjOG8UFakjCVpeQ\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6166-3262-4137-b331-306137366539\u002F---------5-.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6337-3566-4362-b936-346238363938\u002F---------10-.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6634-3433-4533-b134-653066636139\u002F---------20-.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"3\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EКто самый «популярный» персонаж Игры престолов?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля ответа на этот вопрос, создадим переменную \u003Cb\u003E$GOTEpisodeData\u003C\u002Fb\u003E в которую поместим набор очищенных данных о сценах по каждому эпизоду «Игры престолов».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTEpisodeData=    \n    With[{data=#},        &lt;|        \n        \"EpisodeN\"-\u003E#[[1]],\n        \"ScreenTime\"-\u003E\n            SortBy[                \n                GroupBy[                    \n                    Flatten[                                                \n                        ReplaceAll[                            \n                            Thread\u002F@\n                                Transpose[\n                                    {                                        \n                                        Map[                                            \n                                            Lookup[#[[1]],\"name\"]&amp;,\n                                            #[[2]]\n                                        ],\n                                        Round@\n                                            Map[                                                                                                \n                                                QuantityMagnitude[\n                                                    UnitConvert[                                                        \n                                                        Subtract@@\n                                                            (\n                                                                TimeObject\u002F@\n                                                                    #[                                                                        \n                                                                        [\n                                                                        {                                                                            \n                                                                            3,\n                                                                            2\n                                                                        }\n                                                                        ]\n                                                                    ]\n                                                            ),\n                                                        \"Seconds\"\n                                                    ]\n                                                ]&amp;,\n                                                #[[2]]\n                                            ]\n                                    }\n                                ],                            \n                            {Missing[\"KeyAbsent\",\"name\"],x_}\n                            :\u003E\n                            {{\"БезПерсонажей\",x}}\n                        ]&amp;@\n                            data,\n                        1\n                    ],\n                    First,\n                    #[[;;,2]]&amp;\n                ],\n                -Total[#]&amp;\n            ],        \n        \"LocationTime\"\n        -\u003E\n        SortBy[            \n            GroupBy[                \n                Flatten[                                        \n                    ReplaceAll[                        \n                        Thread\u002F@\n                            Transpose[\n                                {                                                                        \n                                    Map[{#[[{4,5}]]}&amp;,#[[2]]]\n                                    \u002F.\n                                    Missing[\"KeyAbsent\",\"subLocation\"]-\u003E\n                                        Nothing,\n                                    Round@\n                                        Map[                                                                                        \n                                            QuantityMagnitude[\n                                                UnitConvert[                                                    \n                                                    Subtract@@\n                                                        (\n                                                            TimeObject\u002F@\n                                                                #[                                                                    \n                                                                    [\n                                                                    {                                                                        \n                                                                        3,\n                                                                        2\n                                                                    }\n                                                                    ]\n                                                                ]\n                                                        ),\n                                                    \"Seconds\"\n                                                ]\n                                            ]&amp;,\n                                            #[[2]]\n                                        ]\n                                }\n                            ],                        \n                        {Missing[\"KeyAbsent\",\"name\"],x_}\n                        :\u003E\n                        {{\"БезПерсонажей\",x}}\n                    ]&amp;@\n                        data,\n                    1\n                ],\n                First,\n                #[[;;,2]]&amp;\n            ],\n            -Total[#]&amp;\n        ],\n        \"CharacterLocations\"-\u003E\n            GroupBy[                                \n                DeleteCases[                    \n                    #\u002F.Missing[\"KeyAbsent\",\"subLocation\"]-\u003ENothing,\n                    _Missing\n                ]&amp;@\n                    Flatten[                        \n                        Map[                                                        \n                            With[{location=#[[2]]},\n                                {#,location}&amp;\u002F@#[[1]]\n                            ]&amp;,\n                            Transpose[\n                                {                                    \n                                    Map[Lookup[#[[1]],\"name\"]&amp;,#[[2]]],\n                                    #[[2,;;,{4,5}]]\n                                }\n                            ]\n                        ],\n                        1\n                    ],\n                First,\n                #[[;;,2]]&amp;\n            ]|\u003E\n    ]&amp;\u002F@\n        DeleteCases[            \n            Map[                                \n                {                    \n                    #[[{1,2}]],\n                    Lookup[                        \n                        #[[3]],\n                        {                            \n                            \"characters\",\n                            \"sceneStart\",\n                            \"sceneEnd\",\n                            \"location\",\n                            \"subLocation\"\n                        }\n                    ]\n                }&amp;,\n                Lookup[                    \n                    GOTRawData[\"episodes.json\"][\"episodes\"],\n                    {\"seasonNum\",\"episodeNum\",\"scenes\"}\n                ]\n            ],\n            {_,{_Missing...}}\n        ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПример данных по первой серии первого сезона:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3136-3534-4931-a262-666131366232\u002F2019-05-13_12-56-49.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"4\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EКоличество экранного времени у персонажей\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n30 персонажей «Игры престолов» с самым большим количеством экранного времени:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"30 персонажей, которых мы видим больше всего на экране\",\n    \"ImageSize\"-\u003E1500\n]&amp;@\n    circleInfographics[                \n        {            \n            Tooltip[                \n                Row[                    \n                    {                        \n                        #[[1]]\u002F.$characterImage,\n                        Style[#[[1]],14,White,Bold],\n                        Style[                            \n                            UnitConvert[                                \n                                Quantity[#[[2]],\"Seconds\"],\n                                MixedUnit[\n                                    {\"Hours\",\"Minutes\",\"Seconds\"}\n                                ]\n                            ],\n                            14,\n                            White\n                        ]\n                    },\n                    \"\\n\"\n                ],\n                #[[1]]\u002F.$characterCardFull\n            ],\n            #[[2]]\n        }&amp;\u002F@\n            KeyValueMap[                \n                {#1,#2}&amp;,\n                SortBy[                    \n                    Merge[                        \n                        $GOTEpisodeData[[All,\"ScreenTime\"]],\n                        Total[Flatten[#]]&amp;\n                    ],\n                    -#&amp;\n                ]\n            ][\n                [1;;30]\n            ],\n        \"Precision\"-\u003E10^-6,\n        \"StepDecrease\"-\u003E0.99,\n        \"ShapeFunction\"-\u003EDisk,\n        \"ColorFunction\"-\u003EColorData[\"Rainbow\"],\n        \"ImageSize\"-\u003E1500\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3865-3366-4137-a439-363862303839\u002F30--------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FUEfcEzTTAb5Hxg\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОстальных тоже не будем обделять и построим большую таблицу:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"550+ персонажей и их экранное время\",\n    \"ImageSize\"-\u003E1500,\n    \"ImageResolution\"-\u003E150\n]&amp;@\n    Multicolumn[                \n        Style[\n            Row[{#[[1]],\" \\[LongDash] \",#[[2]],\" c\"}],FontFamily-\u003E\"Myriad Pro\",8\n        ]&amp;\u002F@\n            KeyValueMap[                \n                {#1,#2}&amp;,\n                SortBy[                    \n                    Merge[                        \n                        $GOTEpisodeData[[All,\"ScreenTime\"]],\n                        Total[Flatten[#]]&amp;\n                    ],\n                    -#&amp;\n                ]\n            ],\n        6\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6132-3834-4166-a138-343538396439\u002F550_-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FjSYT0k6rKE6AaQ\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"5\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EСколько персонажей было в сериях?\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003E$GOTEpisodeN\u003C\u002Fb\u003E — переводит серию из формата \u003Cb\u003E{сезон, порядновый номер серии в сезоне}\u003C\u002Fb\u003E к просто порядковому номеру серии во всём сериале.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTEpisodeN=    &lt;|\n    Thread[\n        Rule[#,Range[Length[#]]]&amp;@$GOTEpisodeData[[All,\"EpisodeN\"]]\n    ]|\u003E;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003E$GOTEpisodeID\u003C\u002Fb\u003E — операция, обратная к \u003Cb\u003E$GOTEpisodeN\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTEpisodeID=    &lt;|\n    Thread[\n        Rule[Range[Length[#]],#]&amp;@$GOTEpisodeData[[All,\"EpisodeN\"]]\n    ]|\u003E;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПостроим гистрограмму количества персонажей, задействованных в каждой из серий «Игры престолов»\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Количество персонажей в сериях \\\"Игры престолов\\\"\",\n    \"ImageSize\"-\u003E1000\n]&amp;@\n    BarChart[        \n        #,\n        BarSpacing-\u003E{0.05,2},\n        AspectRatio-\u003E1\u002F2,\n        ImageSize-\u003E1000,\n        ChartLabels-\u003E{Keys[#],Range[10]},\n        ColorFunction-\u003EFunction[{x},ColorData[\"Rainbow\"][x]],\n        GridLines-\u003E{None,Range[0,100,5]},\n        FrameLabel-\u003E\n            Map[                \n                Style[#,FontFamily-\u003E\"Open Sans\",20,Bold]&amp;,\n                {                    \n                    \"Сезон и серия в нём\",\n                    \"Число задействованных персонажей\"\n                }\n            ],\n        Frame-\u003ETrue,\n        Background-\u003EGrayLevel[0.95]\n    ]&amp;@\n    GroupBy[        \n        Map[            \n            {#[\"EpisodeN\"],Length[#[\"ScreenTime\"]]}&amp;,\n            $GOTEpisodeData[[All,{\"EpisodeN\",\"ScreenTime\"}]]\n        ],\n        #[[1,1]]&amp;,\n        #[[;;,2]]&amp;\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6633-3163-4134-b264-313261633565\u002F-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"6\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EКто из персонажей был в самом большом количестве серий «Игры престолов»?\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСписок персонажей «Игры престолов», отсортированный по количеству серий, в которых они встречались:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTCharacters=\n    DeleteCases[        \n        Reverse[\n            SortBy[                \n                Tally[\n                    Flatten[Keys@$GOTEpisodeData[[All,\"ScreenTime\"]]]\n                ],\n                Last\n            ]\n        ][\n            [;;,1]\n        ],\n        \"БезПерсонажей\"\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКоличество серий в сезоне:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTSeriesInSeason=    &lt;|\n    KeyValueMap[#1-\u003ELength@#2&amp;,GroupBy[$GOTEpisodeData[[;;,1]],First]]|\u003E;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n«Маска» сезона (служебный символ):\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTSeasonsMask=KeyValueMap[ConstantArray[#1,#2]&amp;,$GOTSeriesInSeason];\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EGOTCharacterBySeason\u003C\u002Fb\u003E вычисляет в каких сериях каких сезонов был задействован персонаж «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTCharacterBySeason[name_]:=\n    Module[{initialData,empty},        \n        initialData=\n            Map[                \n                #[[;;,2]]&amp;,\n                GroupBy[                    \n                    Cases[                        \n                        {#[[1]],Keys[#[[2]]]}&amp;\u002F@\n                            Lookup[                                \n                                $GOTEpisodeData,\n                                {\"EpisodeN\",\"ScreenTime\"}\n                            ],\n                        {number_,episode_\u002F;Not[FreeQ[episode,name]]}:\u003E\n                            number\n                    ],\n                    First\n                ]\n            ];\n        empty=Complement[Range[1,8],Keys[initialData]];\n        If[\n            Length[empty]===0,\n            initialData,\n            (* else *)\n            KeySort@&lt;|initialData,&lt;|#-\u003E{}&amp;\u002F@empty|\u003E|\u003E\n        ]\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EGOTCharacterBySeasonPlot\u003C\u002Fb\u003E визуализирует данные, полученные \u003Cb\u003EGOTCharacterBySeason\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTCharacterBySeasonPlot[name_]:=\n    Flatten@\n        KeyValueMap[                        \n            ReplacePart[                \n                $GOTSeasonsMask[[#1]],\n                Thread[\n                    Complement[Range[1,$GOTSeriesInSeason[#1]],#2]-\u003E0\n                ]\n            ]&amp;,\n            GOTCharacterBySeason[name]\n        ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003E$GOTSeasonColors\u003C\u002Fb\u003E набор цветов, для того, чтобы наглядно отображать набор серий сезона.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTSeasonColors=    \n    {0-\u003EWhite}\n    ~\n    Join\n    ~\n    Thread[Range[1,8]-\u003EColorData[54,\"ColorList\"][[1;;8]]];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаконец, построим таблицу, в которой наглядно видно, кто из персонажей в какой серии «Игры престолов» был, а в какой не был)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"100 персонажей \\\"Игры престолов\\\", присутствовавших в наибольшем количестве серий\",\n    \"ImageSize\"-\u003E2500\n]&amp;@\n    Grid[                \n        {            \n            {                \n                \"Персонаж \\\\ Сезон и серия\",\n                SpanFromLeft,\n                Style[\"% серий\\nс участием\\nперсонажа\",12]\n            }\n            ~\n            Join\n            ~\n            Map[                                \n                Style[\n                    \"S\"&lt;\u003EToString[#[[1]]]&lt;\u003E\"\\nE\"&lt;\u003EToString[#[[2]]],10\n                ]&amp;,\n                Keys[$GOTEpisodeN]\n            ]\n        }\n        ~\n        Join\n        ~\n        (\n            (                                \n                {                    \n                    ImageResize[#\u002F.$characterImage,{Automatic,25}],\n                    #,\n                    PercentForm[                        \n                        N@Total[Length\u002F@GOTCharacterBySeason[#]]\n                        \u002F\n                        Last[$GOTEpisodeN]\n                    ]\n                }\n                ~\n                Join\n                ~\n                ReplaceAll[                    \n                    GOTCharacterBySeasonPlot[#],\n                    x_Integer:\u003EItem[\"\",Background-\u003Ex\u002F.$GOTSeasonColors]\n                ]&amp;\u002F@\n                    DeleteCases[\n                        $GOTCharacters[[1;;100]],\"БезПерсонажей\"\n                    ]\n            )\n        ),\n        ItemSize-\u003E{{2,10,5,{1.2}},{4,{1}}},\n        Background-\u003EWhite,\n        Dividers-\u003EGray,        \n        ItemStyle\n        -\u003E\n        Directive[\n            FontFamily-\u003E\"Open Sans\",14,Bold,LineSpacing-\u003E{0.8,0,0}\n        ],\n        Alignment-\u003E{Center,Center}\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3066-6635-4536-b232-386533336663\u002F100--------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FvWRbzw6UG7bWlA\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"7\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EСамые популярные локации «Игры престолов»\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"8\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EКарта локаций «Игры престолов»\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПостроим карту из геометрических примитивов. Создадим их набор:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003Eindex=1;\n$GOTLakesIDs=\n    {        \n        11,\n        8,\n        9,\n        10,\n        2,\n        529,\n        530,\n        522,\n        523,\n        533,\n        532,\n        526,\n        521,\n        525,\n        531,\n        524,\n        528,\n        527,\n        7,\n        3,\n        4,\n        5,\n        6\n    };\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTMapPolygons=    \n    {        \n        FaceForm@If[MemberQ[$GOTLakesIDs,index],LightBlue,LightOrange],\n        EdgeForm[AbsoluteThickness[1]],\n        index++;Polygon[Accumulate[#]]\n    }&amp;\u002F@\n        GOTRawData[\"lands-of-ice-and-fire.json\"][\"arcs\"];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСоздадим набор мест на карте «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTMapPlaces=\n    Lookup[        \n        GOTRawData[\"lands-of-ice-and-fire.json\"][\"objects\"][\"places\"][\n            \"geometries\"\n        ],\n        {\"coordinates\",\"properties\"}\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTMapPlaceCoordinates=Map[#[[2,\"name\"]]-\u003E#[[1]]&amp;,$GOTMapPlaces];\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФункция \u003Cb\u003EGOTMap\u003C\u002Fb\u003E служит для построения всевозможных «географических» мест и траекторий на карте «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTMap[additinals_,OptionsPattern[{\"ImageSize\"-\u003E1500}]]:=\n    Legended[        \n        Graphics[            \n            {                \n                $GOTMapPolygons,                \n                (                    \n                    {                        \n                        {                            \n                            AbsolutePointSize[10],\n                            Black,\n                            Point[#1[[1]]],\n                            AbsolutePointSize[5],\n                            White,\n                            Point[#1[[1]]]\n                        },\n                        Inset[                            \n                            With[{placeType=#1[[2]][\"type\"]},                                \n                                (                                    \n                                    Framed[                                        \n                                        #1,                                        \n                                        Background\n                                        -\u003E\n                                        (                                            \n                                            placeType\n                                            \u002F.\n                                            Thread[                                                \n                                                {                                                    \n                                                    \"city\",\n                                                    \"castle\",\n                                                    \"ruin\",\n                                                    \"town\"\n                                                }\n                                                -\u003E                                                \n                                                (                                                    \n                                                    Lighter[                                                        \n                                                        RGBColor[\n                                                            #1\u002F255\n                                                        ],\n                                                        0.5\n                                                    ]&amp;\n                                                )\u002F@\n                                                    {                                                        \n                                                        {254,92,7},\n                                                        {254,252,9},\n                                                        {138,182,7},\n                                                        {2,130,237}\n                                                    }\n                                            ]\n                                        ),\n                                        RoundingRadius-\u003E6,\n                                        FrameStyle-\u003ENone,\n                                        FrameMargins-\u003E2\n                                    ]&amp;\n                                )[\n                                    Style[                                        \n                                        #1[[2]][\"name\"],\n                                        LineSpacing-\u003E{0.8,0,0},\n                                        FontFamily-\u003E\"Open Sans\",\n                                        Bold,\n                                        12\n                                    ]\n                                ]\n                            ],\n                            #1[[1]],\n                            If[\n                                MemberQ[                                    \n                                    {                                        \n                                        \"Eastwatch\",\n                                        \"The Dreadfort\",\n                                        \"White Harbor\",\n                                        \"Storm's End\",\n                                        \"Ghoyan Drohe\",\n                                        \"Qohor\"\n                                    },\n                                    #1[[2]][\"name\"]\n                                ],\n                                Scaled[{-0.1,1\u002F2}],\n                                (* else *)\n                                Scaled[{1.1,1\u002F2}]\n                            ]\n                        ]\n                    }&amp;\n                )\u002F@\n                    $GOTMapPlaces,\n                additinals\n            },\n            ImageSize-\u003EOptionValue[\"ImageSize\"],\n            Background-\u003ELightBlue,\n            PlotRangePadding-\u003E0\n        ],\n        (Placed[#1,\"Bottom\"]&amp;)[\n            SwatchLegend[                \n                (RGBColor[#1\u002F255]&amp;)\u002F@\n                    {{254,92,7},{254,252,9},{138,182,7},{2,130,237}},\n                {\"city\",\"castle\",\"ruin\",\"town\"},\n                LegendLayout-\u003E\"Row\"\n            ]\n        ]\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПостроим саму карту:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n    #,\"Карта расположения локаций \\\"Игры престолов\\\"\",\"ImageSize\"-\u003E1500\n]&amp;@\n    GOTMap[{}]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3562-6466-4163-b664-656535363135\u002F----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"9\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EПеремещения персонажей «Игры престолов» от серии к серии\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФункция \u003Cb\u003EGOTCharacterLocationNamesSequence\u003C\u002Fb\u003E вычисляет перемещения персонажа между локациями «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTCharacterLocationNamesSequence[name_]:=\n    Merge[$GOTEpisodeData[[;;,\"CharacterLocations\"]],Identity][name];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФункция \u003Cb\u003EGOTCharacterLocationSequence\u003C\u002Fb\u003E переводит названия мест в их «географические» координаты:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTCharacterLocationSequence[name_]:=\n    DeleteCases[        \n        Partition[            \n            Flatten[                \n                DeleteCases[                                                            \n                    GOTCharacterLocationNamesSequence[name]\n                    \u002F.\n                    {{x_String,y_String}:\u003Ey,{x_String}:\u003Ex}\n                    \u002F.\n                    $GOTMapPlaceCoordinates,\n                    _String,\n                    Infinity\n                ],\n                1\n            ],\n            2,\n            1\n        ],\n        {x_,x_}\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nФункция \u003Cb\u003EGOTMapTraectory\u003C\u002Fb\u003E строит траекторию на карте «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EClearAll[GOTMapTraectory];\nGOTMapTraectory[path_,colorFunction_:ColorData[\"Rainbow\"]]:=\n    Module[{kol},        \n        kol=Length[path];\n        Table[            \n            {                \n                Opacity[0.5],\n                colorFunction[(i-1)\u002F(kol-1)],\n                AbsoluteThickness[10i\u002Fkol+1],\n                CapForm[\"Round\"],\n                Arrow[\n                    BSplineCurve[\n                        {                            \n                            path[[i,1]],                            \n                            Mean[path[[i]]]\n                            +                            \n                            RandomInteger[{5000,20000}]\n                            Function[#\u002FNorm[#]][                                \n                                RandomChoice[{1,1}]\n                                {-1,1}\n                                *\n                                Reverse[path[[i,2]]-path[[i,1]]]\n                            ],\n                            path[[i,2]]\n                        }\n                    ]\n                ]\n            },\n            {i,1,kol}\n        ]\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаконец, мы можем построить карту перемещения любого персонажа «Игры престолов». Построим их для 10 самых популярных героев.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E(    \n    Print[\n        With[{track=#1,name=#1[[1]]},            \n            (                \n                GOTInfographicsPoster[                    \n                    #1,\n                    Row[\n                        {                            \n                            \"Перемещения \",\n                            Style[name,Bold],\n                            \" в \\\"Игре престолов\\\"\",\n                            \"\\n\",\n                            Style[                                \n                                \"(линия перемещения утолщается от начала к концу)\",\n                                25\n                            ]\n                        }\n                    ],\n                    \"ImageSize\"-\u003E1500\n                ]&amp;\n            )[\n                GOTMap[\n                    {                        \n                        Arrowheads[{0,0.01}],                        \n                        (                            \n                            With[{color=#1[[2]]},\n                                GOTMapTraectory[\n                                    GOTCharacterLocationSequence[name]\n                                ]\n                            ]&amp;\n                        )[\n                            track\n                        ],\n                        Inset[                            \n                            track[[1]]\u002F.$characterCardFull,\n                            Scaled[{0.99,0.99}],\n                            Scaled[{1,1}]\n                        ]\n                    }\n                ]\n            ]\n        ]\n    ]&amp;\n)\u002F@\n    ({#1,RGBColor[{200,42,102}\u002F255]}&amp;)\u002F@$GOTCharacters[[1;;10]];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3730-3931-4632-a362-613761336462\u002F-tyrion-lannister---.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6664-6536-4137-b035-663634346362\u002F-daenerys-targaryen-.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(другие карты см. \u003Ca href=\"http:\u002F\u002Fwolframmathematica.ru\u002Fblog\u002Fgot\"\u003Eздесь\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"10\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EКто больше всего «путешествовал» из персонажей «Игры престолов»?\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНайдем длину пути, пройденного каждым персонажем «Игры престолов» в условных единицах и посмотрим, кто больше всех поколесил по Вестеросу:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #1,\n    \"Кто больше всего \\\"путешествовал\\\" в \\\"Игре престолов\\\"?\",\n    \"ImageSize\"-\u003E1500\n]&amp;@\n    (        \n        (            \n            BarChart[                \n                #1[[1;;All,1]],\n                PlotRangePadding-\u003E0,\n                BarSpacing-\u003E0.25,\n                BarOrigin-\u003ELeft,\n                AspectRatio-\u003E1.8,\n                ImageSize-\u003E1500,\n                ChartLabels-\u003E#1[[1;;All,2]],\n                Frame-\u003ETrue,\n                GridLines-\u003E{Range[0,10^6,10^4],None},\n                ColorFunction-\u003EColorData[\"Rainbow\"],\n                FrameLabel-\u003E\n                    {                        \n                        {None,None},\n                        Style[#,FontFamily-\u003E\"Open Sans Light\",16]&amp;\u002F@\n                            {                                \n                                \"Длина пути в условных единицах\",\n                                \"Длина пути в условных единицах\"\n                            }\n                    },\n                Background-\u003EGrayLevel[0.95]\n            ]&amp;\n        )[\n            Cases[                \n                SortBy[                                        \n                    (                        \n                        {                            \n                            Total[\n                                (Norm[Subtract@@#1]&amp;)\u002F@\n                                    GOTCharacterLocationSequence[#1]\n                            ],\n                            #1\u002F.$characterCardShortSmall\n                        }&amp;\n                    )\u002F@\n                        DeleteCases[                            \n                            $GOTCharacters,\n                            Alternatives@@\n                                {                                    \n                                    \"БезПерсонажей\",\n                                    \"Musician #1\",\n                                    \"Musician #2\",\n                                    \"Musician #3\"\n                                }\n                        ],\n                    First[#1]&amp;\n                ],\n                {x_\u002F;x\u003E0,_}\n            ][\n                [-50;;-1]\n            ]\n        ]\n    )\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3039-6131-4033-b163-336661303236\u002F------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"11\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EСамые популярные локации «Игры престолов» (по экранному времени)\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВычислим для каждой локации (и региона) на карте «Игры престолов» общее экранное время и отобразим результат в нескольких формах. Сразу будет видно самые популярные локации.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДанные в виде столбчатой гистограммы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #1,\n    \"Локации \\\"Игры престолов\\\" по экранному времени (вид 1)\",\n    \"ImageSize\"-\u003E2000\n]&amp;@\n    (        \n        BarChart[            \n            #[[;;,1]],\n            PlotRangePadding-\u003E0,\n            BarSpacing-\u003E{0.5,3},\n            BarOrigin-\u003ELeft,\n            AspectRatio-\u003E1.5,\n            ImageSize-\u003E2000,\n            ChartLabels-\u003E{#[[;;,2]],None},\n            ColorFunction-\u003E\n                Function[\n                    {x},If[x\u003E4000,Red,ColorData[\"Rainbow\"][x\u002F4000]]\n                ],\n            ColorFunctionScaling-\u003EFalse,\n            PlotRange-\u003E{0,55000},\n            Frame-\u003ETrue,\n            GridLines-\u003E{Range[0,60000,1000],None},\n            GridLinesStyle-\u003ELightGray,\n            FrameTicks-\u003E{All,Automatic},\n            FrameLabel-\u003E\n                {                    \n                    {None,None},\n                    Style[#,FontFamily-\u003E\"Open Sans Light\",16]&amp;\u002F@\n                        {                            \n                            \"Экранное время, секунды\",\n                            \"Экранное время, секунды\"\n                        }\n                },\n            Background-\u003EGrayLevel[0.95]\n        ]&amp;@\n            KeyValueMap[                                \n                {                                        \n                    Callout[                        \n                        #[[1]],\n                        #[[2]],\n                        If[#[[1]]&gt;20000,Bottom,Right],\n                        If[#[[1]]&gt;4000,Scaled[1\u002F2],Automatic]\n                    ]&amp;\u002F@\n                        Transpose[{#2[[;;,2]],#2[[;;,1]]}],\n                    #1\n                }&amp;,\n                SortBy[                    \n                    GroupBy[                        \n                        KeyValueMap[                            \n                            {#1,#2}&amp;,\n                            Merge[                                \n                                $GOTEpisodeData[[All,\"LocationTime\"]],\n                                Total[Flatten[#]]&amp;\n                            ]\n                        ],\n                        #[[1,1]]&amp;,                        \n                        SortBy[                                                        \n                            Transpose[\n                                {                                                                        \n                                    #[[;;,1]]\n                                    \u002F.\n                                    {                                        \n                                        {x_String,y_String}:\u003Ey,\n                                        {x_String}:\u003Ex\n                                    },\n                                    #[[;;,2]]\n                                }\n                            ]\n                            \u002F.\n                            {\"\",_}:\u003ENothing,\n                            Last[#]&amp;\n                        ]&amp;\n                    ],\n                    Total[#[[;;,2]]]&amp;\n                ]\n            ]\n    )\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3631-3630-4264-b566-303263366536\u002F-------1.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FeudGxMBWqcRfuQ\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДанные в виде круговой парной диаграммы:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E{    \n    Print[        \n        GOTInfographicsPoster[            \n            #1,\n            \"Локации \\\"Игры престолов\\\" по экранному времени (вид 2)\",\n            \"ImageSize\"-\u003E1500\n        ]&amp;@\n            stripLineInfographics[                \n                #,\n                \"Reverse\"-\u003EFalse,\n                \"Gaps\"-\u003E{75,50},\n                \"ColorFunctionRight\"-\u003EColorData[\"Rainbow\"]\n            ]\n    ],\n    Print[        \n        GOTInfographicsPoster[            \n            #1,\n            \"Локации \\\"Игры престолов\\\" по экранному времени\\n(отсортированы по географическим областям)\",\n            \"ImageSize\"-\u003E1500\n        ]&amp;@\n            stripLineInfographics[                \n                #,\n                \"Reverse\"-\u003ETrue,\n                \"Gaps\"-\u003E{50,75},\n                \"ColorFunctionRight\"-\u003EColorData[\"Rainbow\"]\n            ]\n    ]\n}&amp;@\n    SortBy[        \n        GroupBy[            \n            KeyValueMap[                \n                {#1,#2}&amp;,\n                Merge[                    \n                    $GOTEpisodeData[[All,\"LocationTime\"]],\n                    Total[Flatten[#]]&amp;\n                ]\n            ],\n            #[[1,1]]&amp;,            \n            SortBy[                                \n                Transpose[\n                    {                                                \n                        #[[;;,1]]\n                        \u002F.\n                        {{x_String,y_String}:\u003Ey,{x_String}:\u003Ex},\n                        #[[;;,2]]\n                    }\n                ]\n                \u002F.\n                {\"\",_}:\u003ENothing,\n                Last[#]&amp;\n            ]&amp;\n        ],\n        -Total[#[[;;,2]]]&amp;\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3831-3535-4263-b765-633965663237\u002F-------2.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FYDlblA-z0YEL_Q\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3134-6538-4164-b130-633031663037\u002F---------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002Ff_hPtir6TmEcGA\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"12\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EВ каких фильмах ещё играли актёры Игры престолов и насколько они знакомы?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКонечно, актёры из «Игры престолов» ещё много где играли. Вычислим и поместим в переменную \u003Cb\u003E$GOTCharactersInAnotherFilms\u003C\u002Fb\u003E данные о том, в каких фильмах кто из актёров играл.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTCharactersInAnotherFilms=\n    SortBy[        \n        Map[                        \n            {                \n                #[[1]],\n                #[[2]][[;;,\"characterName\"]],                \n                If[\n                    Head[#[[3]]]===Missing,\n                    0,\n                    (* else *)                    \n                    StringCases[#[[3]],DigitCharacter..]\n                    \u002F.\n                    x_\u002F;Length[x]\u003E0:\u003EToExpression[x]\n                ]\n                \u002F.\n                {{x_}:\u003Ex,{}-\u003E0}\n            }&amp;,\n            Lookup[                \n                Values[GOTRawData[\"costars.json\"]],\n                {\"title\",\"actors\",\"year\"}\n            ]\n        ],\n        -Length[#[[2]]]&amp;\n    ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТеперь вычислим для каждого актера, в каких фильмах он играл и поместим результат в переменную \u003Cb\u003E$GOTCharactersFilmography\u003C\u002Fb\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$GOTCharactersFilmography=\n    Association@\n        SortBy[            \n            Select[                                \n                #-\u003E\n                    SortBy[                        \n                        Cases[                            \n                            $GOTCharactersInAnotherFilms,\n                            {film_,list_\u002F;MemberQ[list,#],year_}:\u003E\n                                {film,year}\n                        ],\n                        -Last[#]&amp;\n                    ]&amp;\u002F@\n                    $GOTCharacters,\n                Length[#[[2]]]&gt;0&amp;\n            ],\n            -Length[#[[2]]]&amp;\n        ];\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВыясним в фильмах каких годов выпуска играли актёры «Игры престолов»:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #1,\n    \"Количество фильмов в зависимости от года выпуска, в которых играли актёры \\\"Игры престолов\\\"\",\n    \"ImageSize\"-\u003E800\n]&amp;@\n    DateHistogram[        \n        DeleteMissing@\n            Lookup[Values[GOTRawData[\"costars.json\"]],\"year\"],\n        ColorFunction-\u003E\"Rainbow\",\n        ImageSize-\u003E800,\n        Background-\u003EGrayLevel[0.95]\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3461-3865-4463-b963-663465343839\u002F------------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"13\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EФильмы, в которых играли самые «востребованные» актёры «Игры престолов»:\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #1,\n    \"Фильмы в которых играли 20 самых \\\"востребованных\\\" актёров \\\"Игры престолов\\\"\",\n    \"ImageSize\"-\u003E1500\n]&amp;@\n    Grid[                \n        {            \n            #\u002F.$characterCardFull,            \n            TextCell[                \n                Grid[                    \n                    KeyValueMap[                        \n                        {#1\u002F.{0-\u003E\"неизв.\"},Row[#2,\" - \"]}&amp;,\n                        GroupBy[#,Last,#[[;;,1]]&amp;]\n                    ],\n                    Alignment-\u003E{{Center,Left},{Top,Top}}\n                ],\n                FontFamily-\u003E\"Open Sans Light\",\n                FontSize-\u003E14,\n                TextAlignment-\u003ELeft,\n                LineSpacing-\u003E{0.9,0,0}\n            ]&amp;@\n                $GOTCharactersFilmography[#]\n        }&amp;\u002F@\n            $GOTCharacters[[1;;20]],\n        Alignment-\u003E{{Center,Left},Center},\n        ItemSize-\u003E{{20,70},Automatic},\n        Background-\u003EGrayLevel[0.95],\n        Dividers-\u003E{None,{None,{Gray},None}}\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6234-3831-4261-a639-333563353935\u002F----20-----.jpg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6234-3831-4261-a639-333563353935\u002F----20-----.jpg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FbUCPH-QiIWyAtA\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"14\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EАктёры «Игры престолов» в «Гарри Поттере»\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n    #,\"Актёры \\\"Игры престолов\\\" в \\\"Гарри Поттере\\\"\",\"ImageSize\"-\u003E1500\n]&amp;@\n    Grid[                \n        {            \n            Style[#[[1]],FontFamily-\u003E\"Open Sans Light\",16,Bold],\n            Row[Magnify[#,0.75]&amp;\u002F@(#[[2]]\u002F.$characterCardFull),\"  \"]\n        }&amp;\u002F@\n            SortBy[                \n                Select[                    \n                    $GOTCharactersInAnotherFilms,                    \n                    StringMatchQ[\n                        ToLowerCase@#[[1]],___~~\"harry potter\"~~___\n                    ]&amp;\n                ],\n                -Last[#]&amp;\n            ][\n                [{1,-1,2,3,4,5,6,7}]\n            ],\n        Background-\u003EGrayLevel[0.95],\n        ItemSize-\u003E{{25,70},Automatic},\n        Dividers-\u003E{None,{None,{LightGray},None}},\n        Alignment-\u003E{{Center,Left},Center}\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3039-3465-4463-a338-633434313137\u002F-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"15\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EАктёры «Игры престолов» в «Звёздных войнах»\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Актёры \\\"Игры престолов\\\" в \\\"Звёздных войнах\\\"\",\n    \"ImageSize\"-\u003E1100\n]&amp;@\n    Grid[                \n        {            \n            Style[#[[1]],FontFamily-\u003E\"Open Sans Light\",16,Bold],\n            Row[Magnify[#,0.75]&amp;\u002F@(#[[2]]\u002F.$characterCardFull),\"  \"]\n        }&amp;\u002F@\n            SortBy[                \n                Select[                    \n                    $GOTCharactersInAnotherFilms,                    \n                    StringMatchQ[\n                        ToLowerCase@#[[1]],___~~\"star wars\"~~___\n                    ]&amp;\n                ],\n                -Last[#]&amp;\n            ],\n        Background-\u003EGrayLevel[0.95],\n        ItemSize-\u003E{{25,45},Automatic},\n        Dividers-\u003E{None,{None,{LightGray},None}},\n        Alignment-\u003E{{Center,Left},Center}\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6562-6464-4738-a665-646366316561\u002F-----.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"16\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EАктёры «Игры престолов» в «Пиратах карибского моря»\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Актёры \\\"Игры престолов\\\" в \\\"Пиратах карибского моря\\\"\",\n    \"ImageSize\"-\u003E1300\n]&amp;@\n    Grid[                \n        {            \n            Style[#[[1]],FontFamily-\u003E\"Open Sans Light\",16,Bold],\n            Row[Magnify[#,0.75]&amp;\u002F@(#[[2]]\u002F.$characterCardFull),\"  \"]\n        }&amp;\u002F@\n            SortBy[                \n                Select[                    \n                    $GOTCharactersInAnotherFilms,                    \n                    StringMatchQ[\n                        ToLowerCase@#[[1]],___~~\"pirates of the\"~~___\n                    ]&amp;\n                ],\n                -Last[#]&amp;\n            ],\n        Background-\u003EGrayLevel[0.95],\n        ItemSize-\u003E{{25,50},Automatic},\n        Dividers-\u003E{None,{None,{LightGray},None}},\n        Alignment-\u003E{{Center,Left},Center}\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3763-6563-4761-a261-633366623962\u002F------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"17\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EВ каких фильмах\u002Fсериалах много актёров «Игры престолов»\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Фильмы (сериалы) в которых играет больше всего актёров \\\"Игры престолов\\\"\",\n    \"ImageSize\"-\u003E2000\n]&amp;@\n    Grid[                \n        {            \n            Style[#[[1]],FontFamily-\u003E\"Open Sans Light\",16,Bold],\n            Row[Magnify[#,0.75]&amp;\u002F@(#[[2]]\u002F.$characterCardFull),\"  \"]\n        }&amp;\u002F@\n            SortBy[                \n                Select[$GOTCharactersInAnotherFilms,Length[#[[2]]]&gt;5&amp;],\n                -Length[#[[2]]]&amp;\n            ],\n        Background-\u003EGrayLevel[0.95],\n        ItemSize-\u003E{{20,100},Automatic},\n        Dividers-\u003E{None,{None,{LightGray},None}},\n        Alignment-\u003E{{Center,Left},Center}\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6566-3861-4634-a263-633463626137\u002F---------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FyZJA2b2CPQuR9g\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"18\"\u003E\u003C\u002Fa\u003E\u003Ch2\u003EКак тесно связаны между собой актёры «Игры престолов»\u003C\u002Fh2\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПостроим граф, показывающий в скольких картинах (фильмах, сериалах и пр.) актёры «Игры престолов» играли вместе. Чем толще и краснее линия, тем больше общих картин у данной пары актёров. (\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002FAGcM7GmFR7bAOA\"\u003EОригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Как тесно связаны между собой актёры \\\"Игры престолов\\\"\",\n    \"ImageSize\"-\u003E2500\n]&amp;@\n    (        \n        ConnectedGraphComponents[\n            GOTGraphPlot[#,1,\"ImageSize\"-\u003E2500,\"MaxThickness\"-\u003E20]\n        ][\n            [1]\n        ]&amp;@\n            Tally[\n                UndirectedEdge@@@\n                    Map[                        \n                        Sort,\n                        Flatten[                            \n                            Map[                                \n                                Subsets[#,{2}]&amp;,\n                                Select[                                    \n                                    Values[GOTRawData[\"costars.json\"]][                                        \n                                        [                                        \n                                        ;;,\n                                        \"actors\",\n                                        All,\n                                        \"characterName\"\n                                        ]\n                                    ],\n                                    Length[#]\u003E1&amp;\n                                ]\n                            ],\n                            1\n                        ]\n                    ]\n            ]\n    )\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6630-3234-4535-a261-643632613931\u002F-------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"19\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EРазговоры в «Игре престолов»\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nМногие любят «Игру престолов» за диалоги. Посмотрим, в какой серии их больше всего:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #,\n    \"Количество слов, сказанных в сериях \\\"Игры престолов\\\"\",\n    \"ImageSize\"-\u003E1000\n]&amp;@\n    BarChart[        \n        #,\n        BarSpacing-\u003E{0.05,1},\n        AspectRatio-\u003E1\u002F2,\n        ImageSize-\u003E1000,\n        ChartLabels-\u003E{Keys[#],Range[10]},\n        ColorFunction-\u003EFunction[{x},ColorData[\"Rainbow\"][x]],\n        GridLines-\u003E{None,Range[0,10000,500]},\n        FrameLabel-\u003E\n            Map[                \n                Style[#,FontFamily-\u003E\"Open Sans\",20,Bold]&amp;,\n                {\"Сезон и серия в нём\",\"Количество сказанных слов\"}\n            ],\n        Frame-\u003ETrue,\n        Background-\u003EGrayLevel[0.95],\n        PlotRangePadding-\u003E0,\n        PlotRange-\u003EAll\n    ]&amp;@\n    GroupBy[        \n        Map[            \n            {#[[1;;2]],Total[#[[3]][[;;,\"count\"]]]}&amp;,\n            Lookup[                \n                GOTRawData[\"wordcount.json\"][\"count\"],\n                {\"seasonNum\",\"episodeNum\",\"text\"}\n            ]\n        ],\n        #[[1,1]]&amp;,\n        #[[;;,2]]&amp;\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6532-3330-4862-a536-343335333163\u002F------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВыясним, кто больше всего «болтает» в «Игре престолов» — ответ довольно предсказуем, но удивляет отрыв Тириона почти в 2 раза от ближайшего к нему персонажа.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #1,\n    \"Кто больше всего говорит в \\\"Игре престолов\\\"?\",\n    \"ImageSize\"-\u003E1500\n]&amp;@\n    (        \n        (            \n            BarChart[                \n                #1[[1;;All,1]],\n                PlotRangePadding-\u003E0,\n                BarSpacing-\u003E0.25,\n                BarOrigin-\u003ELeft,\n                AspectRatio-\u003E1.9,\n                ImageSize-\u003E1500,\n                ChartLabels-\u003E#1[[1;;All,2]],\n                Frame-\u003ETrue,\n                GridLines-\u003E{Range[0,10^5,10^3],None},\n                ColorFunction-\u003EColorData[\"Rainbow\"],\n                FrameLabel-\u003E\n                    {                        \n                        {None,None},\n                        Style[#,FontFamily-\u003E\"Open Sans Light\",16]&amp;\u002F@\n                            {                                \n                                \"Количество сказанных слов\",\n                                \"Количество сказанных слов\"\n                            }\n                    },\n                FrameTicks-\u003E{Automatic,{All,All}},\n                Background-\u003EGrayLevel[0.95]\n            ]&amp;\n        )[\n            KeyValueMap[                \n                {#2,#1\u002F.$characterCardShortSmall}&amp;,\n                Select[                    \n                    SortBy[                        \n                        GroupBy[                            \n                            Flatten[\n                                GOTRawData[\"wordcount.json\"][\"count\"][\n                                    [;;,\"text\"]\n                                ]\n                            ],\n                            #[[\"name\"]]&amp;,\n                            Total[#[[;;,\"count\"]]]&amp;\n                        ],\n                        #&amp;\n                    ],\n                    #\u003E1000&amp;\n                ]\n            ]\n        ]\n    )\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6563-3936-4564-b635-303938333466\u002F------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНаконец, построим диаграмму, показывающую количество экранного времени и количество сказанным персонажем слов вместе:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[    \n    #1,\n    \"Соотношение количества экранного времени и сказанных слов у персонажей \\\"Игры престолов\\\"\\n(масштаб логарифмический)\",\n    \"ImageSize\"-\u003E2000\n]&amp;@\n    Module[{data1,data2,intersection},        \n        data1=\n            Merge[\n                $GOTEpisodeData[[;;,\"ScreenTime\"]],Total[Flatten[#]]&amp;\n            ];\n        data2=\n            GroupBy[                \n                Flatten[\n                    GOTRawData[\"wordcount.json\"][\"count\"][[;;,\"text\"]]\n                ],\n                #[[\"name\"]]&amp;,\n                Total[#[[;;,\"count\"]]]&amp;\n            ];\n        intersection=Intersection[Keys@data1,Keys@data2];\n        ListPlot[            \n            Callout[{data1[#],data2[#]},#\u002F.$characterCardShortSmall]&amp;\u002F@\n                intersection,\n            AspectRatio-\u003E1,\n            ImageSize-\u003E2000,\n            PlotRange-\u003EAll,\n            ScalingFunctions-\u003E{\"Log10\",\"Log10\"},\n            GridLines-\u003E\n                {                    \n                    {10,100}~Join~Range[0,10^5,1000],\n                    {10,100}~Join~Range[0,10^5,1000]\n                },\n            Frame-\u003ETrue,\n            FrameTicks-\u003EAll,\n            FrameLabel-\u003E\n                ReplaceAll[                    \n                    {                        \n                        {1,1}\"Количество сказанных слов\",\n                        {1,1}\"Время на экране, с\"\n                    },\n                    x_String:\u003EStyle[x,FontFamily-\u003E\"Open Sans\",20,Bold]\n                ],\n            Background-\u003EGrayLevel[0.95],\n            PlotMarkers-\u003E{Automatic,Small},\n            GridLinesStyle-\u003EGrayLevel[0.85]\n        ]\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild6662-6631-4866-b930-356533663439\u002F------------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n(\u003Ca href=\"https:\u002F\u002Fyadi.sk\u002Fi\u002F790Nq8sVUZ0o6w\"\u003Eоригинал\u003C\u002Fa\u003E)\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca name=\"20\"\u003E\u003C\u002Fa\u003E\u003Ch1\u003EПол персонажей «Игры престолов»: кого больше, мужчин или женщин?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПол по имени персонажа:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003E$gender=    &lt;|    \n    Flatten[\n        KeyValueMap[\n            Thread[#2-\u003E#1]&amp;,GOTRawData[\"characters-gender-all.json\"]\n        ]\n    ]\n    ~\n    Join\n    ~\n    {        \n        \"Aegon Targaryen\"-\u003E\"male\",\n        \"Aerys II Targaryen\"-\u003E\"male\",\n        \"Archmaester Marwyn\"-\u003E\"male\",\n        \"Baratheon Guard\"-\u003E\"male\",\n        \"Brandon Stark\"-\u003E\"male\",\n        \"Child of the Forest\"-\u003E\"male\",\n        \"Elia Martell\"-\u003E\"female\",\n        \"Eon Hunter\"-\u003E\"male\",\n        \"Goldcloak #1\"-\u003E\"male\",\n        \"Goldcloak #2\"-\u003E\"male\",\n        \"Knight of House Frey\"-\u003E\"male\",\n        \"Knight of House Lynderly\"-\u003E\"male\",\n        \"Kurleket\"-\u003E\"male\",\n        \"Lannister Guardsman\"-\u003E\"male\",\n        \"Lord Galbart Glover\"-\u003E\"male\",\n        \"Male Prostitute\"-\u003E\"male\",\n        \"Masha Heddle\"-\u003E\"female\",\n        \"Meereen Slave Master\"-\u003E\"male\",\n        \"Mikken\"-\u003E\"male\",\n        \"Night's Watch Deserter\"-\u003E\"male\",\n        \"Night's Watch Messenger\"-\u003E\"male\",\n        \"Night's Watch Officer\"-\u003E\"male\",\n        \"Pentoshi Servant\"-\u003E\"male\",\n        \"Rhaella Targaryen\"-\u003E\"female\",\n        \"Rhaenys Targaryen\"-\u003E\"female\",\n        \"Stark Bannerman\"-\u003E\"male\",\n        \"Stark Guard\"-\u003E\"male\",\n        \"Wedding Band\"-\u003E\"male\",\n        \"White Walker #2\"-\u003E\"male\",\n        \"Willis Wode\"-\u003E\"male\",\n        \"Young Ned\"-\u003E\"male\"\n    }|\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСоотношение персонажей «Игры престолов» по полу — видно, что на одну женщину приходится по 3 мужчины. Создается ощущение иногда, что мужские персонажи лишь антураж для мощных женских).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"plaintext\"\u003EGOTInfographicsPoster[\n    #,\"Соотношение мужских и женских персонажей в Игре престолов\"\n]&amp;@\n    Module[{labels,counts,percents},        \n        {labels,counts}=Transpose[Tally[Values[$gender]]];\n        percents=PercentForm\u002F@N[counts\u002FTotal[counts]];\n        PieChart[            \n            counts,\n            ChartLabels-\u003E\n                Map[                                        \n                    Style[                        \n                        Row[#,\"\\n\"],\n                        20,\n                        Bold,\n                        Black,\n                        FontFamily-\u003E\"Open Sans\"\n                    ]&amp;,\n                    Transpose[{labels,counts,percents}]\n                ],\n            ChartStyle-\u003E{LightRed,LightBlue},\n            ImageSize-\u003E600,\n            Background-\u003EGrayLevel[0.95]\n        ]\n    ]\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fstatic.tildacdn.com\u002Ftild3665-3061-4262-a536-363837616163\u002F-------.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cb\u003EНапоминаю, что \u003Ca href=\"http:\u002F\u002Fwolframmathematica.ru\u002Fblog\u002Fgot\"\u003Eздесь\u003C\u002Fa\u003E вы можете скачать оригинал поста со всеми вспомогательными функциями и исходными данными.\u003C\u002Fb\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EДля сотрудничества — пишите личное сообщение на Хабре или в \u003Ca href=\"https:\u002F\u002Fvk.com\u002Fwolfram24\"\u003Eмою группу ВКонтакте\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fwww.youtube.com\u002Fchannel\u002FUC7JeG87kenaPEjEJBA6tmKw\"\u003EКанал YouTube\u003C\u002Fa\u003E — вебинары и обучающие ролики.\u003Cbr\u002F\u003E\r\n\u003Ca href=\"http:\u002F\u002Fwolframmathematica.ru\u002F#course\"\u003E\u003Cb\u003EРегистрация\u003C\u002Fb\u003E на новые курсы\u003C\u002Fa\u003E. Готовый \u003Ca href=\"https:\u002F\u002Fblog.wolframmathematica.ru\u002F2076\u002F08-10-2019\u002F\"\u003E\u003Cb\u003Eонлайн курс\u003C\u002Fb\u003E\u003C\u002Fa\u003E.\u003C\u002Fblockquote\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"игра престолов"},{"titleHtml":"game of thrones"},{"titleHtml":"wolfram language"},{"titleHtml":"wolfram mathematica"},{"titleHtml":"визуализация данных"},{"titleHtml":"гистограмма"},{"titleHtml":"диаграмма"},{"titleHtml":"графы"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451640\u002F9fc981e12fdee9788a68599d3671f863\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451640\u002F9fc981e12fdee9788a68599d3671f863\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fwolfram\\\u002Fblog\\\u002F451640\\\u002F\"},\"headline\":\"«Игра престолов»: строим инфографику об убийствах, сексе, путешествиях по Вестеросу и многое другое\",\"datePublished\":\"2019-05-13T20:09:28+03:00\",\"dateModified\":\"2019-11-13T21:35:34+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Осипов Роман\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Оригинал поста + Вспомогательные функции и исходные данные  Оглавление Взаимоотношения персонажей &mdash; Кто кого родил &mdash; Кто кому брат или сестра &mdash; Кто кого убил...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fwolfram\\\u002Fblog\\\u002F451640\\\u002F#post-content-body\",\"about\":[\"c_wolfram\",\"h_zadachki\",\"h_programming\",\"h_infographics\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fka\\\u002F8m\\\u002F4l\\\u002Fka8m4l-mpbkpfspbe8q9keplkzs.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F1d2\\\u002F05f\\\u002F8c3\\\u002F1d205f8c38e2d9be18e9fced3da5be55.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F8d9\\\u002F8e5\\\u002F5c7\\\u002F8d98e55c7719b1448e907685895dd2b4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F1da\\\u002F3a2\\\u002F950\\\u002F1da3a2950b308bbfeff0caf27a2e48ea.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F0c2\\\u002F9aa\\\u002Ff2f\\\u002F0c29aaf2f2d9c263106592d4f722bc0f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fc06\\\u002F2a7\\\u002F893\\\u002Fc062a7893a94788233c4cb77c8222bef.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Feca\\\u002F813\\\u002Fd99\\\u002Feca813d99da5e342c43ec7a8e48cab5f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F28e\\\u002Fa6f\\\u002F097\\\u002F28ea6f097d8bdbc00a110e8eed9be1ab.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F28b\\\u002Fd3d\\\u002Faa7\\\u002F28bd3daa7bcf2b767331523aaae300b6.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F5e3\\\u002F479\\\u002F03b\\\u002F5e347903b7a68e584ae18b68601f780a.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ff3f\\\u002Ffeb\\\u002Fc89\\\u002Ff3ffebc896236cd2085901b024ec4f29.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Ff8c\\\u002F8d3\\\u002F8d0\\\u002Ff8c8d38d06335601eb16192d440be693.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fda7\\\u002Fd2a\\\u002F17d\\\u002Fda7d2a17dab3f36c041c19d89f612b99.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fd97\\\u002Fe35\\\u002Fcdd\\\u002Fd97e35cdda6cad0baec9c7ab7f97f628.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fa4b\\\u002Fa7e\\\u002F3b9\\\u002Fa4ba7e3b965705771dbae1e007f04a4f.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F2a9\\\u002F760\\\u002F57e\\\u002F2a976057e3e7a4e3be3a8401e5a889af.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F082\\\u002F883\\\u002Fa77\\\u002F082883a77bbdd1b45a2809056ef8cd27.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F765\\\u002F02a\\\u002F8d1\\\u002F76502a8d1f5cf895486c7669d698c63b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F798\\\u002Fa71\\\u002F7b0\\\u002F798a717b08d21cc15025907955a6c9a5.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F634\\\u002F3ab\\\u002F31a\\\u002F6343ab31a8d8659f93116ac503e64c14.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fabb\\\u002F5b5\\\u002Ff79\\\u002Fabb5b5f79db2e696c49763942ac35060.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F525\\\u002F3ff\\\u002F6b8\\\u002F5253ff6b8f946b0c8f5ee020bcbf5972.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F320\\\u002Fb5d\\\u002Fc83\\\u002F320b5dc83aba58b3bd1878210bb6095b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fb9c\\\u002F659\\\u002F84c\\\u002Fb9c65984c2fe42c23c04ef27f7761eb4.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F352\\\u002Fa92\\\u002F379\\\u002F352a92379609ec597bd794081aee9351.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F2bc\\\u002Ff1e\\\u002F8ee\\\u002F2bcf1e8ee1ba27027b91124780d9373f.jpg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F0fa\\\u002F606\\\u002Fead\\\u002F0fa606eadb6b14b9e5cbed21f4a9099a.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fc92\\\u002F2d0\\\u002F3ac\\\u002Fc922d03acb8de795ddb0bf1eee42eb3b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F06d\\\u002Fe2e\\\u002Ff97\\\u002F06de2ef97a573f8fdcd8425884de6852.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F846\\\u002F5ca\\\u002F59f\\\u002F8465ca59f891f1798de32416611c56f1.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F4e9\\\u002F57c\\\u002F973\\\u002F4e957c97384cf7896d02be985966e65b.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fe61\\\u002F555\\\u002Fa87\\\u002Fe61555a87a46cc708f4d9e6fa651e2c2.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F07e\\\u002F33d\\\u002F550\\\u002F07e33d550effc9715baccb24d6f2e987.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F1e2\\\u002Ff37\\\u002Fb4e\\\u002F1e2f37b4e5e30eefb69ebaf1eeefdd99.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002F5f5\\\u002Ff4c\\\u002F27d\\\u002F5f5f4c27db89d75f25b853830ef0ec0c.png\"]}","metaDescription":"Оригинал поста + Вспомогательные функции и исходные данные\r\n\r\nОглавление\r\nВзаимоотношения персонажей\r\n— Кто кого родил\r\n— Кто кому брат или сестра\r\n— Кто кого убил\r\n— Кто кому служит\r\n— Кто с...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"wolfram":{"alias":"wolfram","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002F52d\u002Faff\u002F3ce\u002F52daff3ce7aa11f0abdf47d8295ce8ff.png","titleHtml":"Wolfram Research","descriptionHtml":"Wolfram Language, Mathematica, Wolfram Alpha и др.","relatedData":null,"statistics":{"postsCount":116,"newsCount":0,"vacanciesCount":0,"employeesCount":9,"careerRating":null,"subscribersCount":786,"rating":0,"invest":null},"foundationDate":{"year":"1987","month":null,"day":null},"location":{"city":{"id":"466069","title":"Champaign"},"region":{"id":"582","title":"Illinois"},"country":{"id":"198","title":"США"}},"siteUrl":"http:\u002F\u002Fwww.wolfram.com\u002F","staffNumber":"1 001–5 000 человек","registrationDate":"2009-05-09T16:40:52+00:00","representativeUser":null,"contacts":[{"title":"Сайт","url":"http:\u002F\u002Fwww.wolfram.com\u002F"},{"title":"Сайт","url":"http:\u002F\u002Fwww.youtube.com\u002Fuser\u002FWolframMathematicaRu"},{"title":"Facebook","url":"https:\u002F\u002Ffacebook.com\u002Fwolframresearch"},{"title":"Twitter","url":"https:\u002F\u002Ftwitter.com\u002Fwolframresearch"},{"title":"ВКонтакте","url":"https:\u002F\u002Fvk.com\u002Fwolframmathematica"}],"settings":{"analyticsSettings":[],"branding":null,"status":"expired"},"metadata":{"titleHtml":"Wolfram Research, Champaign - Wolfram Language, Mathematica, Wolfram Alpha и др. с 1987 год","title":"Wolfram Research, Champaign - Wolfram Language, Mathematica, Wolfram Alpha и др. с 1987 год","keywords":[],"descriptionHtml":"116 статей от авторов компании Wolfram Research","description":"116 статей от авторов компании Wolfram Research"},"aDeskSettings":null,"careerAlias":null,"maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
