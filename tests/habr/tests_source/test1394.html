<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/453216\/"},"headline":"Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации","datePublished":"2019-05-23T23:08:29+03:00","dateModified":"2019-05-24T10:15:18+03:00","author":{"@type":"Person","name":"zhorick"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Здравствуйте, коллеги!  В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как...","url":"https:\/\/habr.com\/ru\/post\/453216\/#post-content-body","about":["h_it-infrastructure","h_network_technologies","h_asterisk","f_develop","f_admin"],"image":["https:\/\/habrastorage.org\/webt\/4n\/wf\/qk\/4nwfqkfmph5hukfxzqudzexg_om.jpeg","https:\/\/habrastorage.org\/webt\/we\/2n\/xr\/we2nxrabgglsyc7gycxcnn_oxr0.jpeg"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Здравствуйте, коллеги!

В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Здравствуйте, коллеги!

В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Здравствуйте, коллеги!

В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Здравствуйте, коллеги!

В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Здравствуйте, коллеги!

В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/453216/f709d9521d74783f3ea055df27438e84/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/453216/f709d9521d74783f3ea055df27438e84/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/453216/f709d9521d74783f3ea055df27438e84/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/453216/f709d9521d74783f3ea055df27438e84/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/453216/f709d9521d74783f3ea055df27438e84/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="453216" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-23T20:08:29.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/453216/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/453216/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/453216/f709d9521d74783f3ea055df27438e84/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/453216/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/zhorick/" title="zhorick" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/zhorick/" class="tm-user-info__username">
      zhorick
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-23T20:08:29.000Z" title="2019-05-23, 23:08">23  мая  2019 в 23:08</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/it-infrastructure/" class="tm-article-snippet__hubs-item-link"><span>IT-инфраструктура</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/network_technologies/" class="tm-article-snippet__hubs-item-link"><span>Сетевые технологии</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/asterisk/" class="tm-article-snippet__hubs-item-link"><span>Asterisk</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">Здравствуйте, коллеги!<br/>
<br/>
В <a href="https://habr.com/ru/post/434002/">предыдущем</a> материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для краткости, СМТ. Узнали, что это такое, какие задачи решает, а также отметили наиболее ярких представителей, представленных разработчиками миру ИТ. В данной части рассмотрим принципы, согласно которым осуществляется внедрение СМТ в ИТ-инфраструктуру и мониторинг трафика VoIP её средствами.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/webt/4n/wf/qk/4nwfqkfmph5hukfxzqudzexg_om.jpeg" data-src="https://habrastorage.org/webt/4n/wf/qk/4nwfqkfmph5hukfxzqudzexg_om.jpeg" data-blurred="true"/><a name="habracut"></a><br/>
<br/>
<h3>Архитектура систем мониторинга VoIP-трафика</h3><br/>
<i>Мы строили, строили и наконец построили. Ура!<br/>
Из мультфильма «Чебурашка и крокодил Гена».<br/>
</i><br/>
Как отмечено ранее, в отрасли связи и телекоммуникаций представлено достаточно продуктов, которые относятся к соответствующей категории. Однако, если абстрагироваться от названия, разработчика, платформы и проч., то можно заметить, что все они более или менее одинаковы с точки зрения своей архитектуры (по крайней мере те, с которыми автору приходилось сталкиваться). Стоит отметить, что это связано именно с простым отсутствием каких-либо иных способов съёма трафика с элементов сети для его последующего детального анализа. При этом последнее, по субъективному мнению, в большей степени определено текущим развитием различных областей предметной отрасли. Для более чёткого понимания рассмотрим следующую аналогию.<br/>
<br/>
С того момента, как великий русский учёный Владимир Александрович Котельников создал теорему отсчётов, человечество получило грандиозную возможность выполнять аналого-цифровое и цифро-аналоговое преобразования речевых сигналов, благодаря которому, мы можем в полной мере использовать такой замечательный вид связи как IP-телефония. Если взглянуть на развитие механизмов обработки речевых сигналов (aka алгоритмы, кодеки, способы кодирования etc.), то можно заметить, как ЦОС (цифровая обработка сигналов) сделала принципиальный шаг в кодировании информационных сообщений – реализация возможности предсказания речевого сигнала. То есть, вместо просто оцифровки и использования a- и u-законов сжатия (G.711A/G.711U), теперь имеется возможность передачи лишь части отсчётов с последующим восстановлением из них всего сообщения, что существенно экономит полосу. Возвращаясь к теме СМТ, отметим, что на текущий момент аналогичных качественных изменений в подходе к захвату трафика, кроме того или иного вида зеркалирования, нет.<br/>
<br/>
Обратимся к рисунку, приведённому далее и иллюстрирующему то, что же было построено специалистами соответствующих предметных областей.<br/>
<br/>
<img src="https://habrastorage.org/r/w780q1/webt/we/2n/xr/we2nxrabgglsyc7gycxcnn_oxr0.jpeg" data-src="https://habrastorage.org/webt/we/2n/xr/we2nxrabgglsyc7gycxcnn_oxr0.jpeg" data-blurred="true"/><br/>
<i>Рисунок 1. Общая схема архитектуры СМТ.</i><br/>
<br/>
Практически любая СМТ состоит из двух основных компонентов: сервера и агентов захвата трафика (или пробников). Сервер выполняет приём, обработку и хранение VoIP-трафика, который поступает от агентов, а также предоставляет специалистам возможность работы с получаемой информацией в различных представлениях (графики, диаграммы, Call Flow, etc). Агенты захвата осуществляют приём VoIP-трафика от оборудования ядра сети (например, SBC, softswitch, шлюзы,..), преобразование его в формат, используемый в применяемом программном обеспечении сервера системы, и передачу его последнему для последующих манипуляций.<br/>
<br/>
Как в музыке композиторы создают вариации на основные мелодии произведений, так и в данном случае возможны различные варианты реализации приведённой схемы. Их многообразие достаточно велико и в основном определяется характеристиками инфраструктуры, в которой разворачивается СМТ. Наиболее часто встречающимся вариантом является тот, при котором не устанавливаются и не настраиваются агенты захвата. В данном случае анализируемый трафик направляется напрямую к серверу или, например, сервер получает необходимую информацию из pcap-файлов, сформированных объектами мониторинга. Такой способ доставки, как правило, выбирается в случае, если отсутствует возможность установки пробников. Место на площадке размещения оборудования, нехватка ресурсов средств виртуализации, изъяны в организации транспортной IP-сети и, как следствие, проблемы с сетевой связностью и т.д., всё это может являться причиной выбора отмеченного варианта организации мониторинга.<br/>
<br/>
Узнав и разобравшись, как та или иная СМТ может быть внедрена в IT-инфраструктуру с архитектурной точки зрения, далее рассмотрим аспекты, более входящие в компетенцию системных администраторов, а именно, способы развёртывания программного обеспечения систем на серверах.<br/>
<br/>
В ходе подготовке решения по реализации рассматриваемого компонента сети мониторинга у исполнителей всегда возникает много вопросов. Например, каков должен быть состав аппаратного обеспечения сервера, достаточна ли установка всех компонентов системы на одном хосте или стоит отделить их друг от друга, каким образом выполнять установку программного обеспечения, etc. Перечисленные выше, а также многие другие смежные вопросы, очень обширны, а ответы на многие из них действительно зависят от конкретных условий эксплуатации (или проектировки). Однако постараемся обобщить конкретику, чтобы получить общее представление и понимание данной стороны деплоя СМТ.<br/>
<br/>
Итак, первое, что всегда интересует специалистов при реализации СМТ – с какими ТТХ использовать сервер? Учитывая широкое распространение свободного программного обеспечения, данный вопрос задаётся столько раз, что по популярности его, наверное, можно сравнить с вопросом «Что делать?», заданным ещё Николаем Гавриловичем Чернышевским… Основным фактором, влияющим на ответ, является количество медиасессий, которое обрабатывается или будет обрабатываться платформой телефонии. Численная и осязаемая характеристика, дающая конкретную оценку отмеченного фактора, — это параметр CAPS (Call Attempts Per Second) или количество вызовов в секунду. Необходимость ответа на данный вопрос в первую очередь обусловлен тем, что именно информация о сессиях, направленная в систему, и будет создавать нагрузку на её сервер.<br/>
<br/>
Вторым вопросом, возникающим в ходе принятия решения о характеристиках аппаратных компонентах сервера, является состав программного обеспечения (операционные среды, базы данных и т.д.), которое будет на нём функционировать. Сигнальный (или и медиа) трафик поступает на сервер, где производится его обработка (разбор сигнальных сообщений) каким-либо приложением (например, Kamailio), а далее сформированная определённым образом информация помещается в базу данных. Для различных СМТ, как приложения, производящие дефрагментацию сигнальных единиц, так и приложения, обеспечивающие хранение, могут быть различными. Однако все они объединены одной природой многопоточности. При этом, из-за особенностей такого элемента инфраструктуры, как СМТ, в данном пункте следует отметить, что количество операций записи на диск значительно превышает количество операций чтения с него.<br/>
<br/>
И наконец… «Как много в этом слове»: сервер, виртуализация, контейнеризация… Последний, но очень важный аспект, затронутый в данной части статьи, – это возможные способы установки компонентов СМТ при её развёртывании. Перечисленные рядом с цитатой из бессмертного произведения А.С. Пушкина технологии, широко распространены в различных инфраструктурах и проектах. С одной стороны, они тесно взаимосвязаны друг с другом, а с другой – разительно отличаются по многим критериям. Тем не менее, все они, в том или ином виде, представлены разработчиками в качестве доступных вариантов для установки своих продуктов. Обобщая для перечисленных в первой части статьи систем, отметим следующие способы их развёртывания на физический сервер или виртуальную машину:<br/>
<br/>
<ul>
<li>использование сценариев автоматической установки или самостоятельная установка и последующая настройка соответствующего программного обеспечения,</li>
<li>использование готового образа ОС с предустановленным ПО СМТ и/или агента,</li>
<li>использование технологии контейнеризации (Docker).</li>
</ul><br/>
Перечисленные средства установки имеют свои достоинства и недостатки, а у специалистов имеются свои предпочтения, ограничения и конкретные условия, в которых находится эксплуатируемая или внедряемая ими инфраструктура, для того, чтобы озвучивать какие-либо рекомендации. С другой стороны, приведённое описание путей развёртывания систем мониторинга SIP-трафика достаточно прозрачно, и на текущем этапе не требует его более детального рассмотрения.<br/>
<br/>
Такой получилась ещё одна статья, посвящённая важному и интересному элементу VoIP-сети – системе мониторинга SIP-трафика. Как всегда, благодарю читателей за проявленное внимание к данному материалу! В следующей части постараемся ещё больше углубиться в конкретику и рассмотреть продукты HOMER SIP Capture и SIP3.</div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%9C%D0%BE%D0%BD%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D0%BD%D0%B3%20SIP-%D1%82%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0%5D" class="tm-tags-list__link">Мониторинг SIP-трафика</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BVoIP%5D" class="tm-tags-list__link">VoIP</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bcapture%5D" class="tm-tags-list__link">capture</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/it-infrastructure/" class="tm-hubs-list__link">
    IT-инфраструктура
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/network_technologies/" class="tm-hubs-list__link">
    Сетевые технологии
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/asterisk/" class="tm-hubs-list__link">
    Asterisk
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 7: ↑6 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 7: ↑6 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+5</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">4.1K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    45
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/zhorick/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_lilac"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 5 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/zhorick/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @zhorick
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Телефонные сети, конвергентные сети, NGN и IMS</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/453216/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 2 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/453216/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/453216/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"453216":{"id":"453216","timePublished":"2019-05-23T20:08:29+00:00","isCorporative":false,"lang":"ru","titleHtml":"Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации","leadData":{"textHtml":"Здравствуйте, коллеги!\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F434002\u002F\"\u003Eпредыдущем\u003C\u002Fa\u003E материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для краткости, СМТ. Узнали, что это такое, какие задачи решает, а также отметили наиболее ярких представителей, представленных разработчиками миру ИТ. В данной части рассмотрим принципы, согласно которым осуществляется внедрение СМТ в ИТ-инфраструктуру и мониторинг трафика VoIP её средствами.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4n\u002Fwf\u002Fqk\u002F4nwfqkfmph5hukfxzqudzexg_om.jpeg\"\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":5,"votesCount":5},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1597585","alias":"zhorick","fullname":null,"avatarUrl":null,"speciality":"Телефонные сети, конвергентные сети, NGN и IMS"},"statistics":{"commentsCount":2,"favoritesCount":45,"readingCount":4090,"score":5,"votesCount":7},"hubs":[{"relatedData":null,"id":"6398","alias":"it-infrastructure","type":"collective","title":"IT-инфраструктура","titleHtml":"IT-инфраструктура","isProfiled":true},{"relatedData":null,"id":"17123","alias":"network_technologies","type":"collective","title":"Сетевые технологии","titleHtml":"Сетевые технологии","isProfiled":true},{"relatedData":null,"id":"17707","alias":"asterisk","type":"collective","title":"Asterisk","titleHtml":"Asterisk","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EЗдравствуйте, коллеги!\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F434002\u002F\"\u003Eпредыдущем\u003C\u002Fa\u003E материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для краткости, СМТ. Узнали, что это такое, какие задачи решает, а также отметили наиболее ярких представителей, представленных разработчиками миру ИТ. В данной части рассмотрим принципы, согласно которым осуществляется внедрение СМТ в ИТ-инфраструктуру и мониторинг трафика VoIP её средствами.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002F4n\u002Fwf\u002Fqk\u002F4nwfqkfmph5hukfxzqudzexg_om.jpeg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F4n\u002Fwf\u002Fqk\u002F4nwfqkfmph5hukfxzqudzexg_om.jpeg\" data-blurred=\"true\"\u002F\u003E\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EАрхитектура систем мониторинга VoIP-трафика\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003EМы строили, строили и наконец построили. Ура!\u003Cbr\u002F\u003E\r\nИз мультфильма «Чебурашка и крокодил Гена».\u003Cbr\u002F\u003E\r\n\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\nКак отмечено ранее, в отрасли связи и телекоммуникаций представлено достаточно продуктов, которые относятся к соответствующей категории. Однако, если абстрагироваться от названия, разработчика, платформы и проч., то можно заметить, что все они более или менее одинаковы с точки зрения своей архитектуры (по крайней мере те, с которыми автору приходилось сталкиваться). Стоит отметить, что это связано именно с простым отсутствием каких-либо иных способов съёма трафика с элементов сети для его последующего детального анализа. При этом последнее, по субъективному мнению, в большей степени определено текущим развитием различных областей предметной отрасли. Для более чёткого понимания рассмотрим следующую аналогию.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nС того момента, как великий русский учёный Владимир Александрович Котельников создал теорему отсчётов, человечество получило грандиозную возможность выполнять аналого-цифровое и цифро-аналоговое преобразования речевых сигналов, благодаря которому, мы можем в полной мере использовать такой замечательный вид связи как IP-телефония. Если взглянуть на развитие механизмов обработки речевых сигналов (aka алгоритмы, кодеки, способы кодирования etc.), то можно заметить, как ЦОС (цифровая обработка сигналов) сделала принципиальный шаг в кодировании информационных сообщений – реализация возможности предсказания речевого сигнала. То есть, вместо просто оцифровки и использования a- и u-законов сжатия (G.711A\u002FG.711U), теперь имеется возможность передачи лишь части отсчётов с последующим восстановлением из них всего сообщения, что существенно экономит полосу. Возвращаясь к теме СМТ, отметим, что на текущий момент аналогичных качественных изменений в подходе к захвату трафика, кроме того или иного вида зеркалирования, нет.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбратимся к рисунку, приведённому далее и иллюстрирующему то, что же было построено специалистами соответствующих предметных областей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fr\u002Fw780q1\u002Fwebt\u002Fwe\u002F2n\u002Fxr\u002Fwe2nxrabgglsyc7gycxcnn_oxr0.jpeg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fwe\u002F2n\u002Fxr\u002Fwe2nxrabgglsyc7gycxcnn_oxr0.jpeg\" data-blurred=\"true\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003EРисунок 1. Общая схема архитектуры СМТ.\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПрактически любая СМТ состоит из двух основных компонентов: сервера и агентов захвата трафика (или пробников). Сервер выполняет приём, обработку и хранение VoIP-трафика, который поступает от агентов, а также предоставляет специалистам возможность работы с получаемой информацией в различных представлениях (графики, диаграммы, Call Flow, etc). Агенты захвата осуществляют приём VoIP-трафика от оборудования ядра сети (например, SBC, softswitch, шлюзы,..), преобразование его в формат, используемый в применяемом программном обеспечении сервера системы, и передачу его последнему для последующих манипуляций.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКак в музыке композиторы создают вариации на основные мелодии произведений, так и в данном случае возможны различные варианты реализации приведённой схемы. Их многообразие достаточно велико и в основном определяется характеристиками инфраструктуры, в которой разворачивается СМТ. Наиболее часто встречающимся вариантом является тот, при котором не устанавливаются и не настраиваются агенты захвата. В данном случае анализируемый трафик направляется напрямую к серверу или, например, сервер получает необходимую информацию из pcap-файлов, сформированных объектами мониторинга. Такой способ доставки, как правило, выбирается в случае, если отсутствует возможность установки пробников. Место на площадке размещения оборудования, нехватка ресурсов средств виртуализации, изъяны в организации транспортной IP-сети и, как следствие, проблемы с сетевой связностью и т.д., всё это может являться причиной выбора отмеченного варианта организации мониторинга.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nУзнав и разобравшись, как та или иная СМТ может быть внедрена в IT-инфраструктуру с архитектурной точки зрения, далее рассмотрим аспекты, более входящие в компетенцию системных администраторов, а именно, способы развёртывания программного обеспечения систем на серверах.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ ходе подготовке решения по реализации рассматриваемого компонента сети мониторинга у исполнителей всегда возникает много вопросов. Например, каков должен быть состав аппаратного обеспечения сервера, достаточна ли установка всех компонентов системы на одном хосте или стоит отделить их друг от друга, каким образом выполнять установку программного обеспечения, etc. Перечисленные выше, а также многие другие смежные вопросы, очень обширны, а ответы на многие из них действительно зависят от конкретных условий эксплуатации (или проектировки). Однако постараемся обобщить конкретику, чтобы получить общее представление и понимание данной стороны деплоя СМТ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИтак, первое, что всегда интересует специалистов при реализации СМТ – с какими ТТХ использовать сервер? Учитывая широкое распространение свободного программного обеспечения, данный вопрос задаётся столько раз, что по популярности его, наверное, можно сравнить с вопросом «Что делать?», заданным ещё Николаем Гавриловичем Чернышевским… Основным фактором, влияющим на ответ, является количество медиасессий, которое обрабатывается или будет обрабатываться платформой телефонии. Численная и осязаемая характеристика, дающая конкретную оценку отмеченного фактора, — это параметр CAPS (Call Attempts Per Second) или количество вызовов в секунду. Необходимость ответа на данный вопрос в первую очередь обусловлен тем, что именно информация о сессиях, направленная в систему, и будет создавать нагрузку на её сервер.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВторым вопросом, возникающим в ходе принятия решения о характеристиках аппаратных компонентах сервера, является состав программного обеспечения (операционные среды, базы данных и т.д.), которое будет на нём функционировать. Сигнальный (или и медиа) трафик поступает на сервер, где производится его обработка (разбор сигнальных сообщений) каким-либо приложением (например, Kamailio), а далее сформированная определённым образом информация помещается в базу данных. Для различных СМТ, как приложения, производящие дефрагментацию сигнальных единиц, так и приложения, обеспечивающие хранение, могут быть различными. Однако все они объединены одной природой многопоточности. При этом, из-за особенностей такого элемента инфраструктуры, как СМТ, в данном пункте следует отметить, что количество операций записи на диск значительно превышает количество операций чтения с него.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИ наконец… «Как много в этом слове»: сервер, виртуализация, контейнеризация… Последний, но очень важный аспект, затронутый в данной части статьи, – это возможные способы установки компонентов СМТ при её развёртывании. Перечисленные рядом с цитатой из бессмертного произведения А.С. Пушкина технологии, широко распространены в различных инфраструктурах и проектах. С одной стороны, они тесно взаимосвязаны друг с другом, а с другой – разительно отличаются по многим критериям. Тем не менее, все они, в том или ином виде, представлены разработчиками в качестве доступных вариантов для установки своих продуктов. Обобщая для перечисленных в первой части статьи систем, отметим следующие способы их развёртывания на физический сервер или виртуальную машину:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003Eиспользование сценариев автоматической установки или самостоятельная установка и последующая настройка соответствующего программного обеспечения,\u003C\u002Fli\u003E\r\n\u003Cli\u003Eиспользование готового образа ОС с предустановленным ПО СМТ и\u002Fили агента,\u003C\u002Fli\u003E\r\n\u003Cli\u003Eиспользование технологии контейнеризации (Docker).\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nПеречисленные средства установки имеют свои достоинства и недостатки, а у специалистов имеются свои предпочтения, ограничения и конкретные условия, в которых находится эксплуатируемая или внедряемая ими инфраструктура, для того, чтобы озвучивать какие-либо рекомендации. С другой стороны, приведённое описание путей развёртывания систем мониторинга SIP-трафика достаточно прозрачно, и на текущем этапе не требует его более детального рассмотрения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТакой получилась ещё одна статья, посвящённая важному и интересному элементу VoIP-сети – системе мониторинга SIP-трафика. Как всегда, благодарю читателей за проявленное внимание к данному материалу! В следующей части постараемся ещё больше углубиться в конкретику и рассмотреть продукты HOMER SIP Capture и SIP3.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"Мониторинг SIP-трафика"},{"titleHtml":"VoIP"},{"titleHtml":"capture"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F453216\u002Ff709d9521d74783f3ea055df27438e84\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F453216\u002Ff709d9521d74783f3ea055df27438e84\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F453216\\\u002F\"},\"headline\":\"Системы мониторинга трафика в сетях VoIP. Часть вторая — принципы организации\",\"datePublished\":\"2019-05-23T23:08:29+03:00\",\"dateModified\":\"2019-05-24T10:15:18+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"zhorick\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Здравствуйте, коллеги!  В предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F453216\\\u002F#post-content-body\",\"about\":[\"h_it-infrastructure\",\"h_network_technologies\",\"h_asterisk\",\"f_develop\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F4n\\\u002Fwf\\\u002Fqk\\\u002F4nwfqkfmph5hukfxzqudzexg_om.jpeg\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fwe\\\u002F2n\\\u002Fxr\\\u002Fwe2nxrabgglsyc7gycxcnn_oxr0.jpeg\"]}","metaDescription":"Здравствуйте, коллеги!\r\n\r\nВ предыдущем материале мы познакомились с таким полезным и, как можно заметить, достаточно необходимым элементом VoIP-инфраструктуры, как система мониторинга трафика или, для...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"it-infrastructure,network_technologies,asterisk"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
