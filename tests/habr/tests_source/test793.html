<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Фаззинг в стиле 2000 года на современных приложениях Windows 10 / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/451816\/"},"headline":"Фаззинг в стиле 2000 года на современных приложениях Windows 10","datePublished":"2019-05-14T18:04:34+03:00","dateModified":"2019-05-14T19:07:33+03:00","author":{"@type":"Person","name":"Анатолий Ализар"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не завис...","url":"https:\/\/habr.com\/ru\/post\/451816\/#post-content-body","about":["h_infosecurity","h_it_testing","h_debug","h_win_dev","h_soft","f_develop","f_popsci"],"image":["https:\/\/habrastorage.org\/getpro\/habr\/post_images\/cb6\/3b4\/ca2\/cb63b4ca2a435ac151253934fcb775b6.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/a4f\/7e8\/8fb\/a4f7e88fbbd79bdb92b2de8f1c48697a.png","https:\/\/habrastorage.org\/getpro\/habr\/post_images\/e6b\/74b\/cae\/e6b74bcae36402b21b948256fe726315.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Фаззинг в стиле 2000 года на современных приложениях Windows 10" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Фаззинг в стиле 2000 года на современных приложениях Windows 10" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Фаззинг в стиле 2000 года на современных приложениях Windows 10" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/451816/a5b7437de68d96b05983e41202fd5f2a/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/451816/a5b7437de68d96b05983e41202fd5f2a/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/451816/a5b7437de68d96b05983e41202fd5f2a/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/451816/a5b7437de68d96b05983e41202fd5f2a/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/451816/a5b7437de68d96b05983e41202fd5f2a/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="451816" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-14T15:04:34.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/451816/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/451816/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/451816/a5b7437de68d96b05983e41202fd5f2a/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/m1rko/" title="m1rko" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/4ec/bd0/85d/4ecbd085d692835a931d03174ff19539.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/m1rko/" class="tm-user-info__username">
      m1rko
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-14T15:04:34.000Z" title="2019-05-14, 18:04">14  мая  2019 в 18:04</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Фаззинг в стиле 2000 года на современных приложениях Windows 10</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/infosecurity/" class="tm-article-snippet__hubs-item-link"><span>Информационная безопасность</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/it_testing/" class="tm-article-snippet__hubs-item-link"><span>Тестирование IT-систем</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/debug/" class="tm-article-snippet__hubs-item-link"><span>Отладка</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/win_dev/" class="tm-article-snippet__hubs-item-link"><span>Разработка под Windows</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/soft/" class="tm-article-snippet__hubs-item-link"><span>Софт</span> <!----></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Перевод
      </span></div></div> <!----> <!----></div></div> <div class="tm-article-presenter__origin"><a href="https://blog.trailofbits.com/2019/03/28/fuzzing-in-the-year-2000/" target="_blank" class="tm-article-presenter__origin-link">
                Автор оригинала:
                <span>
                  Artem Dinaburg
                </span></a></div> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><img src="/img/image-loader.svg" data-src="https://habrastorage.org/getpro/habr/post_images/cb6/3b4/ca2/cb63b4ca2a435ac151253934fcb775b6.png"/><br/>
<i><font color="gray">Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно <a href="https://github.com/Microsoft/calculator">опубликован на Github</a>, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с фаззером оконных сообщений разработки 2000 года. Размер окна специально увеличен, чтобы показать артефакты фаззинга</font></i><br/>
<br/>
Настало время для второй части наших усилий по проверке древних методов фаззинга на современных системах. Если вы пропустили, вот <a href="https://habr.com/ru/post/435484/">первая часть</a>. На этот раз мы опробуем на Windows 10 методы фаззинга из статьи «Эмпирическое исследование надёжности приложений Windows NT с использованием случайного тестирования» (она же «отчёт по фаззингу NT») Джастина Форрестера и Бартона Миллера, опубликованной в 2000 году.<br/>
<br/>
Исследователи протестировали 33 приложения Windows NT и ранней версии Windows 2000 на восприимчивость к искажённым оконным сообщениям и случайным событиям мыши и клавиатуры. Поскольку д-р Миллер опубликовал код фаззера, мы использовали <b>в точности те же инструменты</b>, что и первоначальные авторы, для поиска ошибок в современных приложениях Windows.<br/>
<a name="habracut"></a><br/>
Результаты почти идентичны: 19 лет назад 100% протестированных приложений вылетели или зависли, встретив искажённые оконные сообщения. Сегодня тот же фаззер уронил или повесил 93% протестированных приложений. Устояли только два, в том числе наш старый знакомый <a href="https://github.com/Microsoft/calculator">Калькулятор</a> (рис. 1). Мы также нашли ошибку (но не проблему безопасности) в Windows.<br/>
<br/>
<h1>Краткое введение в Windows</h1><br/>
Итак, что такое оконные сообщения и почему они вызывают сбой программы?<br/>
<br/>
Приложения Windows с графическим интерфейсом управляются событиями: движения мыши, нажатия кнопок, нажатия клавиш и т. д. Приложение, управляемое событиями, ничего не сделает, пока не получит событие. Как только событие получено, приложение выполняет действие на основе события, а затем ожидает других событий. Звучит знакомо? Эта архитектура <a href="https://medium.freecodecamp.org/understanding-node-js-event-driven-architecture-223292fcbc2d">получила вторую жизнь в таких платформах, как node.js</a>.<br/>
<br/>
<a href="https://docs.microsoft.com/en-us/windows/desktop/learnwin32/window-messages">Оконные сообщения — это метод уведомления о событиях в Windows</a>. У каждого из них есть <a href="https://wiki.winehq.org/List_Of_Windows_Messages">числовой код, связанный с конкретным событием</a>. У каждого сообщения один или несколько параметров, которые <a href="https://blogs.msdn.microsoft.com/oldnewthing/20031125-00/?p=41713">по соглашению называется lParam и wParam</a>. Они определяют более подробную информацию о событии. Примеры такой информации — координаты перемещения мыши, какая клавиша нажата или какой текст вывести в окне. Эти сообщения может отправить сама программа, операционная система или другие программы. Они могут прибыть в любое время и в любом порядке и должны быть обработаны приложением с получающей стороны.<br/>
<br/>
<h3>Последствия для безопасности</h3><br/>
До Windows Vista процесс с низким уровнем привилегий мог отправить сообщение процессу с высокими привилегиями. Используя правильную комбинацию сообщений, можно выполнить код в том процессе. В системе Vista от подобных <a href="https://en.wikipedia.org/wiki/Shatter_attack">«подрывных атак»</a> удалось в значительной степени защититься с помощью <a href="https://en.wikipedia.org/wiki/User_Interface_Privilege_Isolation">UIPI</a> и путём изоляции системных служб в отдельном сеансе.<br/>
<br/>
Неправильная обработка оконных сообщений вряд ли окажет влияние на безопасность современных систем Windows по двум причинам. Во-первых, оконные сообщения нельзя отправить по сети. Во-вторых, сбой приложения или выполнение кода на том же уровне привилегий, не очень полезно злоумышленнику. Вероятно, авторам доклада по фаззингу NT это было очевидно. Они не делают заявлений о безопасности, но правильно указывают, что сбои при обработке оконных сообщений подразумевают отсутствие строгого тестирования.<br/>
<br/>
Есть некоторые области, где выполнение кода с одинаковыми привилегиями способно нарушить безопасность. Некоторые приложения объединяют различные примитивы безопасности для создания искусственного уровня привилегий, изначально отсутствующего в операционной системе. Типичный пример — песочница для рендеринга в браузере. Производители браузеров хорошо осведомлены об этих проблемах и <a href="https://chromium.googlesource.com/chromium/src/+show/lkgr/docs/design/sandbox.md">приняли меры для их устранения</a>. Другой пример — антивирусные продукты. Там панель управления работает с нормальными привилегиями, но изолирована от других модулей антивируса.<br/>
<br/>
<h1>Методика тестирования</h1><br/>
Для фаззинга всех приложений в тестовом наборе мы использовали тот же основной код и методику фаззинга, описанные в первоначальном отчёте по NT. В частности, в обоих режимах <a href="https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-sendmessage">SendMessage</a> и <a href="https://docs.microsoft.com/en-us/windows/desktop/api/winuser/nf-winuser-postmessagea">PostMessage</a> фаззер использовал три итерации по 500 000 сообщений с сидом 42 и три итерации по 500 000 сообщений с сидом 1,337. Результаты появились после выполнения только одной итерации каждого метода.<br/>
<br/>
Случайный ввод с мыши и клавиатуры мы пропустили из-за ограничений по времени и желания сосредоточиться исключительно на оконных сообщениях. Мы также призываем желающих повторить тестирование и подтвердить результаты.<br/>
<br/>
<h1>Подводные камни</h1><br/>
Для работы фаззера в Windows 10 пришлось внести два незначительных изменения. Во-первых, адаптировать его для 64-битной платформы. Второе изменение позволило фаззеру выбирать определённый дескриптор окна с помощью аргумента командной строки. Фаззинг конкретного дескриптора — быстрое решение проблемы с фаззингом приложений <a href="https://en.wikipedia.org/wiki/Universal_Windows_Platform">Universal Windows Platform (UWP)</a>. Оригинальная программа ориентирована на фаззинг окон, принадлежащих определённому процессу, но все приложения UWP отображают свой пользовательский интерфейс через тот же процесс (рис. 2). Это означает, что фаззер нельзя направить на главное окно приложений UWP.<br/>
<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/getpro/habr/post_images/a4f/7e8/8fb/a4f7e88fbbd79bdb92b2de8f1c48697a.png"/><br/>
<i><font color="gray">Рис. 2. На платформе UWP все приложения принадлежат одному процессу (<code>ApplicationFrameHost.exe</code>). Для фаззинга этих приложений пришлось изменить оригинальный фаззер NT и направить его на конкретные дескрипторы окон</font></i> <br/>
<br/>
При модификации фаззера проявился серьёзный недостаток: значения, выбранные для двух основных источников рандомизированного ввода, аргументов <code>lParam</code> и <code>wParam</code> для <code>SendMessage</code> и <code>PostMessage</code>, ограничены 16-битными целыми числами. Оба аргумента 32-битные на 32-разрядной Windows и 64-битные в 64-разрядной версии Windows. Проблема возникает в <code>Fuzz.cpp</code>, где устанавливаются значения <code>lParam</code> и <code>wParam</code>:<br/>
<br/>
<pre><code class="cpp">     wParam = (UINT) rand();
     lParam = (LONG) rand();</code></pre><br/>
Функция rand() возвращает число в диапазоне [0, 2<sup>16</sup>], что значительно ограничивает набор тестируемых значений. Мы намеренно сохранили эту ошибку во время тестирования, чтобы результаты точно сопоставлялись с оригинальной работой.<br/>
<br/>
<h1>Тестируемые приложения</h1><br/>
В оригинальном отчёте по NT тестировались 33 программы. У нас только 28, потому что для тестирования используется только одна версия каждой программы. Экосистема программного обеспечения Windows существенно изменилась с 2000 года, хотя удивительно многое осталось без изменений. Пакет Microsoft Office содержит те же программы, что в исходных тестах. Netscape Communicator превратился в Firefox. Adobe Acrobat переименовался в Adobe Reader, но по-прежнему в силе. Даже Winamp выпустил новый релиз в 2018 году, что позволяет провести справедливое сравнение с оригинальным отчётом. Тем не менее, некоторые устаревшие программы пришлось заменить. См. ниже список изменений и причины для них:<br/>
<br/>
<ul>
<li><b>CD Player ⇨ Windows Media Player:</b> в новую программу включена функциональность CD Player.<br/>
</li>
<li><b>Eudora ⇨ Windows Mail:</b> компания Qualcomm теперь занимается микросхемами, а не почтовыми клиентами. Поскольку Eudora больше не существует, вместо неё протестирован почтовый клиент Windows по умолчанию.<br/>
</li>
<li><b>Command AntiVirus ⇨ Avast Free Edition:</b> Command AntiVirus больше не доступен. Его заменили на Avast как самый популярный сторонний антивирус.<br/>
</li>
<li><b>GSView ⇨ Photos:</b> приложение GSView больше не поддерживается. Его заменили на программу просмотра фотографий Windows по умолчанию.<br/>
</li>
<li><b>JavaWorkshop ⇨ IDE NetBeans:</b> IDE JavaWorkshop больше не поддерживается. NetBeans кажется хорошей бесплатной альтернативой, которая соответствует духу того, что нужно проверять.<br/>
</li>
<li><b>Secure CRT ⇨ BitVise SSH:</b> Secure CRT всё ещё существует, но для загрузки пробной версии требуется очень длинная веб-форма. BitVise SSH предложил быструю загрузку.<br/>
</li>
<li><b>Telnet ⇨ Putty:</b> приложение telnet всё ещё существует в Windows, но теперь это консольное приложение. Для фаззинга GUI мы заменили его на Putty, популярный эмулятор терминала с открытым исходным кодом для Windows.<br/>
</li>
<li><b>Freecell и Solitaire</b> мы нашли в наборе <a href="https://zone.msn.com/en/mssolitairecollection/default.htm">Microsoft Solitaire Collection</a> из каталога приложений Windows App Store.</li>
</ul><br/>
Конкретная версия приложения отображается в таблице результатов. Весь фаззинг проводился на 64-разрядной системе Windows 10 Pro версии 1809 (билд 17763.253).<br/>
<br/>
<h1>Результаты</h1><br/>
Как упоминалось в оригинальном докладе, результаты следует рассматривать не как уязвимости безопасности, а как показатель надёжности и качества программного обеспечения.<br/>
<br/>
<blockquote><i>«Наконец, наши результаты формируют количественную отправную точку, с которой можно будет судить об относительном улучшении надёжности программного обеспечения».</i><br/>
<br/>
— из «Эмпирического исследования надёжности приложений Windows NT с использованием случайного тестирования» Джастина Форрестера и Бартона Миллера</blockquote><br/>
Цифры не особенно обнадёживают, хотя ситуация улучшается. В исходном отчёте по NT все приложения вылетели или зависли на фаззинге. Теперь две программы: калькулятор и Avast Antivirus, пережили фазинг оконными сообщениями без каких-либо негативных последствий. Наша похвала командам Avast и Windows Calculator в их подходе к ошибочным оконным сообщениям. Команда Calculator заслужила дополнительный респект за открытие исходного кода и демонстрацию, как создаётся высококачественное приложение UWP. См. таблицу 1 со всеми результатами фаззинга, вместе с специфической версией используемого программного обеспечения.<br/>
<br/>
<div class="scrollable-table"><table>
<tbody>
<tr>
<td><b>Программа</b></td>
<td><b>Версия</b></td>
<td><b>SendMessage</b></td>
<td><b>PostMessage</b></td>
</tr>
<tr>
<td>Microsoft Access</td>
<td>1901</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Adobe Reader DC</td>
<td>2019.010.20098</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Calculator</td>
<td>10.1812.10048.0</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>Windows Media Player</td>
<td>12.0.17763.292</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Visual Studio Code</td>
<td>1.30.2</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Avast Free</td>
<td>19.2.2364</td>
<td>ok</td>
<td>ok</td>
</tr>
<tr>
<td>Windows Mail</td>
<td>16005.11231.20182.0</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Excel</td>
<td>1901</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Adobe FrameMaker</td>
<td>15.0.2.503</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Freecell</td>
<td>4.3.2112.0</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>GhostScript</td>
<td>9.26</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Photos</td>
<td>2019.18114.17710.0</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>GNU Emacs</td>
<td>26.1</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>IE Edge</td>
<td>44.17763.1.0</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>NetBeans</td>
<td>10</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Firefox</td>
<td>64.0.2</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Notepad</td>
<td>1809</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Paint</td>
<td>1809</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Paint Shop Pro 2019</td>
<td>21.1</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Powerpoint</td>
<td>1901</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Bitvise SSH</td>
<td>8.23</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Solitaire</td>
<td>4.3.2112.0</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>Putty</td>
<td>0.70</td>
<td>подвисание</td>
<td>подвисание</td>
</tr>
<tr>
<td>VS Community 2017</td>
<td>15.9.5</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>WinAmp 5.8</td>
<td>5.8 Build 3660</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Word</td>
<td>1901</td>
<td>сбой</td>
<td>ok</td>
</tr>
<tr>
<td>Wordpad</td>
<td>1809</td>
<td>сбой</td>
<td>сбой</td>
</tr>
<tr>
<td>WS_FTP</td>
<td>12.7.0.1903</td>
<td>сбой</td>
<td>сбой</td>
</tr>
</tbody>
</table></div><i><font color="gray">Таблица 1. Результаты воспроизведения оригинального фаззинга на Windows 10. Спустя 19 лет почти все приложения по-прежнему неправильно обрабатывают искажённые оконные сообщения</font></i> <br/>
<br/>
<h1>Баг в Windows?</h1><br/>
К сожалению, любопытство взяло верх, и нам пришлось сделать одно исключение. Казалось, что несколько несвязанных приложений поражает одна общая проблема. Отладка показала, что проблема связана с сообщением <code>WM_DEVICECHANGE</code>. Когда фаззер отправлял это сообщение, то падало даже самое простое приложение — <a href="https://docs.microsoft.com/en-us/windows/desktop/learnwin32/your-first-windows-program">HelloWorld, официальный пример Windows API</a> (рис. 3).<br/>
<br/>
<img src="/img/image-loader.svg" data-src="https://habrastorage.org/getpro/habr/post_images/e6b/74b/cae/e6b74bcae36402b21b948256fe726315.png"/><br/>
<i><font color="gray">Рис. 3. 32-битный HelloWorld.exe аварийно завершает работу при получении оконного сообщения от фаззера. Этого не должно произойти, так как программа совершенно простая. Подразумевается, что проблема где-то в Windows</font></i><br/>
<br/>
После падения HelloWorld мы сразу поняли, что проблема затрагивает только 32-разрядные приложения, но не 64-разрядные. Некоторая быстрая отладка показала, что сбой происходит в <a href="https://docs.microsoft.com/en-us/windows/desktop/winprog64/wow64-implementation-details">wow64win.dll, слое совместимости 32-битных приложений для 64 бит</a>. Мой поверхностный (и, возможно, неправильный) анализ проблемы позволяет сделать вывод, что функция <code>wow64win.dll!whcbfnINDEVICECHANGE</code> расценивает wParam как указатель на структуру <code>DEV_BROADCAST_HANDLE64</code> в целевой программе. Функция преобразует эту структуру в структуру <code>DEV_BROADCAST_HANDLE32</code> для совместимости с 32-битными приложениями. Сбой происходит из-за того, что значение <code>wParam</code>, сгенерированное фаззером, указывает на недопустимую память.<br/>
<br/>
Обработка <code>wParam</code> как локального указателя — плохая идея, хотя, вероятно, это было преднамеренное дизайнерское решение, чтобы уведомления съёмных устройств работали с устаревшими 32-разрядными приложениями Windows. Но всё равно неправильно, что можно аварийно завершить работу другого приложения без каких-то проблем. Мы сообщили о проблеме в MSRC, хотя граница безопасности не пересекалась. Они подтвердили, что ошибка не является проблемой безопасности. Надеемся увидеть исправление этой, по общему мнению, странной проблемы в будущей версии Windows.<br/>
<br/>
<h1>Вывод</h1><br/>
Оконные сообщения недооцениваются и часто игнорируются в качестве ненадёжных входных данных для программ Windows. Даже через 19 лет после появления первого фаззера оконных сообщений с открытым исходным кодом 93% тестируемых приложений по-прежнему зависают или вылетают при запуске той же самой программы. Но обнадёживает, что некоторые приложения изящно справляются с этими искажёнными входными данными: это означает, что в некоторых организациях существуют фреймворки и институциональные знания, позволяющие избежать таких ошибок.<br/>
<br/>
Конечно, фаззер можно улучшить во многих отношениях, но даже самый простой метод вызвал сбой 93% приложений. Возможно, в некоторых случаях оконные сообщения даже пересекают реальную границу безопасности. Если вы исследуете эту область, мы надеемся, что вы поделитесь находками.</div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%84%D0%B0%D0%B7%D0%B7%D0%B8%D0%BD%D0%B3%5D" class="tm-tags-list__link">фаззинг</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BWindows%20NT%5D" class="tm-tags-list__link">Windows NT</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BWindows%2010%5D" class="tm-tags-list__link">Windows 10</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/infosecurity/" class="tm-hubs-list__link">
    Информационная безопасность
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/it_testing/" class="tm-hubs-list__link">
    Тестирование IT-систем
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/debug/" class="tm-hubs-list__link">
    Отладка
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/win_dev/" class="tm-hubs-list__link">
    Разработка под Windows
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/soft/" class="tm-hubs-list__link">
    Софт
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 16: ↑15 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 16: ↑15 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+14</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">8K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    25
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/m1rko/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/4ec/bd0/85d/4ecbd085d692835a931d03174ff19539.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 1501 голос " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    1229.5
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><span class="tm-user-card__name tm-user-card__name_variant-article">Анатолий Ализар</span> <a href="/ru/users/m1rko/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @m1rko
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">автор, переводчик, редактор</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/451816/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 4 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/451816/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/451816/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"451816":{"id":"451816","timePublished":"2019-05-14T15:04:34+00:00","isCorporative":false,"lang":"ru","titleHtml":"Фаззинг в стиле 2000 года на современных приложениях Windows 10","leadData":{"textHtml":"\u003Cimg src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fcb6\u002F3b4\u002Fca2\u002Fcb63b4ca2a435ac151253934fcb775b6.png\"\u003E\u003Cbr\u003E\r\n\u003Ci\u003E\u003Cfont color=\"gray\"\u003EРис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FMicrosoft\u002Fcalculator\"\u003Eопубликован на Github\u003C\u002Fa\u003E, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с фаззером оконных сообщений разработки 2000 года. Размер окна специально увеличен, чтобы показать артефакты фаззинга\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nНастало время для второй части наших усилий по проверке древних методов фаззинга на современных системах. Если вы пропустили, вот \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F435484\u002F\"\u003Eпервая часть\u003C\u002Fa\u003E. На этот раз мы опробуем на Windows 10 методы фаззинга из статьи «Эмпирическое исследование надёжности приложений Windows NT с использованием случайного тестирования» (она же «отчёт по фаззингу NT») Джастина Форрестера и Бартона Миллера, опубликованной в 2000 году.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nИсследователи протестировали 33 приложения Windows NT и ранней версии Windows 2000 на восприимчивость к искажённым оконным сообщениям и случайным событиям мыши и клавиатуры. Поскольку д-р Миллер опубликовал код фаззера, мы использовали \u003Cb\u003Eв точности те же инструменты\u003C\u002Fb\u003E, что и первоначальные авторы, для поиска ошибок в современных приложениях Windows.\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"translation","data":{"originalAuthorName":"Artem Dinaburg","originalUrl":"https:\u002F\u002Fblog.trailofbits.com\u002F2019\u002F03\u002F28\u002Ffuzzing-in-the-year-2000\u002F"}}],"author":{"scoreStats":{"score":1229.5,"votesCount":1501},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1371978","alias":"m1rko","fullname":"Анатолий Ализар","avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F4ec\u002Fbd0\u002F85d\u002F4ecbd085d692835a931d03174ff19539.png","speciality":"автор, переводчик, редактор"},"statistics":{"commentsCount":4,"favoritesCount":25,"readingCount":7969,"score":14,"votesCount":16},"hubs":[{"relatedData":null,"id":"50","alias":"infosecurity","type":"collective","title":"Информационная безопасность","titleHtml":"Информационная безопасность","isProfiled":true},{"relatedData":null,"id":"210","alias":"it_testing","type":"collective","title":"Тестирование IT-систем","titleHtml":"Тестирование IT-систем","isProfiled":true},{"relatedData":null,"id":"17716","alias":"debug","type":"collective","title":"Отладка","titleHtml":"Отладка","isProfiled":true},{"relatedData":null,"id":"21456","alias":"win_dev","type":"collective","title":"Разработка под Windows","titleHtml":"Разработка под Windows","isProfiled":true},{"relatedData":null,"id":"21918","alias":"soft","type":"collective","title":"Софт","titleHtml":"Софт","isProfiled":false}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"7","alias":"popsci","title":"Научпоп"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fcb6\u002F3b4\u002Fca2\u002Fcb63b4ca2a435ac151253934fcb775b6.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"gray\"\u003EРис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FMicrosoft\u002Fcalculator\"\u003Eопубликован на Github\u003C\u002Fa\u003E, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с фаззером оконных сообщений разработки 2000 года. Размер окна специально увеличен, чтобы показать артефакты фаззинга\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНастало время для второй части наших усилий по проверке древних методов фаззинга на современных системах. Если вы пропустили, вот \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F435484\u002F\"\u003Eпервая часть\u003C\u002Fa\u003E. На этот раз мы опробуем на Windows 10 методы фаззинга из статьи «Эмпирическое исследование надёжности приложений Windows NT с использованием случайного тестирования» (она же «отчёт по фаззингу NT») Джастина Форрестера и Бартона Миллера, опубликованной в 2000 году.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nИсследователи протестировали 33 приложения Windows NT и ранней версии Windows 2000 на восприимчивость к искажённым оконным сообщениям и случайным событиям мыши и клавиатуры. Поскольку д-р Миллер опубликовал код фаззера, мы использовали \u003Cb\u003Eв точности те же инструменты\u003C\u002Fb\u003E, что и первоначальные авторы, для поиска ошибок в современных приложениях Windows.\u003Cbr\u002F\u003E\r\n\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E\u003Cbr\u002F\u003E\r\nРезультаты почти идентичны: 19 лет назад 100% протестированных приложений вылетели или зависли, встретив искажённые оконные сообщения. Сегодня тот же фаззер уронил или повесил 93% протестированных приложений. Устояли только два, в том числе наш старый знакомый \u003Ca href=\"https:\u002F\u002Fgithub.com\u002FMicrosoft\u002Fcalculator\"\u003EКалькулятор\u003C\u002Fa\u003E (рис. 1). Мы также нашли ошибку (но не проблему безопасности) в Windows.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EКраткое введение в Windows\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nИтак, что такое оконные сообщения и почему они вызывают сбой программы?\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПриложения Windows с графическим интерфейсом управляются событиями: движения мыши, нажатия кнопок, нажатия клавиш и т. д. Приложение, управляемое событиями, ничего не сделает, пока не получит событие. Как только событие получено, приложение выполняет действие на основе события, а затем ожидает других событий. Звучит знакомо? Эта архитектура \u003Ca href=\"https:\u002F\u002Fmedium.freecodecamp.org\u002Funderstanding-node-js-event-driven-architecture-223292fcbc2d\"\u003Eполучила вторую жизнь в таких платформах, как node.js\u003C\u002Fa\u003E.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ca href=\"https:\u002F\u002Fdocs.microsoft.com\u002Fen-us\u002Fwindows\u002Fdesktop\u002Flearnwin32\u002Fwindow-messages\"\u003EОконные сообщения — это метод уведомления о событиях в Windows\u003C\u002Fa\u003E. У каждого из них есть \u003Ca href=\"https:\u002F\u002Fwiki.winehq.org\u002FList_Of_Windows_Messages\"\u003Eчисловой код, связанный с конкретным событием\u003C\u002Fa\u003E. У каждого сообщения один или несколько параметров, которые \u003Ca href=\"https:\u002F\u002Fblogs.msdn.microsoft.com\u002Foldnewthing\u002F20031125-00\u002F?p=41713\"\u003Eпо соглашению называется lParam и wParam\u003C\u002Fa\u003E. Они определяют более подробную информацию о событии. Примеры такой информации — координаты перемещения мыши, какая клавиша нажата или какой текст вывести в окне. Эти сообщения может отправить сама программа, операционная система или другие программы. Они могут прибыть в любое время и в любом порядке и должны быть обработаны приложением с получающей стороны.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EПоследствия для безопасности\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДо Windows Vista процесс с низким уровнем привилегий мог отправить сообщение процессу с высокими привилегиями. Используя правильную комбинацию сообщений, можно выполнить код в том процессе. В системе Vista от подобных \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FShatter_attack\"\u003E«подрывных атак»\u003C\u002Fa\u003E удалось в значительной степени защититься с помощью \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FUser_Interface_Privilege_Isolation\"\u003EUIPI\u003C\u002Fa\u003E и путём изоляции системных служб в отдельном сеансе.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nНеправильная обработка оконных сообщений вряд ли окажет влияние на безопасность современных систем Windows по двум причинам. Во-первых, оконные сообщения нельзя отправить по сети. Во-вторых, сбой приложения или выполнение кода на том же уровне привилегий, не очень полезно злоумышленнику. Вероятно, авторам доклада по фаззингу NT это было очевидно. Они не делают заявлений о безопасности, но правильно указывают, что сбои при обработке оконных сообщений подразумевают отсутствие строгого тестирования.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЕсть некоторые области, где выполнение кода с одинаковыми привилегиями способно нарушить безопасность. Некоторые приложения объединяют различные примитивы безопасности для создания искусственного уровня привилегий, изначально отсутствующего в операционной системе. Типичный пример — песочница для рендеринга в браузере. Производители браузеров хорошо осведомлены об этих проблемах и \u003Ca href=\"https:\u002F\u002Fchromium.googlesource.com\u002Fchromium\u002Fsrc\u002F+show\u002Flkgr\u002Fdocs\u002Fdesign\u002Fsandbox.md\"\u003Eприняли меры для их устранения\u003C\u002Fa\u003E. Другой пример — антивирусные продукты. Там панель управления работает с нормальными привилегиями, но изолирована от других модулей антивируса.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EМетодика тестирования\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nДля фаззинга всех приложений в тестовом наборе мы использовали тот же основной код и методику фаззинга, описанные в первоначальном отчёте по NT. В частности, в обоих режимах \u003Ca href=\"https:\u002F\u002Fdocs.microsoft.com\u002Fen-us\u002Fwindows\u002Fdesktop\u002Fapi\u002Fwinuser\u002Fnf-winuser-sendmessage\"\u003ESendMessage\u003C\u002Fa\u003E и \u003Ca href=\"https:\u002F\u002Fdocs.microsoft.com\u002Fen-us\u002Fwindows\u002Fdesktop\u002Fapi\u002Fwinuser\u002Fnf-winuser-postmessagea\"\u003EPostMessage\u003C\u002Fa\u003E фаззер использовал три итерации по 500 000 сообщений с сидом 42 и три итерации по 500 000 сообщений с сидом 1,337. Результаты появились после выполнения только одной итерации каждого метода.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nСлучайный ввод с мыши и клавиатуры мы пропустили из-за ограничений по времени и желания сосредоточиться исключительно на оконных сообщениях. Мы также призываем желающих повторить тестирование и подтвердить результаты.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EПодводные камни\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nДля работы фаззера в Windows 10 пришлось внести два незначительных изменения. Во-первых, адаптировать его для 64-битной платформы. Второе изменение позволило фаззеру выбирать определённый дескриптор окна с помощью аргумента командной строки. Фаззинг конкретного дескриптора — быстрое решение проблемы с фаззингом приложений \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FUniversal_Windows_Platform\"\u003EUniversal Windows Platform (UWP)\u003C\u002Fa\u003E. Оригинальная программа ориентирована на фаззинг окон, принадлежащих определённому процессу, но все приложения UWP отображают свой пользовательский интерфейс через тот же процесс (рис. 2). Это означает, что фаззер нельзя направить на главное окно приложений UWP.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fa4f\u002F7e8\u002F8fb\u002Fa4f7e88fbbd79bdb92b2de8f1c48697a.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"gray\"\u003EРис. 2. На платформе UWP все приложения принадлежат одному процессу (\u003Ccode\u003EApplicationFrameHost.exe\u003C\u002Fcode\u003E). Для фаззинга этих приложений пришлось изменить оригинальный фаззер NT и направить его на конкретные дескрипторы окон\u003C\u002Ffont\u003E\u003C\u002Fi\u003E \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПри модификации фаззера проявился серьёзный недостаток: значения, выбранные для двух основных источников рандомизированного ввода, аргументов \u003Ccode\u003ElParam\u003C\u002Fcode\u003E и \u003Ccode\u003EwParam\u003C\u002Fcode\u003E для \u003Ccode\u003ESendMessage\u003C\u002Fcode\u003E и \u003Ccode\u003EPostMessage\u003C\u002Fcode\u003E, ограничены 16-битными целыми числами. Оба аргумента 32-битные на 32-разрядной Windows и 64-битные в 64-разрядной версии Windows. Проблема возникает в \u003Ccode\u003EFuzz.cpp\u003C\u002Fcode\u003E, где устанавливаются значения \u003Ccode\u003ElParam\u003C\u002Fcode\u003E и \u003Ccode\u003EwParam\u003C\u002Fcode\u003E:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"cpp\"\u003E     wParam = (UINT) rand();\n     lParam = (LONG) rand();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\nФункция rand() возвращает число в диапазоне [0, 2\u003Csup\u003E16\u003C\u002Fsup\u003E], что значительно ограничивает набор тестируемых значений. Мы намеренно сохранили эту ошибку во время тестирования, чтобы результаты точно сопоставлялись с оригинальной работой.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EТестируемые приложения\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nВ оригинальном отчёте по NT тестировались 33 программы. У нас только 28, потому что для тестирования используется только одна версия каждой программы. Экосистема программного обеспечения Windows существенно изменилась с 2000 года, хотя удивительно многое осталось без изменений. Пакет Microsoft Office содержит те же программы, что в исходных тестах. Netscape Communicator превратился в Firefox. Adobe Acrobat переименовался в Adobe Reader, но по-прежнему в силе. Даже Winamp выпустил новый релиз в 2018 году, что позволяет провести справедливое сравнение с оригинальным отчётом. Тем не менее, некоторые устаревшие программы пришлось заменить. См. ниже список изменений и причины для них:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cul\u003E\r\n\u003Cli\u003E\u003Cb\u003ECD Player ⇨ Windows Media Player:\u003C\u002Fb\u003E в новую программу включена функциональность CD Player.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003EEudora ⇨ Windows Mail:\u003C\u002Fb\u003E компания Qualcomm теперь занимается микросхемами, а не почтовыми клиентами. Поскольку Eudora больше не существует, вместо неё протестирован почтовый клиент Windows по умолчанию.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003ECommand AntiVirus ⇨ Avast Free Edition:\u003C\u002Fb\u003E Command AntiVirus больше не доступен. Его заменили на Avast как самый популярный сторонний антивирус.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003EGSView ⇨ Photos:\u003C\u002Fb\u003E приложение GSView больше не поддерживается. Его заменили на программу просмотра фотографий Windows по умолчанию.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003EJavaWorkshop ⇨ IDE NetBeans:\u003C\u002Fb\u003E IDE JavaWorkshop больше не поддерживается. NetBeans кажется хорошей бесплатной альтернативой, которая соответствует духу того, что нужно проверять.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003ESecure CRT ⇨ BitVise SSH:\u003C\u002Fb\u003E Secure CRT всё ещё существует, но для загрузки пробной версии требуется очень длинная веб-форма. BitVise SSH предложил быструю загрузку.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003ETelnet ⇨ Putty:\u003C\u002Fb\u003E приложение telnet всё ещё существует в Windows, но теперь это консольное приложение. Для фаззинга GUI мы заменили его на Putty, популярный эмулятор терминала с открытым исходным кодом для Windows.\u003Cbr\u002F\u003E\r\n\u003C\u002Fli\u003E\r\n\u003Cli\u003E\u003Cb\u003EFreecell и Solitaire\u003C\u002Fb\u003E мы нашли в наборе \u003Ca href=\"https:\u002F\u002Fzone.msn.com\u002Fen\u002Fmssolitairecollection\u002Fdefault.htm\"\u003EMicrosoft Solitaire Collection\u003C\u002Fa\u003E из каталога приложений Windows App Store.\u003C\u002Fli\u003E\r\n\u003C\u002Ful\u003E\u003Cbr\u002F\u003E\r\nКонкретная версия приложения отображается в таблице результатов. Весь фаззинг проводился на 64-разрядной системе Windows 10 Pro версии 1809 (билд 17763.253).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EРезультаты\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nКак упоминалось в оригинальном докладе, результаты следует рассматривать не как уязвимости безопасности, а как показатель надёжности и качества программного обеспечения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003E\u003Ci\u003E«Наконец, наши результаты формируют количественную отправную точку, с которой можно будет судить об относительном улучшении надёжности программного обеспечения».\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n— из «Эмпирического исследования надёжности приложений Windows NT с использованием случайного тестирования» Джастина Форрестера и Бартона Миллера\u003C\u002Fblockquote\u003E\u003Cbr\u002F\u003E\r\nЦифры не особенно обнадёживают, хотя ситуация улучшается. В исходном отчёте по NT все приложения вылетели или зависли на фаззинге. Теперь две программы: калькулятор и Avast Antivirus, пережили фазинг оконными сообщениями без каких-либо негативных последствий. Наша похвала командам Avast и Windows Calculator в их подходе к ошибочным оконным сообщениям. Команда Calculator заслужила дополнительный респект за открытие исходного кода и демонстрацию, как создаётся высококачественное приложение UWP. См. таблицу 1 со всеми результатами фаззинга, вместе с специфической версией используемого программного обеспечения.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv class=\"scrollable-table\"\u003E\u003Ctable\u003E\r\n\u003Ctbody\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003E\u003Cb\u003EПрограмма\u003C\u002Fb\u003E\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E\u003Cb\u003EВерсия\u003C\u002Fb\u003E\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E\u003Cb\u003ESendMessage\u003C\u002Fb\u003E\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E\u003Cb\u003EPostMessage\u003C\u002Fb\u003E\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EMicrosoft Access\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1901\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EAdobe Reader DC\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E2019.010.20098\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003ECalculator\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E10.1812.10048.0\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EWindows Media Player\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E12.0.17763.292\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EVisual Studio Code\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1.30.2\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EAvast Free\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E19.2.2364\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EWindows Mail\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E16005.11231.20182.0\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EExcel\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1901\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EAdobe FrameMaker\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E15.0.2.503\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EFreecell\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E4.3.2112.0\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EGhostScript\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E9.26\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EPhotos\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E2019.18114.17710.0\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EGNU Emacs\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E26.1\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EIE Edge\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E44.17763.1.0\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003ENetBeans\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E10\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EFirefox\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E64.0.2\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003ENotepad\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1809\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EPaint\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1809\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EPaint Shop Pro 2019\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E21.1\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EPowerpoint\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1901\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EBitvise SSH\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E8.23\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003ESolitaire\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E4.3.2112.0\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EPutty\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E0.70\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eподвисание\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eподвисание\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EVS Community 2017\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E15.9.5\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EWinAmp 5.8\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E5.8 Build 3660\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EWord\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1901\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eok\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EWordpad\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E1809\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003Ctr\u003E\r\n\u003Ctd\u003EWS_FTP\u003C\u002Ftd\u003E\r\n\u003Ctd\u003E12.7.0.1903\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003Ctd\u003Eсбой\u003C\u002Ftd\u003E\r\n\u003C\u002Ftr\u003E\r\n\u003C\u002Ftbody\u003E\r\n\u003C\u002Ftable\u003E\u003C\u002Fdiv\u003E\u003Ci\u003E\u003Cfont color=\"gray\"\u003EТаблица 1. Результаты воспроизведения оригинального фаззинга на Windows 10. Спустя 19 лет почти все приложения по-прежнему неправильно обрабатывают искажённые оконные сообщения\u003C\u002Ffont\u003E\u003C\u002Fi\u003E \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EБаг в Windows?\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nК сожалению, любопытство взяло верх, и нам пришлось сделать одно исключение. Казалось, что несколько несвязанных приложений поражает одна общая проблема. Отладка показала, что проблема связана с сообщением \u003Ccode\u003EWM_DEVICECHANGE\u003C\u002Fcode\u003E. Когда фаззер отправлял это сообщение, то падало даже самое простое приложение — \u003Ca href=\"https:\u002F\u002Fdocs.microsoft.com\u002Fen-us\u002Fwindows\u002Fdesktop\u002Flearnwin32\u002Fyour-first-windows-program\"\u003EHelloWorld, официальный пример Windows API\u003C\u002Fa\u003E (рис. 3).\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fpost_images\u002Fe6b\u002F74b\u002Fcae\u002Fe6b74bcae36402b21b948256fe726315.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Ci\u003E\u003Cfont color=\"gray\"\u003EРис. 3. 32-битный HelloWorld.exe аварийно завершает работу при получении оконного сообщения от фаззера. Этого не должно произойти, так как программа совершенно простая. Подразумевается, что проблема где-то в Windows\u003C\u002Ffont\u003E\u003C\u002Fi\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПосле падения HelloWorld мы сразу поняли, что проблема затрагивает только 32-разрядные приложения, но не 64-разрядные. Некоторая быстрая отладка показала, что сбой происходит в \u003Ca href=\"https:\u002F\u002Fdocs.microsoft.com\u002Fen-us\u002Fwindows\u002Fdesktop\u002Fwinprog64\u002Fwow64-implementation-details\"\u003Ewow64win.dll, слое совместимости 32-битных приложений для 64 бит\u003C\u002Fa\u003E. Мой поверхностный (и, возможно, неправильный) анализ проблемы позволяет сделать вывод, что функция \u003Ccode\u003Ewow64win.dll!whcbfnINDEVICECHANGE\u003C\u002Fcode\u003E расценивает wParam как указатель на структуру \u003Ccode\u003EDEV_BROADCAST_HANDLE64\u003C\u002Fcode\u003E в целевой программе. Функция преобразует эту структуру в структуру \u003Ccode\u003EDEV_BROADCAST_HANDLE32\u003C\u002Fcode\u003E для совместимости с 32-битными приложениями. Сбой происходит из-за того, что значение \u003Ccode\u003EwParam\u003C\u002Fcode\u003E, сгенерированное фаззером, указывает на недопустимую память.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОбработка \u003Ccode\u003EwParam\u003C\u002Fcode\u003E как локального указателя — плохая идея, хотя, вероятно, это было преднамеренное дизайнерское решение, чтобы уведомления съёмных устройств работали с устаревшими 32-разрядными приложениями Windows. Но всё равно неправильно, что можно аварийно завершить работу другого приложения без каких-то проблем. Мы сообщили о проблеме в MSRC, хотя граница безопасности не пересекалась. Они подтвердили, что ошибка не является проблемой безопасности. Надеемся увидеть исправление этой, по общему мнению, странной проблемы в будущей версии Windows.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch1\u003EВывод\u003C\u002Fh1\u003E\u003Cbr\u002F\u003E\r\nОконные сообщения недооцениваются и часто игнорируются в качестве ненадёжных входных данных для программ Windows. Даже через 19 лет после появления первого фаззера оконных сообщений с открытым исходным кодом 93% тестируемых приложений по-прежнему зависают или вылетают при запуске той же самой программы. Но обнадёживает, что некоторые приложения изящно справляются с этими искажёнными входными данными: это означает, что в некоторых организациях существуют фреймворки и институциональные знания, позволяющие избежать таких ошибок.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКонечно, фаззер можно улучшить во многих отношениях, но даже самый простой метод вызвал сбой 93% приложений. Возможно, в некоторых случаях оконные сообщения даже пересекают реальную границу безопасности. Если вы исследуете эту область, мы надеемся, что вы поделитесь находками.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"фаззинг"},{"titleHtml":"Windows NT"},{"titleHtml":"Windows 10"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451816\u002Fa5b7437de68d96b05983e41202fd5f2a\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F451816\u002Fa5b7437de68d96b05983e41202fd5f2a\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F451816\\\u002F\"},\"headline\":\"Фаззинг в стиле 2000 года на современных приложениях Windows 10\",\"datePublished\":\"2019-05-14T18:04:34+03:00\",\"dateModified\":\"2019-05-14T19:07:33+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Анатолий Ализар\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не завис...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F451816\\\u002F#post-content-body\",\"about\":[\"h_infosecurity\",\"h_it_testing\",\"h_debug\",\"h_win_dev\",\"h_soft\",\"f_develop\",\"f_popsci\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fcb6\\\u002F3b4\\\u002Fca2\\\u002Fcb63b4ca2a435ac151253934fcb775b6.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fa4f\\\u002F7e8\\\u002F8fb\\\u002Fa4f7e88fbbd79bdb92b2de8f1c48697a.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fgetpro\\\u002Fhabr\\\u002Fpost_images\\\u002Fe6b\\\u002F74b\\\u002Fcae\\\u002Fe6b74bcae36402b21b948256fe726315.png\"]}","metaDescription":"Рис. 1. Ушиблен, но не сломлен. Калькулятор Windows, чей код недавно опубликован на Github, оказался одним из двух протестированных приложений, которые не зависли и не упали в противостоянии с...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"infosecurity,it_testing,debug,win_dev,soft"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
