<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Об анонимности в account-based блокчейнах / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/company\/exante\/blog\/452184\/"},"headline":"Об анонимности в account-based блокчейнах","datePublished":"2019-05-20T14:13:48+03:00","dateModified":"2019-10-21T17:32:38+03:00","author":{"@type":"Person","name":"Exantech"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали...","url":"https:\/\/habr.com\/ru\/company\/exante\/blog\/452184\/#post-content-body","about":["c_exante","h_distributed_systems","f_admin"],"image":["https:\/\/habrastorage.org\/webt\/tj\/ed\/8o\/tjed8olalcrirbjpupoms6bwejo.png","https:\/\/habrastorage.org\/webt\/kw\/pg\/zn\/kwpgzn1wg1mmztznetqntcdfbca.png","https:\/\/habrastorage.org\/webt\/ky\/t6\/3x\/kyt63xxqcoleppvesgfpoubyj8y.png","https:\/\/habrastorage.org\/webt\/dj\/o6\/x0\/djo6x0r31q3_bzpa78t0cklzt_i.png","https:\/\/habrastorage.org\/webt\/bn\/d0\/7z\/bnd07z43bu5m76fbbvjlvda7ek0.png","https:\/\/habrastorage.org\/webt\/5q\/ku\/zu\/5qkuzus5hr-5168x4ieihiwtbjw.png"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Об анонимности в account-based блокчейнах" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Об анонимности в account-based блокчейнах" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Об анонимности в account-based блокчейнах" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы конфиденциальных..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы конфиденциальных..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы конфиденциальных..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы конфиденциальных..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы конфиденциальных..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/452184/b2a15305c152c7b7ef6bbcc75bf99a7f/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/452184/b2a15305c152c7b7ef6bbcc75bf99a7f/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/452184/b2a15305c152c7b7ef6bbcc75bf99a7f/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/452184/b2a15305c152c7b7ef6bbcc75bf99a7f/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/452184/b2a15305c152c7b7ef6bbcc75bf99a7f/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="452184" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-20T11:13:48.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/452184/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/company/exante/blog/452184/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/452184/b2a15305c152c7b7ef6bbcc75bf99a7f/" data-vmid="image:href"><link data-vue-meta="ssr" rel="amphtml" href="https://habr.com/ru/amp/post/452184/">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" companyName="exante" data-async-called="true" class="tm-page"><div class="tm-page-width"><div class="tm-page__header"><!----></div> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"><div class="tm-company-card tm-company-article__company-card"><div class="tm-company-card__info"><div class="tm-company-card__header"><a href="/ru/company/exante/profile/" class="tm-company-card__avatar"><div class="tm-entity-image"><img alt="" height="48" src="//habrastorage.org/getpro/habr/company/eff/f4f/59b/efff4f59b0c040c136de92df84779738.png" width="48" class="tm-entity-image__pic"></div></a> <!----> <div class="tm-rating tm-company-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div> <div class="tm-company-card__info"><a href="/ru/company/exante/profile/" class="tm-company-card__name">
        EXANTE
      </a> <div class="tm-company-card__description">Инвестиционная компания нового поколения</div></div></div> <div class="tm-company-card__buttons"><!----> <!----></div></div> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/Exantech/" title="Exantech" class="tm-user-info__userpic"><div class="tm-entity-image"><img alt="" height="24" loading="lazy" src="//habrastorage.org/r/w32/getpro/habr/avatars/224/495/e8f/224495e8fe38f6c74592165e7cac893c.png" width="24" class="tm-entity-image__pic"></div></a> <span class="tm-user-info__user"><a href="/ru/users/Exantech/" class="tm-user-info__username">
      Exantech
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-20T11:13:48.000Z" title="2019-05-20, 14:13">20  мая  2019 в 14:13</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Об анонимности в account-based блокчейнах</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/company/exante/blog/" class="tm-article-snippet__hubs-item-link router-link-active"><span>Блог компании EXANTE</span> <!----></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/distributed_systems/" class="tm-article-snippet__hubs-item-link"><span>Распределённые системы</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <!----> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml">Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы <a href="https://habr.com/ru/company/exante/blog/421913/">конфиденциальных транзакций</a> в Monero, а также проводили <a href="https://habr.com/ru/company/exante/blog/438346/">сравнительный обзор</a> технологий, существующих на этом поле. Однако же все анонимные криптовалюты на сегодняшний день построены на модели данных, предложенной Bitcoin — Unspent Transaction Output (далее UTXO). Для account-based блокчейнов как Ethereum существующие решения по реализации анонимности и конфиденциальности (например, <a href="https://eprint.iacr.org/2017/881.pdf">Mobius</a> или <a href="https://www.aztecprotocol.com/">Aztec</a>) пытались повторить модель UTXO в смарт-контрактах.<br/>
<br/>
В феврале 2019 года группа исследователей из Стэнфордского университета и Visa Research<a name="habracut"></a> выпустили <a href="https://crypto.stanford.edu/~buenz/papers/zether.pdf">препринт</a> «Zether: Навстречу приватности в мире смарт-контрактов». Авторы впервые предложили подход к обеспечению анонимности в account-based блокчейнах и представили два варианта смарт-контракта: для конфиденциальных (сокрытие балансов и сумм переводов) и анонимных (сокрытие получателя и отправителя) транзакций. Мы находим предложенную технологию интересной и хотели бы поделиться ее устройством, а также поговорить о том, почему проблема анонимности в account-based блокчейнах считается очень сложной и удалось ли авторам решить ее в полной мере.<br/>
<br/>
<cut></cut><br/>
<br/>
<h3>Об устройстве этих моделей данных</h3><br/>
В UTXO-модели транзакция состоит из «входов» и «выходов». Прямой аналог «выходам» — купюры в вашем кошельке: каждый «выход» имеет какой-то номинал. Когда вы расплачиваетесь с кем-то (формируете транзакцию) вы тратите один или несколько «выходов», при этом они становятся «входами» транзакции, и блокчейн помечает их как потраченные. При этом получатель вашего платежа (или же вы сами, если вам нужна сдача) получает вновь сгенерированные «выходы». Схематично это можно изобразить так:<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://habrastorage.org/webt/tj/ed/8o/tjed8olalcrirbjpupoms6bwejo.png"/><br/>
<br/>
Account-based блокчейны устроены примерно как ваш банковский счет. Они оперируют только суммой на вашем счету и суммой перевода. Когда вы переводите какую-то сумму со своего счета, то не сжигаете никакие «выходы», сети не нужно запоминать, какие монеты потрачены, а какие нет. В простейшем случае проверка транзакции сводится к проверке подписи отправителя и суммы на его балансе:<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://habrastorage.org/webt/kw/pg/zn/kwpgzn1wg1mmztznetqntcdfbca.png"/><br/>
<br/>
<h3>Разбор технологии</h3><br/>
Далее мы поговорим о том, как Zether скрывает сумму транзакций, получателя и отправителя. По ходу описания принципов его работы мы будем отмечать различия в конфиденциальном и анонимном варианте. Так как обеспечить конфиденциальность в account-based блокчейнах намного проще, то некоторые из ограничений, накладываемых анонимизацией, будут неактуальны для конфиденциальной версии технологии.<br/>
<br/>
<h4>Сокрытие балансов и сумм переводов</h4><br/>
Для шифрования балансов и сумм переводов в Zether используется схема шифрования <a href="https://ru.wikipedia.org/wiki/%D0%A1%D1%85%D0%B5%D0%BC%D0%B0_%D0%AD%D0%BB%D1%8C-%D0%93%D0%B0%D0%BC%D0%B0%D0%BB%D1%8F">Эль-Гамаля</a>. Работает она следующим образом. Когда Алиса хочет послать Бобу <i><b>b</b></i> монет по адресу (его публичному ключу) <i><b>Y</b></i>, она выбирает случайное число <i><b>r</b></i> и шифрует сумму:<br/>
<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" alt="image" data-src="https://habrastorage.org/webt/ky/t6/3x/kyt63xxqcoleppvesgfpoubyj8y.png"/></div><br/>
где <i><b>C</b></i> — зашифрованная сумма, <i><b>D</b></i> — вспомогательное значение, необходимое для расшифровки этой суммы, <i><b>G</b></i> — фиксированная точка на эллиптической кривой, при умножении секретного ключа на которую получается публичный ключ.<br/>
<br/>
Когда Боб получает эти значения, он просто прибавляет их к своему зашифрованному таким же способом балансу, чем и удобна эта схема.<br/>
<br/>
Аналогичным образом Алиса вычитает из своего баланса такие же значения, только в качестве <i><b>Y</b></i> использует свой публичный ключ.<br/>
<br/>
<h4>Сокрытие адресата и отправителя</h4><br/>
Замешивание «выходов» в UTXO появилось еще на заре криптовалют и помогает скрыть отправителя. Для этого сам отправитель при совершении перевода набирает случайные «выходы» в блокчейне и замешивает их со своими. Далее подписывает «выходы» кольцевой подписью — криптографическим механизмом, позволяющим убедить проверяющего в том, что среди замешанных «выходов» присутствуют монеты отправителя. Сами замешанные монеты, разумеется, не тратятся.<br/>
<br/>
Однако для сокрытия получателя нам не удастся генерировать фальшивые «выходы». Поэтому в UTXO у каждого «выхода» свой уникальный адрес, и он криптографически связан с адресом получателя этих монет. На данный момент нет способа выявить связь между уникальным адресом «выхода» и адресом получателя, не зная его секретных ключей.<br/>
<br/>
В account-based модели мы не можем использовать одноразовые адреса (иначе это уже будет модель «выходов»). Поэтому получателя и отправителя приходится замешивать среди других аккаунтов в блокчейне. При этом с замешиваемых аккаунтов списывается зашифрованный 0 монет (или прибавляется 0 — в случае замешивания получателя), фактически не меняя их реальный баланс.<br/>
<br/>
Так как и отправитель, и получатель всегда имеют постоянный адрес, здесь возникает необходимость при переводах на одни и те же адреса использовать для замешивания одни и те же группы. Проще рассмотреть это на примере.<br/>
<br/>
Допустим, Алиса решила сделать взнос в благотворительный фонд Боба, но предпочитает, чтобы этот перевод оставался анонимными для стороннего наблюдателя. Тогда, чтобы замаскировать себя в поле отправителя, она вписывает еще аккаунты Адама и Адель. А чтобы скрыть Боба — в поле получателя дополнительно аккаунты Бена и Билла. Делая следующий взнос, Алиса решила рядом с собой вписать Алекса и Аманду, а рядом с Бобом — Брюса и Бенджена. В этом случае при анализе блокчейна в этих двух транзакциях найдется всего лишь одна пересекающаяся пара участников — Алиса и Боб, что деанонимизирует эти транзакции.<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://habrastorage.org/webt/dj/o6/x0/djo6x0r31q3_bzpa78t0cklzt_i.png"/><br/>
<br/>
<h4>Гонки транзакций</h4><br/>
Как мы уже упоминали, для сокрытия своего баланса в account-based системах пользователь шифрует свой баланс и сумму перевода. При этом он должен доказать, что остаток на его счете остается неотрицательным. Проблема заключается в том, что формируя транзакцию, пользователь строит доказательство относительно своего текущего состояния счета. А что будет, если Боб отправит Алисе транзакцию, и она будет принята раньше, чем отправленная Алисой? Тогда транзакция Алисы будет считаться невалидной, т. к. доказательство баланса было построено до принятия транзакции Боба.<br/>
<br/>
<img src="/img/image-loader.svg" alt="image" data-src="https://habrastorage.org/webt/bn/d0/7z/bnd07z43bu5m76fbbvjlvda7ek0.png"/><br/>
<br/>
Первое решение, которое приходит в такой ситуации — замораживать аккаунт до проведения транзакции. Но этот подход не годится, т. к. помимо сложности решения такой задачи в распределенной системе, в анонимной схеме будет непонятно, чей аккаунт блокировать.<br/>
<br/>
Для решения этой проблемы технология разделяет входящие и исходящие транзакции: расходование средств имеет незамедлительный эффект на состояние баланса, а поступления — отложенный. Для этого вводится понятие «эпохи» — группы блоков фиксированного размера. Текущая «эпоха» определяется делением высоты блока на размер группы. Обрабатывая транзакцию, сеть обновляет баланс отправителя сразу, а средства получателя складывает в накопитель. Накопленные средства поступают в распоряжение получателя платежа только при наступлении новой «эпохи».<br/>
<br/>
В результате пользователь может отправлять транзакции вне зависимости от того, как часто ему поступают средства (насколько позволяет его баланс, разумеется). Размер эпохи определяют исходя из того, насколько быстро распространяются блоки по сети и как быстро транзакция попадает в блок. <br/>
<br/>
Это решение хорошо работает в случае конфиденциальных переводов, однако с анонимными транзакциями, как мы увидим далее, оно создает серьезные проблемы.<br/>
<br/>
<h4>Защита от replay-атак</h4><br/>
В account-based блокчейнах каждая транзакция подписывается приватным ключом отправителя, что убеждает проверяющего в том, что транзакция не была изменена и ее создал владелец этого ключа. Но что если злоумышленник, который прослушивал канал передачи, перехватит это сообщение и отправит точно такое же второе? Проверяющий сверит подпись транзакции и будет убежден в ее авторстве, и сеть спишет такую же сумму с баланса отправителя повторно.<br/>
<br/>
Эту атаку называют replay-атакой. В UTXO-модели такие атаки не актуальны, т. к. злоумышленник будет пытаться использовать потраченные выходы, что само по себе не валидно и отвергается сетью.<br/>
<br/>
Чтобы подобного не произошло, в транзакцию встраивают поле со случайными данными, которое называют nonce или просто «соль». При повторной отправке транзакции с «солью» проверяющий смотрит, использовался ли этот nonce ранее и, если нет, считает эту транзакцию валидной. Чтобы не хранить в блокчейне всю историю nonce-ов пользователей, обычно в самой первой транзакции его принимают равным нулю, а дальше увеличивают на единицу. Сети остается только проверить, что nonce новой транзакции отличается от прошлой на единицу.<br/>
<br/>
В анонимной схеме переводов встает проблема валидации nonce-ов транзакций. Мы не можем привязывать nonce явным способом к адресу отправителя, т. к., очевидно, это деанонимизирует перевод. Мы также не можем прибавлять единицу к nonce-ам всех участвующих аккаунтов, т. к. это может конфликтовать с другими переводами, находящимися в обработке. <br/>
<br/>
Авторы Zether предлагают генерировать nonce криптографически — в зависимости от «эпохи». Например:<br/>
<br/>
<div style="text-align:center;"><img src="/img/image-loader.svg" alt="image" data-src="https://habrastorage.org/webt/5q/ku/zu/5qkuzus5hr-5168x4ieihiwtbjw.png"/></div><br/>
Здесь <b><i>x</i></b> — секретный ключ отправителя, а <b><i>G<sub>epoch</sub></i></b> — дополнительный генератор для эпохи, получаемый хэшированием строки вида 'Zether + '. Теперь проблема, казалось бы, решается — мы не раскрываем nonce отправителя и не вмешиваемся в nonce-ы непричастных участников. Но такой подход накладывает серьезное ограничение: один аккаунт может отправить не более одной транзакции в «эпоху». Эта проблема, к сожалению, остается нерешенной, и на текущий момент делает анонимную версию Zether, на наш взгляд, едва ли пригодной для использования.<br/>
<br/>
<h4>Сложность доказательств с нулевым разглашением</h4><br/>
В UTXO отправитель должен доказать сети, что не тратит отрицательную сумму, иначе становится возможной генерация новых монет из воздуха (почему это возможно, мы писали в одной из предыдущих <a href="https://habr.com/ru/company/exante/blog/421913/">статей</a>). А также подписать «входы» кольцевой подписью, чтобы доказать, что среди замешиваемых монет есть средства, принадлежащие ему.<br/>
<br/>
В анонимной версии account-based блокчейна выражения для доказательства получаются намного сложнее. Отправитель доказывает, что:<br/>
<br/>
<ol>
<li>Отправляемая сумма положительна;</li>
<li>Баланс остается неотрицательным;</li>
<li>Отправитель правильно зашифровал суммы переводов (в том числе нулевые);</li>
<li>Остаток на балансе изменяется только у отправителя и получателя;</li>
<li>Отправитель владеет секретным ключом от своего аккаунта и он действительно присутствует в списке отправителей (среди замешанных);</li>
<li>Nonce, используемый в транзакции, составлен правильно.</li>
</ol><br/>
Для такого сложного доказательства авторы используют смесь <a href="https://eprint.iacr.org/2017/1066.pdf">Bulletproof</a> (один из авторов, к слову, принимал участие в ее создании) и <a href="https://en.wikipedia.org/wiki/Proof_of_knowledge#Sigma_protocols">Sigma protocol</a>, которую называют Sigma-bullets. Формальное доказательство такого утверждения — довольно сложная задача, и оно сильно ограничивает число желающих заняться реализацией технологии.<br/>
<br/>
<h4>Что в итоге?</h4><br/>
На наш взгляд, часть Zether, привносящая конфиденциальность в account-based блокчейны, вполне может использоваться уже сейчас. Но на данный момент анонимная версия технологии накладывает серьезные ограничения на ее использование, а ее сложность — на реализацию. Однако не стоит сбрасывать со счетов, что авторы выпустили ее всего лишь несколько месяцев назад, и, возможно, кто-то другой найдет решение для имеющихся сегодня проблем. Ведь именно так делается наука.</div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B1%D0%BB%D0%BE%D0%BA%D1%87%D0%B5%D0%B9%D0%BD%5D" class="tm-tags-list__link">блокчейн</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bmonero%5D" class="tm-tags-list__link">monero</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BUTXO%5D" class="tm-tags-list__link">UTXO</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5BZether%5D" class="tm-tags-list__link">Zether</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/company/exante/blog/" class="tm-hubs-list__link router-link-active">
    Блог компании EXANTE
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/distributed_systems/" class="tm-hubs-list__link">
    Распределённые системы
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 10: ↑9 и ↓1</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 10: ↑9 и ↓1" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+8</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">1.2K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    11
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a href="/ru/company/exante/profile/" class="tm-company-snippet__logo-link"><div class="tm-entity-image"><img alt="" height="40" src="//habrastorage.org/getpro/habr/company/eff/f4f/59b/efff4f59b0c040c136de92df84779738.png" width="40" class="tm-entity-image__pic"></div></a> <div class="tm-company-snippet__info"><a href="/ru/company/exante/profile/" class="tm-company-snippet__title">EXANTE</a> <div class="tm-company-snippet__description">Инвестиционная компания нового поколения</div></div></div> <div class="tm-article-author__buttons"><!----> <!----></div></div> <div class="tm-article-author__company-contacts"><a href="https://exante.eu/ru/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div> <div class="tm-article-author__separator"></div></div> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/Exantech/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><img alt="" src="//habrastorage.org/getpro/habr/avatars/224/495/e8f/224495e8fe38f6c74592165e7cac893c.png" class="tm-entity-image__pic"></div></a> <div class="tm-user-card__meta"><div title=" 20 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    14
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/Exantech/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @Exantech
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <div class="tm-article-author__user-contacts"><a href="https://exan.tech/" rel="noopener" target="_blank" class="tm-article-author__contact">
      Сайт
    </a></div></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/company/exante/blog/452184/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментировать 
    </span></a> <!----></div></div></div>  <!---->  <!----> <!----></div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <section class="tm-block tm-block_spacing-bottom"><header class="tm-block__header"><h2 class="tm-block__title">Информация</h2> <!----></header> <div class="tm-block__body"><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата основания</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2011-02-28T21:00:00.000Z" title="2011-03-01, 00:00">1  марта  2011</time></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Местоположение</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    Мальта
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Сайт</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><a href="https://exante.eu/ru/" target="_blank" class="tm-company-basic-info__link">
      exante.eu
    </a></dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Численность</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap">
    101–200 человек
  </dd></dl> <dl class="tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap">Дата регистрации</dt> <dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap"><time datetime="2016-11-30T08:12:35.000Z" title="2016-11-30, 11:12">30  ноября  2016</time></dd></dl> <!----></div></div> <!----></section> <!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/company/exante/blog/452184/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/company/exante/blog/452184/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"452184":{"id":"452184","timePublished":"2019-05-20T11:13:48+00:00","isCorporative":true,"lang":"ru","titleHtml":"Об анонимности в account-based блокчейнах","leadData":{"textHtml":"Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fexante\u002Fblog\u002F421913\u002F\"\u003Eконфиденциальных транзакций\u003C\u002Fa\u003E в Monero, а также проводили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fexante\u002Fblog\u002F438346\u002F\"\u003Eсравнительный обзор\u003C\u002Fa\u003E технологий, существующих на этом поле. Однако же все анонимные криптовалюты на сегодняшний день построены на модели данных, предложенной Bitcoin — Unspent Transaction Output (далее UTXO). Для account-based блокчейнов как Ethereum существующие решения по реализации анонимности и конфиденциальности (например, \u003Ca href=\"https:\u002F\u002Feprint.iacr.org\u002F2017\u002F881.pdf\"\u003EMobius\u003C\u002Fa\u003E или \u003Ca href=\"https:\u002F\u002Fwww.aztecprotocol.com\u002F\"\u003EAztec\u003C\u002Fa\u003E) пытались повторить модель UTXO в смарт-контрактах.\u003Cbr\u003E\r\n\u003Cbr\u003E\r\nВ феврале 2019 года группа исследователей из Стэнфордского университета и Visa Research","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[],"author":{"scoreStats":{"score":14,"votesCount":20},"rating":0,"relatedData":null,"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fexan.tech\u002F","value":"https:\u002F\u002Fexan.tech\u002F"}],"authorContacts":[{"title":"Сайт","url":"https:\u002F\u002Fexan.tech\u002F","value":"https:\u002F\u002Fexan.tech\u002F"}],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"1733833","alias":"Exantech","fullname":null,"avatarUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Favatars\u002F224\u002F495\u002Fe8f\u002F224495e8fe38f6c74592165e7cac893c.png","speciality":"Пользователь"},"statistics":{"commentsCount":0,"favoritesCount":11,"readingCount":1221,"score":8,"votesCount":10},"hubs":[{"relatedData":null,"id":"20900","alias":"exante","type":"corporative","title":"Блог компании EXANTE","titleHtml":"Блог компании EXANTE","isProfiled":false},{"relatedData":null,"id":"21482","alias":"distributed_systems","type":"collective","title":"Распределённые системы","titleHtml":"Распределённые системы","isProfiled":true}],"flows":[{"id":"6","alias":"admin","title":"Администрирование"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003EМы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fexante\u002Fblog\u002F421913\u002F\"\u003Eконфиденциальных транзакций\u003C\u002Fa\u003E в Monero, а также проводили \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fexante\u002Fblog\u002F438346\u002F\"\u003Eсравнительный обзор\u003C\u002Fa\u003E технологий, существующих на этом поле. Однако же все анонимные криптовалюты на сегодняшний день построены на модели данных, предложенной Bitcoin — Unspent Transaction Output (далее UTXO). Для account-based блокчейнов как Ethereum существующие решения по реализации анонимности и конфиденциальности (например, \u003Ca href=\"https:\u002F\u002Feprint.iacr.org\u002F2017\u002F881.pdf\"\u003EMobius\u003C\u002Fa\u003E или \u003Ca href=\"https:\u002F\u002Fwww.aztecprotocol.com\u002F\"\u003EAztec\u003C\u002Fa\u003E) пытались повторить модель UTXO в смарт-контрактах.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ феврале 2019 года группа исследователей из Стэнфордского университета и Visa Research\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003E выпустили \u003Ca href=\"https:\u002F\u002Fcrypto.stanford.edu\u002F~buenz\u002Fpapers\u002Fzether.pdf\"\u003Eпрепринт\u003C\u002Fa\u003E «Zether: Навстречу приватности в мире смарт-контрактов». Авторы впервые предложили подход к обеспечению анонимности в account-based блокчейнах и представили два варианта смарт-контракта: для конфиденциальных (сокрытие балансов и сумм переводов) и анонимных (сокрытие получателя и отправителя) транзакций. Мы находим предложенную технологию интересной и хотели бы поделиться ее устройством, а также поговорить о том, почему проблема анонимности в account-based блокчейнах считается очень сложной и удалось ли авторам решить ее в полной мере.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ccut\u003E\u003C\u002Fcut\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EОб устройстве этих моделей данных\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nВ UTXO-модели транзакция состоит из «входов» и «выходов». Прямой аналог «выходам» — купюры в вашем кошельке: каждый «выход» имеет какой-то номинал. Когда вы расплачиваетесь с кем-то (формируете транзакцию) вы тратите один или несколько «выходов», при этом они становятся «входами» транзакции, и блокчейн помечает их как потраченные. При этом получатель вашего платежа (или же вы сами, если вам нужна сдача) получает вновь сгенерированные «выходы». Схематично это можно изобразить так:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Ftj\u002Fed\u002F8o\u002Ftjed8olalcrirbjpupoms6bwejo.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nAccount-based блокчейны устроены примерно как ваш банковский счет. Они оперируют только суммой на вашем счету и суммой перевода. Когда вы переводите какую-то сумму со своего счета, то не сжигаете никакие «выходы», сети не нужно запоминать, какие монеты потрачены, а какие нет. В простейшем случае проверка транзакции сводится к проверке подписи отправителя и суммы на его балансе:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fkw\u002Fpg\u002Fzn\u002Fkwpgzn1wg1mmztznetqntcdfbca.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch3\u003EРазбор технологии\u003C\u002Fh3\u003E\u003Cbr\u002F\u003E\r\nДалее мы поговорим о том, как Zether скрывает сумму транзакций, получателя и отправителя. По ходу описания принципов его работы мы будем отмечать различия в конфиденциальном и анонимном варианте. Так как обеспечить конфиденциальность в account-based блокчейнах намного проще, то некоторые из ограничений, накладываемых анонимизацией, будут неактуальны для конфиденциальной версии технологии.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EСокрытие балансов и сумм переводов\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nДля шифрования балансов и сумм переводов в Zether используется схема шифрования \u003Ca href=\"https:\u002F\u002Fru.wikipedia.org\u002Fwiki\u002F%D0%A1%D1%85%D0%B5%D0%BC%D0%B0_%D0%AD%D0%BB%D1%8C-%D0%93%D0%B0%D0%BC%D0%B0%D0%BB%D1%8F\"\u003EЭль-Гамаля\u003C\u002Fa\u003E. Работает она следующим образом. Когда Алиса хочет послать Бобу \u003Ci\u003E\u003Cb\u003Eb\u003C\u002Fb\u003E\u003C\u002Fi\u003E монет по адресу (его публичному ключу) \u003Ci\u003E\u003Cb\u003EY\u003C\u002Fb\u003E\u003C\u002Fi\u003E, она выбирает случайное число \u003Ci\u003E\u003Cb\u003Er\u003C\u002Fb\u003E\u003C\u002Fi\u003E и шифрует сумму:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fky\u002Ft6\u002F3x\u002Fkyt63xxqcoleppvesgfpoubyj8y.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nгде \u003Ci\u003E\u003Cb\u003EC\u003C\u002Fb\u003E\u003C\u002Fi\u003E — зашифрованная сумма, \u003Ci\u003E\u003Cb\u003ED\u003C\u002Fb\u003E\u003C\u002Fi\u003E — вспомогательное значение, необходимое для расшифровки этой суммы, \u003Ci\u003E\u003Cb\u003EG\u003C\u002Fb\u003E\u003C\u002Fi\u003E — фиксированная точка на эллиптической кривой, при умножении секретного ключа на которую получается публичный ключ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nКогда Боб получает эти значения, он просто прибавляет их к своему зашифрованному таким же способом балансу, чем и удобна эта схема.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАналогичным образом Алиса вычитает из своего баланса такие же значения, только в качестве \u003Ci\u003E\u003Cb\u003EY\u003C\u002Fb\u003E\u003C\u002Fi\u003E использует свой публичный ключ.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EСокрытие адресата и отправителя\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nЗамешивание «выходов» в UTXO появилось еще на заре криптовалют и помогает скрыть отправителя. Для этого сам отправитель при совершении перевода набирает случайные «выходы» в блокчейне и замешивает их со своими. Далее подписывает «выходы» кольцевой подписью — криптографическим механизмом, позволяющим убедить проверяющего в том, что среди замешанных «выходов» присутствуют монеты отправителя. Сами замешанные монеты, разумеется, не тратятся.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nОднако для сокрытия получателя нам не удастся генерировать фальшивые «выходы». Поэтому в UTXO у каждого «выхода» свой уникальный адрес, и он криптографически связан с адресом получателя этих монет. На данный момент нет способа выявить связь между уникальным адресом «выхода» и адресом получателя, не зная его секретных ключей.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ account-based модели мы не можем использовать одноразовые адреса (иначе это уже будет модель «выходов»). Поэтому получателя и отправителя приходится замешивать среди других аккаунтов в блокчейне. При этом с замешиваемых аккаунтов списывается зашифрованный 0 монет (или прибавляется 0 — в случае замешивания получателя), фактически не меняя их реальный баланс.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nТак как и отправитель, и получатель всегда имеют постоянный адрес, здесь возникает необходимость при переводах на одни и те же адреса использовать для замешивания одни и те же группы. Проще рассмотреть это на примере.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДопустим, Алиса решила сделать взнос в благотворительный фонд Боба, но предпочитает, чтобы этот перевод оставался анонимными для стороннего наблюдателя. Тогда, чтобы замаскировать себя в поле отправителя, она вписывает еще аккаунты Адама и Адель. А чтобы скрыть Боба — в поле получателя дополнительно аккаунты Бена и Билла. Делая следующий взнос, Алиса решила рядом с собой вписать Алекса и Аманду, а рядом с Бобом — Брюса и Бенджена. В этом случае при анализе блокчейна в этих двух транзакциях найдется всего лишь одна пересекающаяся пара участников — Алиса и Боб, что деанонимизирует эти транзакции.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fdj\u002Fo6\u002Fx0\u002Fdjo6x0r31q3_bzpa78t0cklzt_i.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EГонки транзакций\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nКак мы уже упоминали, для сокрытия своего баланса в account-based системах пользователь шифрует свой баланс и сумму перевода. При этом он должен доказать, что остаток на его счете остается неотрицательным. Проблема заключается в том, что формируя транзакцию, пользователь строит доказательство относительно своего текущего состояния счета. А что будет, если Боб отправит Алисе транзакцию, и она будет принята раньше, чем отправленная Алисой? Тогда транзакция Алисы будет считаться невалидной, т. к. доказательство баланса было построено до принятия транзакции Боба.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002Fbn\u002Fd0\u002F7z\u002Fbnd07z43bu5m76fbbvjlvda7ek0.png\"\u002F\u003E\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nПервое решение, которое приходит в такой ситуации — замораживать аккаунт до проведения транзакции. Но этот подход не годится, т. к. помимо сложности решения такой задачи в распределенной системе, в анонимной схеме будет непонятно, чей аккаунт блокировать.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nДля решения этой проблемы технология разделяет входящие и исходящие транзакции: расходование средств имеет незамедлительный эффект на состояние баланса, а поступления — отложенный. Для этого вводится понятие «эпохи» — группы блоков фиксированного размера. Текущая «эпоха» определяется делением высоты блока на размер группы. Обрабатывая транзакцию, сеть обновляет баланс отправителя сразу, а средства получателя складывает в накопитель. Накопленные средства поступают в распоряжение получателя платежа только при наступлении новой «эпохи».\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ результате пользователь может отправлять транзакции вне зависимости от того, как часто ему поступают средства (насколько позволяет его баланс, разумеется). Размер эпохи определяют исходя из того, насколько быстро распространяются блоки по сети и как быстро транзакция попадает в блок. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭто решение хорошо работает в случае конфиденциальных переводов, однако с анонимными транзакциями, как мы увидим далее, оно создает серьезные проблемы.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЗащита от replay-атак\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВ account-based блокчейнах каждая транзакция подписывается приватным ключом отправителя, что убеждает проверяющего в том, что транзакция не была изменена и ее создал владелец этого ключа. Но что если злоумышленник, который прослушивал канал передачи, перехватит это сообщение и отправит точно такое же второе? Проверяющий сверит подпись транзакции и будет убежден в ее авторстве, и сеть спишет такую же сумму с баланса отправителя повторно.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЭту атаку называют replay-атакой. В UTXO-модели такие атаки не актуальны, т. к. злоумышленник будет пытаться использовать потраченные выходы, что само по себе не валидно и отвергается сетью.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nЧтобы подобного не произошло, в транзакцию встраивают поле со случайными данными, которое называют nonce или просто «соль». При повторной отправке транзакции с «солью» проверяющий смотрит, использовался ли этот nonce ранее и, если нет, считает эту транзакцию валидной. Чтобы не хранить в блокчейне всю историю nonce-ов пользователей, обычно в самой первой транзакции его принимают равным нулю, а дальше увеличивают на единицу. Сети остается только проверить, что nonce новой транзакции отличается от прошлой на единицу.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ анонимной схеме переводов встает проблема валидации nonce-ов транзакций. Мы не можем привязывать nonce явным способом к адресу отправителя, т. к., очевидно, это деанонимизирует перевод. Мы также не можем прибавлять единицу к nonce-ам всех участвующих аккаунтов, т. к. это может конфликтовать с другими переводами, находящимися в обработке. \u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nАвторы Zether предлагают генерировать nonce криптографически — в зависимости от «эпохи». Например:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Cdiv style=\"text-align:center;\"\u003E\u003Cimg src=\"\u002Fimg\u002Fimage-loader.svg\" alt=\"image\" data-src=\"https:\u002F\u002Fhabrastorage.org\u002Fwebt\u002F5q\u002Fku\u002Fzu\u002F5qkuzus5hr-5168x4ieihiwtbjw.png\"\u002F\u003E\u003C\u002Fdiv\u003E\u003Cbr\u002F\u003E\r\nЗдесь \u003Cb\u003E\u003Ci\u003Ex\u003C\u002Fi\u003E\u003C\u002Fb\u003E — секретный ключ отправителя, а \u003Cb\u003E\u003Ci\u003EG\u003Csub\u003Eepoch\u003C\u002Fsub\u003E\u003C\u002Fi\u003E\u003C\u002Fb\u003E — дополнительный генератор для эпохи, получаемый хэшированием строки вида 'Zether + '. Теперь проблема, казалось бы, решается — мы не раскрываем nonce отправителя и не вмешиваемся в nonce-ы непричастных участников. Но такой подход накладывает серьезное ограничение: один аккаунт может отправить не более одной транзакции в «эпоху». Эта проблема, к сожалению, остается нерешенной, и на текущий момент делает анонимную версию Zether, на наш взгляд, едва ли пригодной для использования.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EСложность доказательств с нулевым разглашением\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nВ UTXO отправитель должен доказать сети, что не тратит отрицательную сумму, иначе становится возможной генерация новых монет из воздуха (почему это возможно, мы писали в одной из предыдущих \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fcompany\u002Fexante\u002Fblog\u002F421913\u002F\"\u003Eстатей\u003C\u002Fa\u003E). А также подписать «входы» кольцевой подписью, чтобы доказать, что среди замешиваемых монет есть средства, принадлежащие ему.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\nВ анонимной версии account-based блокчейна выражения для доказательства получаются намного сложнее. Отправитель доказывает, что:\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Col\u003E\r\n\u003Cli\u003EОтправляемая сумма положительна;\u003C\u002Fli\u003E\r\n\u003Cli\u003EБаланс остается неотрицательным;\u003C\u002Fli\u003E\r\n\u003Cli\u003EОтправитель правильно зашифровал суммы переводов (в том числе нулевые);\u003C\u002Fli\u003E\r\n\u003Cli\u003EОстаток на балансе изменяется только у отправителя и получателя;\u003C\u002Fli\u003E\r\n\u003Cli\u003EОтправитель владеет секретным ключом от своего аккаунта и он действительно присутствует в списке отправителей (среди замешанных);\u003C\u002Fli\u003E\r\n\u003Cli\u003ENonce, используемый в транзакции, составлен правильно.\u003C\u002Fli\u003E\r\n\u003C\u002Fol\u003E\u003Cbr\u002F\u003E\r\nДля такого сложного доказательства авторы используют смесь \u003Ca href=\"https:\u002F\u002Feprint.iacr.org\u002F2017\u002F1066.pdf\"\u003EBulletproof\u003C\u002Fa\u003E (один из авторов, к слову, принимал участие в ее создании) и \u003Ca href=\"https:\u002F\u002Fen.wikipedia.org\u002Fwiki\u002FProof_of_knowledge#Sigma_protocols\"\u003ESigma protocol\u003C\u002Fa\u003E, которую называют Sigma-bullets. Формальное доказательство такого утверждения — довольно сложная задача, и оно сильно ограничивает число желающих заняться реализацией технологии.\u003Cbr\u002F\u003E\r\n\u003Cbr\u002F\u003E\r\n\u003Ch4\u003EЧто в итоге?\u003C\u002Fh4\u003E\u003Cbr\u002F\u003E\r\nНа наш взгляд, часть Zether, привносящая конфиденциальность в account-based блокчейны, вполне может использоваться уже сейчас. Но на данный момент анонимная версия технологии накладывает серьезные ограничения на ее использование, а ее сложность — на реализацию. Однако не стоит сбрасывать со счетов, что авторы выпустили ее всего лишь несколько месяцев назад, и, возможно, кто-то другой найдет решение для имеющихся сегодня проблем. Ведь именно так делается наука.\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"блокчейн"},{"titleHtml":"monero"},{"titleHtml":"UTXO"},{"titleHtml":"Zether"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F452184\u002Fb2a15305c152c7b7ef6bbcc75bf99a7f\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F452184\u002Fb2a15305c152c7b7ef6bbcc75bf99a7f\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fexante\\\u002Fblog\\\u002F452184\\\u002F\"},\"headline\":\"Об анонимности в account-based блокчейнах\",\"datePublished\":\"2019-05-20T14:13:48+03:00\",\"dateModified\":\"2019-10-21T17:32:38+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"Exantech\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fcompany\\\u002Fexante\\\u002Fblog\\\u002F452184\\\u002F#post-content-body\",\"about\":[\"c_exante\",\"h_distributed_systems\",\"f_admin\"],\"image\":[\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Ftj\\\u002Fed\\\u002F8o\\\u002Ftjed8olalcrirbjpupoms6bwejo.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fkw\\\u002Fpg\\\u002Fzn\\\u002Fkwpgzn1wg1mmztznetqntcdfbca.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fky\\\u002Ft6\\\u002F3x\\\u002Fkyt63xxqcoleppvesgfpoubyj8y.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fdj\\\u002Fo6\\\u002Fx0\\\u002Fdjo6x0r31q3_bzpa78t0cklzt_i.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fbn\\\u002Fd0\\\u002F7z\\\u002Fbnd07z43bu5m76fbbvjlvda7ek0.png\",\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002F5q\\\u002Fku\\\u002Fzu\\\u002F5qkuzus5hr-5168x4ieihiwtbjw.png\"]}","metaDescription":"Мы уже давно интересуемся темой анонимности в криптовалютах и стараемся следить за развитием технологий в этой области. В своих статьях мы уже подробно разбирали принципы работы конфиденциальных...","mainImageUrl":null,"amp":true},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":""},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{"exante":{"alias":"exante","imageUrl":"\u002F\u002Fhabrastorage.org\u002Fgetpro\u002Fhabr\u002Fcompany\u002Feff\u002Ff4f\u002F59b\u002Fefff4f59b0c040c136de92df84779738.png","titleHtml":"EXANTE","descriptionHtml":"Инвестиционная компания нового поколения","relatedData":null,"statistics":{"postsCount":16,"newsCount":0,"vacanciesCount":0,"employeesCount":7,"careerRating":null,"subscribersCount":90,"rating":0,"invest":null},"foundationDate":{"year":"2011","month":"03","day":"01"},"location":{"city":{"id":"667699","title":"Saint Julian's"},"region":{"id":"842","title":"Malta"},"country":{"id":"131","title":"Мальта"}},"siteUrl":"https:\u002F\u002Fexante.eu\u002Fru\u002F","staffNumber":"101–200 человек","registrationDate":"2016-11-30T08:12:35+00:00","representativeUser":null,"contacts":[{"title":"Сайт","url":"https:\u002F\u002Fexante.eu\u002Fru\u002F"}],"settings":{"analyticsSettings":[],"branding":null,"status":"expired"},"metadata":{"titleHtml":"EXANTE, Saint Julian's - Инвестиционная компания нового поколения с 1 марта 2011 г.","title":"EXANTE, Saint Julian's - Инвестиционная компания нового поколения с 1 марта 2011 г.","keywords":[],"descriptionHtml":"16 статей от авторов компании EXANTE","description":"16 статей от авторов компании EXANTE"},"aDeskSettings":null,"careerAlias":null,"maxCustomTrackerLinks":0}},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
