<!DOCTYPE html>
<html lang="ru" data-vue-meta="%7B%22lang%22:%7B%22ssr%22:%22ru%22%7D%7D">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover">
  <title>Как начать программировать в Adobe Illustrator. Часть вторая / Хабр</title>
  <style>
    /* cyrillic-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSxf6TF0.woff2) format('woff2');
      unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
    }

    /* cyrillic */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveQhf6TF0.woff2) format('woff2');
      unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
    }

    /* latin-ext */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveSBf6TF0.woff2) format('woff2');
      unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
    }

    /* latin */
    @font-face {
      font-family: 'Fira Sans';
      font-style: normal;
      font-weight: 500;
      font-display: swap;
      src: url(https://fonts.gstatic.com/s/firasans/v11/va9B4kDNxMZdWfMOD5VnZKveRhf6.woff2) format('woff2');
      unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
    }
  </style>
  <link rel="preload" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" as="script"><link rel="preload" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css" as="style"><link rel="preload" href="https://assets.habr.com/habr-web/js/app.c0af73e7.js" as="script">
  <link rel="stylesheet" href="https://assets.habr.com/habr-web/css/chunk-vendors.e7843cc0.css"><link rel="stylesheet" href="https://assets.habr.com/habr-web/css/app.02ee25a4.css">
  <script>window.i18nFetch = new Promise((res, rej) => {
          const xhr = new XMLHttpRequest();
          xhr.open('GET', '/js/i18n/ru-compiled.85eb77f0b17c8235e7b64b9f81ea5ec2.json');
          xhr.responseType = 'json';
          xhr.onload = function(e) {
            if (this.status === 200) {
              res({ru: xhr.response});
            } else {
              rej(e);
            }
          };
          xhr.send();
        });</script>
  
  <script data-vue-meta="ssr" src="/js/ads.js" onload="window['zhY4i4nJ9K'] = true" data-vmid="checkad"></script><script data-vue-meta="ssr" type="application/ld+json" data-vmid="ldjson-schema">{"@context":"http:\/\/schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/habr.com\/ru\/post\/452614\/"},"headline":"Как начать программировать в Adobe Illustrator. Часть вторая","datePublished":"2019-05-20T12:27:09+03:00","dateModified":"2019-05-22T12:12:07+03:00","author":{"@type":"Person","name":"romaya"},"publisher":{"@type":"Organization","name":"Habr","logo":{"@type":"ImageObject","url":"https:\/\/habrastorage.org\/webt\/a_\/lk\/9m\/a_lk9mjkccjox-zccjrpfolmkmq.png"}},"description":"Этот пост &mdash; продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основн...","url":"https:\/\/habr.com\/ru\/post\/452614\/#post-content-body","about":["h_javascript","h_programming","h_vector_graphics","f_develop","f_design"],"image":["https:\/\/habr.com\/share\/publication\/452614\/f6d1f8ec8eb14af0a1834dcbd401b33d\/"]}</script>
  <script src="//www.googletagservices.com/tag/js/gpt.js" async></script>
  <style>.grecaptcha-badge{visibility: hidden;}</style>
  <meta name="habr-version" content="2.49.0">
  
  <meta data-vue-meta="ssr" property="fb:app_id" content="444736788986613"><meta data-vue-meta="ssr" property="fb:pages" content="472597926099084"><meta data-vue-meta="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-meta="ssr" name="twitter:site" content="@habr_eng"><meta data-vue-meta="ssr" property="og:title" content="Как начать программировать в Adobe Illustrator. Часть вторая" data-vmid="og:title"><meta data-vue-meta="ssr" name="twitter:title" content="Как начать программировать в Adobe Illustrator. Часть вторая" data-vmid="twitter:title"><meta data-vue-meta="ssr" name="aiturec:title" content="Как начать программировать в Adobe Illustrator. Часть вторая" data-vmid="aiturec:title"><meta data-vue-meta="ssr" name="description" content="Этот пост — продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ..." data-vmid="description"><meta data-vue-meta="ssr" itemprop="description" content="Этот пост — продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ..." data-vmid="description:itemprop"><meta data-vue-meta="ssr" property="og:description" content="Этот пост — продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ..." data-vmid="og:description"><meta data-vue-meta="ssr" name="twitter:description" content="Этот пост — продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ..." data-vmid="twitter:description"><meta data-vue-meta="ssr" property="aiturec:description" content="Этот пост — продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ..." data-vmid="aiturec:description"><meta data-vue-meta="ssr" itemprop="image" content="https://habr.com/share/publication/452614/f6d1f8ec8eb14af0a1834dcbd401b33d/" data-vmid="image:itemprop"><meta data-vue-meta="ssr" property="og:image" content="https://habr.com/share/publication/452614/f6d1f8ec8eb14af0a1834dcbd401b33d/" data-vmid="og:image"><meta data-vue-meta="ssr" property="aiturec:image" content="https://habr.com/share/publication/452614/f6d1f8ec8eb14af0a1834dcbd401b33d/" data-vmid="aiturec:image"><meta data-vue-meta="ssr" name="twitter:image" content="https://habr.com/share/publication/452614/f6d1f8ec8eb14af0a1834dcbd401b33d/" data-vmid="twitter:image"><meta data-vue-meta="ssr" property="vk:image" content="https://habr.com/share/publication/452614/f6d1f8ec8eb14af0a1834dcbd401b33d/" data-vmid="vk:image"><meta data-vue-meta="ssr" property="aiturec:item_id" content="452614" data-vmid="aiturec:item_id"><meta data-vue-meta="ssr" property="aiturec:datetime" content="2019-05-20T09:27:09.000Z" data-vmid="aiturec:datetime"><meta data-vue-meta="ssr" property="og:type" content="article" data-vmid="og:type"><meta data-vue-meta="ssr" property="og:locale" content="ru_RU" data-vmid="og:locale"><meta data-vue-meta="ssr" property="og:image:width" content="1200" data-vmid="og:image:width"><meta data-vue-meta="ssr" property="og:image:height" content="630" data-vmid="og:image:height">
  <link data-vue-meta="ssr" href="https://habr.com/ru/rss/post/452614/?fl=ru" type="application/rss+xml" title="" rel="alternate" name="rss"><link data-vue-meta="ssr" href="https://habr.com/ru/post/452614/" rel="canonical" data-vmid="canonical"><link data-vue-meta="ssr" data-vmid="hreflang"><link data-vue-meta="ssr" image_src="image" href="https://habr.com/share/publication/452614/f6d1f8ec8eb14af0a1834dcbd401b33d/" data-vmid="image:href">
  <meta name="apple-mobile-web-app-status-bar-style" content="#303b44">
  <meta name="msapplication-TileColor" content="#629FBC">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="16x16"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-16.png"
  >
  <link
    rel="shortcut icon"
    type="image/png"
    sizes="32x32"
    href="https://assets.habr.com/habr-web/img/favicons/favicon-32.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="76x76"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-76.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="120x120"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="152x152"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-152.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="180x180"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-180.png"
  >
  <link
    rel="apple-touch-icon"
    type="image/png"
    sizes="256x256"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-256.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1136x640.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2436x1125.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1792x828.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_828x1792.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1334x750.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2208x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1125x2436.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1242x2208.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2732x2048.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2688x1242.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2224x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_750x1334.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x2732.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2388x1668.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2224.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_640x1136.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1668x2388.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_2048x1536.png"
  >
  <link
    rel="apple-touch-startup-image"
    media="screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"
    href="https://assets.habr.com/habr-web/img/splashes/splash_1536x2048.png"
  >
  <link
    rel="mask-icon"
    color="#77a2b6"
    href="https://assets.habr.com/habr-web/img/favicons/apple-touch-icon-120.svg"
  >
  <link
    crossorigin="use-credentials"
    href="/manifest.webmanifest"
    rel="manifest"
  >
</head>
<body>


<div id="app" data-server-rendered="true" data-async-called="true"><div class="tm-layout__wrapper"><!----> <div></div> <!----> <header class="tm-header"><div class="tm-page-width"><div class="tm-header__container"><!----> <span class="tm-header__logo-wrap"><a href="/ru/" class="tm-header__logo tm-header__logo_ru"><svg height="16" width="16" class="tm-svg-img tm-header__icon"><title>Хабр</title> <use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a> <span class="tm-header__beta-sign" style="display:none;">β</span></span> <div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><button class="tm-header__dropdown-toggle"><svg height="16" width="16" class="tm-svg-img tm-header__icon tm-header__icon_dropdown"><title>Открыть список</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#arrow-down"></use></svg></button></div> <!----></div> <a href="/ru/sandbox/start/" class="tm-header__become-author-btn">
            Как стать автором
          </a> <div class="tm-feature tm-header__feature tm-feature_variant-inline"><!----></div> <!----> <!----></div></div></header> <div class="tm-layout"><div class="tm-page-progress-bar"></div> <div data-menu-sticky="true" class="tm-base-layout__header tm-base-layout__header_is-sticky"><div class="tm-page-width"><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!----> <a href="/ru/all/" class="tm-main-menu__item">
        Все потоки
      </a> <a href="/ru/flows/develop/" class="tm-main-menu__item">
          Разработка
        </a><a href="/ru/flows/admin/" class="tm-main-menu__item">
          Администрирование
        </a><a href="/ru/flows/design/" class="tm-main-menu__item">
          Дизайн
        </a><a href="/ru/flows/management/" class="tm-main-menu__item">
          Менеджмент
        </a><a href="/ru/flows/marketing/" class="tm-main-menu__item">
          Маркетинг
        </a><a href="/ru/flows/popsci/" class="tm-main-menu__item">
          Научпоп
        </a></nav></div></div> <div class="tm-header-user-menu tm-base-layout__user-menu"><a href="/ru/search/" class="tm-header-user-menu__item tm-header-user-menu__search"><svg height="24" width="24" class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark"><title>Поиск</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#search"></use></svg></a> <!----> <!----> <!----> <div class="tm-header-user-menu__item tm-header-user-menu__user_desktop"><div class="tm-dropdown"><div class="tm-dropdown__head"><svg height="24" width="24" data-test-id="menu-toggle-guest" class="tm-svg-img tm-header-user-menu__icon"><title>Профиль</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#header-user"></use></svg> <!----></div> <!----></div> <!----></div> <!----></div></div></div></div> <!----> <div class="tm-page-width"></div> <main class="tm-layout__container"><div hl="ru" data-async-called="true" class="tm-page"><div class="tm-page-width"><!----> <div class="tm-page__wrapper"><div class="tm-page__main tm-page__main_has-sidebar"><div class="pull-down"><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg height="24" width="24" class="tm-svg-img pull-down__arrow"><title>Обновить</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#pull-arrow"></use></svg></div></div> <div class="tm-article-presenter"> <div class="tm-article-presenter__body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><div class="tm-article-presenter__header"> <div class="tm-article-snippet tm-article-presenter__snippet"><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a href="/ru/users/romaya/" title="romaya" class="tm-user-info__userpic"><div class="tm-entity-image"><svg height="24" width="24" class="tm-svg-img tm-image-placeholder tm-image-placeholder_pink"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <span class="tm-user-info__user"><a href="/ru/users/romaya/" class="tm-user-info__username">
      romaya
    </a> </span></span> <span class="tm-article-snippet__datetime-published"><time datetime="2019-05-20T09:27:09.000Z" title="2019-05-20, 12:27">20  мая  2019 в 12:27</time></span></div> <!----></div> <h1 lang="ru" class="tm-article-snippet__title tm-article-snippet__title_h1"><span>Как начать программировать в Adobe Illustrator. Часть вторая</span></h1> <div class="tm-article-snippet__hubs"><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/javascript/" class="tm-article-snippet__hubs-item-link"><span>JavaScript</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/programming/" class="tm-article-snippet__hubs-item-link"><span>Программирование</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span><span class="tm-article-snippet__hubs-item"><a href="/ru/hub/vector_graphics/" class="tm-article-snippet__hubs-item-link"><span>Работа с векторной графикой</span> <span title="Профильный хаб" class="tm-article-snippet__profiled-hub">*</span></a></span></div> <div class="tm-article-snippet__labels"><div class="tm-article-snippet__label"><span>
        Tutorial
      </span></div></div> <!----> <!----></div></div> <!----> <div data-gallery-root="" lang="ru" class="tm-article-body"><div id="post-content-body" class="article-formatted-body article-formatted-body_version-1"><div xmlns="http://www.w3.org/1999/xhtml"><p>Этот пост — продолжение <a href="https://habr.com/ru/post/452586/">первой части</a>, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ в целом. В этой части я продолжу рассказ о том, как добавить в программу новый функционал, чтобы из "заготовки" получить на выходе "готовое изделие". Здесь не обойтись без более глубокого погружения в предметную область, что является одним из необходимых условий создания полноценного продукта. Итак, начинаем погружение!</p><br/>
<p><a name="habracut"></a>В качестве контура маски в Adobe Illustrator могут быть использованы следующие графические примитивы: простой контур (Path), составной контур (Compound Path), составная форма (Compound Shape) и текстовые объекты (Point Text и Text on the Path). На данный момент скрипт работает только с простыми контурами, что видно из приведенного ниже кода, где <code>PathItem</code> — это обращение к элементу Path.</p><br/>
<pre><code class="javascript">      var clipGroup = sel[0].pageItems.length;
      for (var i = 0; i &lt; clipGroup; i++) {
        if (sel[0].pageItems[i].typename == 'PathItem' &amp;&amp;
            sel[0].pageItems[i].clipping == true) {
          clipPath = sel[0].pageItems[i];
          break;
        };
      };</code></pre><br/>
<p>Перед этим мы объявили переменную <code>clipPath</code>, но не присваили ей значение.</p><br/>
<pre><code class="javascript">      var clipPath;</code></pre><br/>
<p>Это значит, что ее значение пока не определено, т.е. оно <code>undefined</code>. Если сейчас выделить маску, контуром которой будет, скажем, Compound Path и запустить скрипт, то программа выдаст ошибку на последней строчке функциональной части скрипта,</p><br/>
<pre><code class="javascript">      clipPath.remove();</code></pre><br/>
<p>так как условие в цикле не будет выполнено, переменная <code>clipPath</code> так и останется <code>undefined</code>, а применить метод <code>remove()</code> к чему-то неопределенному невозможно. Чтобы не допустить такой ситуации, мы сделаем следующее — присвоим <code>clipPath</code> значение <code>null</code>, которое, в отличии от <code>undefined</code>, уже что-то более определенное, что можно хотя-бы проверить.</p><br/>
<blockquote>Давайте подумаем, как определить, что какой-то Compound Path является контуром нашей маски? Когда я говорю "давайте подумаем", это значит, что я предлагаю заглянуть в <a href="https://www.adobe.com/content/dam/acom/en/devnet/illustrator/pdf/Illustrator_Scriptin_Reference_JavaScript_cc.pdf">документацию</a> и найти нужное нам свойство. По аналогии с <code>PathItem</code> ищем свойство <code>clipping</code>. Оказывается, что у объекта <code>CompoundPathItem</code> нет такого свойства, зато есть свойство <code>pathItems</code>, через которое можно добраться до простых контуров <code>PathItem</code>, у которых свойство <code>clipping</code> имеется.</blockquote><p>Теперь можно превратить наши размышления/поиски в код. Первым делом проверяем, что <code>clipPath</code> в предыдущей итерации не был определен, а дальше копируем уже написанный блок кода и вносим в него небольшие изменения.</p><br/>
<pre><code class="javascript">      if (clipPath == null) {
        var clipGroup = sel[0].pageItems.length;
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp;
              sel[0].pageItems[i].pathItems[0].clipping == true) {
            clipPath = sel[0].pageItems[i];
            break;
          };
        };
      };</code></pre><br/>
<p>Собственно, изменения коснутся только одной строки. Как мы здесь видим, 'PathItem' поменялся на 'CompoundPathItem', а также добавилась новая конструкция 'pathItems[0]', с помощью который мы обращаемся к элементу составного контура.</p><br/>
<pre><code class="javascript">if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp; sel[0].pageItems[i].pathItems[0].clipping == true) {</code></pre><br/>
<p>Ниже приведен функциональный блок кода, созданный на данный момент.</p><br/>
<pre><code class="javascript">      var clipGroup = sel[0].pageItems.length;
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'PathItem' &amp;&amp;
              sel[0].pageItems[i].clipping == true) {
            clipPath = sel[0].pageItems[i];
            break;
          };
        };
      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp;
              sel[0].pageItems[i].pathItems[0].clipping == true) {
            clipPath = sel[0].pageItems[i];
            break;
          };
        };
      };</code></pre><br/>
<p>Следующий на очереди "пациент" — это Compound Shape (составная форма). Вот здесь становиться совсем интересно! В документации мы вообще не находим такого объекта. Что делать? Для начала давайте определим к какому классу объектов он относится. Чтобы выяснить это, напишем небольшой вспомогательный код, который потом выкинем. Как было сказано в <a href="https://habr.com/ru/post/452586/">первой части</a>, мы не касаемся вопроса используемых инструментов для написания/отладки кода. Поэтому предположим, что это будет отдельный файл, которой потом просто отправится в корзину. Код будет следующим:</p><br/>
<pre><code class="javascript">var obj = app.activeDocument.selection[0];
alert(obj.typename);</code></pre><br/>
<p>В первой строке мы создаем ссылку на выделенный объект, во второй — выводим сообщение о том, каким типом он является. Выделяем в Adobe Illustrator контур маски, т.е. тот самый объект Compound Shape и запускаем скрипт. В окне сообщения мы видим, что Compound Shape представляет из себя PluginItem. Избавляемся от вспомогательного кода, снова возвращаемся к документации, но не находим у PluginItem ни свойства clipping, ни pathItems. Вообще ничего, что помогло бы нам однозначно указать, что этот объект является контуром маски. Из скрипта даже нельзя определить, что это за plugin. Какой-то внешний модуль и всё тут!</p><br/>
<blockquote>Вот ведь засада! — восклицаете в сердцах вы. А мозг лихорадочно работает, в надежде решить нерешаемую задачу. И тогда, перебрав все возможные и невозможные варианты, вы в отчаянии нажимаете <code>Del</code> и удаляете ненавистный Compound Shape. И тут краем глаза на палитре <code>Layers</code> вы замечаете, что после этого действия, контейнер маски, который был <code>Clip Group</code>, стал просто <code>Group</code>. Что бы это могло значит? А то, что свойство <code>clipped</code> объекта-маски из <code>true</code> стало <code>false</code>. Вот оно, решение, которое может сработать! Конечно это, по-большому счету, hack, но какая разница, если он поможет определить искомый контур.</blockquote><p>Алгоритм определения контура маски, представленный объектом Compound Shape, тогда будет следующим: перебираем в цикле все объекты маски и, когда обнаруживаем PluginItem, то удаляем его и проверяем изменилось ли свойство <code>clipped</code> у контейнера маски. Если оно стало <code>false</code>, значит это и есть наш контур. Единственное, чтобы этот hack сработал, надо после удаления объекта обновить DOM Illustrator, что можно сделать методом <code>app.redraw()</code>. Потом еще надо не забыть вернуть удаленный объект, что делается методом <code>app.undo()</code>.</p><br/>
<p>Ниже приведен код для контура Compound Shape:</p><br/>
<pre><code class="javascript">      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'PluginItem') {
            sel[0].pageItems[i].remove();
            app.redraw();
            if (sel[0].clipped == false) {
              app.undo();
              clipPath = sel[0].pageItems[i];
              break;
            }
            else {
              app.undo();
            }
          };
        };
      };</code></pre><br/>
<p>Теперь из всех возможных вариантов типа объектов, которые могут быть контуром маски, остался только текст (или <code>TextFrameItem</code>, в терминологии <a href="https://www.adobe.com/content/dam/acom/en/devnet/illustrator/pdf/Illustrator_Scriptin_Reference_JavaScript_cc.pdf">illustrator scripting references</a>). Снова обращаемся к документации и опять не находим там свойства <code>clipping</code>. Но на этот раз мы уже не переживаем так сильно по этому поводу и спокойно выясняем, что у <code>TextFrameItem</code> есть свойство <code>kind</code>, которое определяет тип текстового объекта (<code>TextType</code>). Выясняем, что таких типов может быть три: AREATEXT, POINTTEXT и PATHTEXT. Первый тип нам не интересен, так как его нельзя использовать в качестве контура маски, а другие два еще как интересны. Остается только найти hack, который поможет нам определить теперь уже не контур, а текстовый объект, являющийся контуром маски. И этим hack-ом станет команда, Convert To Area Type, которая конвертирует POINTTEXT в AREATEXT. Как и в случае с Compound Shape, при этом происходит неявное изменение свойства <code>clipped</code>.</p><br/>
<p>Соответственно, код для TextFrameItem типа POINTTEXT будет следующим:</p><br/>
<pre><code class="javascript">      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;
              sel[0].pageItems[i].kind == 'TextType.POINTTEXT') {
            sel[0].pageItems[i].convertPointObjectToAreaObject();
            app.redraw();
            if (sel[0].clipped == false) {
              app.undo();
              clipPath = sel[0].pageItems[i];
              break;
            }
            else {
              app.undo();
            }
          };
        };
      };</code></pre><br/>
<p>Остался только <code>TextFrameItem</code> типа PATHTEXT. К сожалению, при конвертировании PATHTEXT в AREATEXT, свойство <code>clipped</code> не изменяется. Но так как это последний из возможных претендентов на звание "контур маски", то можно использовать именно такое его поведение. То есть проверяем, что после выполнения команды <code>Convert To Area Type</code> свойство <code>clipped</code> осталось <code>true</code>. Ниже приведен код для TextFrameItem типа PATHTEXT.</p><br/>
<pre><code class="javascript">      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;
              sel[0].pageItems[i].kind == 'TextType.PATHTEXT') {
            sel[0].pageItems[i].convertPointObjectToAreaObject();
            app.redraw();
            if (sel[0].clipped == true) {
             clipPath = sel[0].pageItems[i];
             break;
            }
            else {
              app.undo();
            }
          };
        };
      };</code></pre><br/>
<p>Таким образом, если собрать вместе последовательно написанные части кода, включая блок проверок, то мы получим такой код, выполнение которого, как было заявлено еще в <a href="https://habr.com/ru/post/452586/">первой части</a> поста, будет реализовывать действие новой команды Expand Clipping Mask в Adobe Illustrator.</p><br/>
<pre><code class="javascript">#target illustrator
if (app.documents.length > 0) {
  var doc = app.activeDocument;
  var sel = doc.selection;
  var clipPath = null;
  if (sel.length > 0) {
    if (sel[0].typename == 'GroupItem' &amp;&amp; sel[0].clipped == true) {
      var clipGroup = sel[0].pageItems.length;
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'PathItem' &amp;&amp;
              sel[0].pageItems[i].clipping == true) {
            clipPath = sel[0].pageItems[i];
            break;
          };
        };
      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp;
              sel[0].pageItems[i].pathItems[0].clipping == true) {
            clipPath = sel[0].pageItems[i];
            break;
          };
        };
      };
      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'PluginItem') {
            sel[0].pageItems[i].remove();
            app.redraw();
            if (sel[0].clipped == false) {
              app.undo();
              clipPath = sel[0].pageItems[i];
              break;
            }
            else {
              app.undo();
            }
          };
        };
      };
      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;
              sel[0].pageItems[i].kind == 'TextType.POINTTEXT') {
            sel[0].pageItems[i].convertPointObjectToAreaObject();
            app.redraw();
            if (sel[0].clipped == false) {
              app.undo();
              clipPath = sel[0].pageItems[i];
              break;
            }
            else {
              app.undo();
            }
          };
        };
      };
      if (clipPath == null) {
        for (var i = 0; i &lt; clipGroup; i++) {
          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;
              sel[0].pageItems[i].kind == 'TextType.PATHTEXT') {
            sel[0].pageItems[i].convertPointObjectToAreaObject();
            app.redraw();
            if (sel[0].clipped == true) {
              clipPath = sel[0].pageItems[i];
              break;
            }
            else {
              app.undo();
            }
          };
        };
      };
      app.executeMenuCommand('releaseMask');
      clipPath.remove();
    }
    else {
      alert ('Выделение не является объектом-маской!');
    };
  }
  else {
    alert ('Нет выделенных объектов!');
  };
}
else {
  alert ('Нет открытых документов!');
};</code></pre><br/>
<p>Здесь можно поставить точку. Нет, лучше точку с запятой.</p><br/>
<p>Надеюсь, этими постами я помог вам стать немного ближе к своей цели — начать программировать в Adobe Illustrator. Спасибо за внимание!</p></div></div> <!----> <!----></div> <div class="tm-article-presenter__meta"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D1%81%D0%BA%D1%80%D0%B8%D0%BF%D1%82%D1%8B%5D" class="tm-tags-list__link">скрипты</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Badobe%20illustrator%5D" class="tm-tags-list__link">adobe illustrator</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%BE%D0%B1%D1%83%D1%87%D0%B5%D0%BD%D0%B8%D0%B5%20%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8E%5D" class="tm-tags-list__link">обучение программированию</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5Bjavascript%5D" class="tm-tags-list__link">javascript</a></li><li class="tm-separated-list__item"><a href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=%5B%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F%20%D1%80%D1%83%D1%82%D0%B8%D0%BD%D0%BD%D1%8B%D1%85%20%D0%B4%D0%B5%D0%B9%D1%81%D1%82%D0%B2%D0%B8%D0%B9%5D" class="tm-tags-list__link">автоматизация рутинных действий</a></li></ul></div> <div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span> <ul class="tm-separated-list__list"><li class="tm-separated-list__item"><a href="/ru/hub/javascript/" class="tm-hubs-list__link">
    JavaScript
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/programming/" class="tm-hubs-list__link">
    Программирование
  </a></li><li class="tm-separated-list__item"><a href="/ru/hub/vector_graphics/" class="tm-hubs-list__link">
    Работа с векторной графикой
  </a></li></ul></div></div></article></div> <!----></div> <div class="tm-article-sticky-panel"><div class="tm-data-icons tm-article-sticky-panel__icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg height="16" width="16" class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon_medium"><title>Всего голосов 7: ↑7 и ↓0</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-rating"></use></svg> <span title="Всего голосов 7: ↑7 и ↓0" class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_medium">+7</span></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----> <span title="Количество просмотров" class="tm-icon-counter tm-data-icons__item"><svg height="16" width="16" class="tm-svg-img tm-icon-counter__icon"><title>Просмотры</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-views"></use></svg> <span class="tm-icon-counter__value">2.4K</span></span> <button title="Добавить в закладки" type="button" class="bookmarks-button tm-data-icons__item"><span title="Добавить в закладки" class="tm-svg-icon__wrapper bookmarks-button__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Добавить в закладки</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-favorite"></use></svg></span> <span title="Количество пользователей, добавивших публикацию в закладки" class="bookmarks-button__counter">
    24
  </span></button> <!----> <div title="Поделиться" class="tm-sharing tm-data-icons__item"><button type="button" class="tm-sharing__button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="tm-sharing__icon"><path fill="currentColor" d="M10.33.275l9.047 7.572a.2.2 0 010 .306l-9.048 7.572a.2.2 0 01-.328-.153V11c-8 0-9.94 6-9.94 6S-1 5 10 5V.428a.2.2 0 01.328-.153z"></path></svg></button> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> </div></div> <!----> <!----> <div class="tm-article-presenter__footer"><div class="tm-article-blocks"><!----> <section class="tm-block tm-block_spacing-bottom"><!----> <div class="tm-block__body tm-block__body_variant-balanced"><div class="tm-article-author"> <div class="tm-user-card tm-article-author__user-card tm-user-card_variant-article"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a href="/ru/users/romaya/" class="tm-user-card__userpic tm-user-card__userpic_size-40"><div class="tm-entity-image"><svg class="tm-svg-img tm-image-placeholder tm-image-placeholder_pink"><!----> <use xlink:href="/img/megazord-v24.ce74655c.svg#placeholder-user"></use></svg></div></a> <div class="tm-user-card__meta"><div title=" 6 голосов " class="tm-karma tm-user-card__karma"><div class="tm-karma__votes tm-karma__votes_positive">
    6
  </div> <div class="tm-karma__text">
    Карма
  </div></div> <div title="Рейтинг пользователя" class="tm-rating tm-user-card__rating"><div class="tm-rating__header"> <div class="tm-rating__counter">0</div></div> <div class="tm-rating__text">
    Рейтинг
  </div></div></div></div></div> <div class="tm-user-card__info tm-user-card__info_variant-article"><div class="tm-user-card__title tm-user-card__title_variant-article"><!----> <a href="/ru/users/romaya/" class="tm-user-card__nickname tm-user-card__nickname_variant-article">
          @romaya
        </a> <!----></div> <p class="tm-user-card__short-info tm-user-card__short-info_variant-article">Пользователь</p></div></div> <div class="tm-user-card__buttons tm-user-card__buttons_variant-article"><!----> <!----> <!----> <!----> <!----></div></div> <!----></div> <DIV class="v-portal" style="display:none;"></DIV></div> <!----></section> <div class="tm-article-blocks__comments"><div class="tm-article-page-comments"><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a href="/ru/post/452614/comments/" class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style"><svg height="16" width="16" class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted"><title>Комментарии</title> <use xlink:href="/img/megazord-v24.ce74655c.svg#counter-comments"></use></svg> <span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted">
       Комментарии 3 
    </span></a> <!----></div></div></div> <div class="tm-ad-banner__container tm-page-article__banner"><!----> <div id="articleBottomBanner" class="tm-ad-banner"></div></div> <!----> <!----> <!----> <!----> </div></div></div></div></div> <div class="tm-page__sidebar"><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__ads tm-layout-sidebar__ads_initial"><div class="tm-ad-banner__container tm-layout-sidebar__banner"><!----> <div id="sidebarBanner" class="tm-ad-banner"></div></div></div> <div class="tm-sexy-sidebar tm-sexy-sidebar_initial" style="margin-top:0px;"><!----> <!----></div></div></div></div></div></div></main> <!----></div> <div class="tm-footer-menu"><div class="tm-page-width"><div class="tm-footer-menu__container"><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Ваш аккаунт
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/post/452614/&amp;hl=ru" rel="nofollow" target="_self">
                Войти
              </a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/post/452614/&amp;hl=ru" rel="nofollow" target="_self">
                Регистрация
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Разделы
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/" class="footer-menu__item-link router-link-active">
                Публикации
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/news/" class="footer-menu__item-link">
                Новости
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/hubs/" class="footer-menu__item-link">
                Хабы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/companies/" class="footer-menu__item-link">
                Компании
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/users/" class="footer-menu__item-link">
                Авторы
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/sandbox/" class="footer-menu__item-link">
                Песочница
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Информация
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="/ru/docs/help/" class="footer-menu__item-link">
                Устройство сайта
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/authors/codex/" class="footer-menu__item-link">
                Для авторов
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/companies/corpblogs/" class="footer-menu__item-link">
                Для компаний
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/docs/docs/transparency/" class="footer-menu__item-link">
                Документы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement" target="_blank">
                Соглашение
              </a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/" target="_blank">
                Конфиденциальность
              </a></li></ul></div></div><div class="tm-footer-menu__block"><h3 class="tm-footer-menu__block-title">
          Услуги
        </h3> <div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQLwRfQmXibiUlWaRg-BAc38s7oM3lJiaPju7qmdJsp8ysIvZ_G-Npem0njJLMozE2bPHMpDqiI5hhy/pub?start=false&amp;loop=false&amp;delayms=60000&amp;slide=id.g91a03369cd_4_297" target="_blank">
                Реклама
              </a></li><li class="tm-footer-menu__list-item"><a href="https://habrastorage.org/storage/stuff/habr/service_price.pdf" target="_blank">
                Тарифы
              </a></li><li class="tm-footer-menu__list-item"><a href="https://docs.google.com/presentation/d/e/2PACX-1vQJJds8-Di7BQSP_guHxICN7woVYoN5NP_22ra-BIo4bqnTT9FR6fB-Ku2P0AoRpX0Ds-LRkDeAoD8F/pub?start=false&amp;loop=false&amp;delayms=60000" target="_blank">
                Контент
              </a></li><li class="tm-footer-menu__list-item"><a href="https://tmtm.timepad.ru/" target="_blank">
                Семинары
              </a></li><li class="tm-footer-menu__list-item"><a href="/ru/megaprojects/" class="footer-menu__item-link">
                Мегапроекты
              </a></li></ul></div></div></div></div></div> <div class="tm-footer"><div class="tm-page-width"><div class="tm-footer__container"><!----> <div class="tm-footer__social"><a href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Facebook</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Twitter</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>VK</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-vkontakte"></use></svg></a><a href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Telegram</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Youtube</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a href="https://zen.yandex.ru/habr" rel="nofollow noopener noreferrer" target="_blank" class="tm-svg-icon__wrapper tm-social-icons__icon"><svg height="16" width="16" class="tm-svg-img tm-svg-icon"><title>Яндекс Дзен</title> <use xlink:href="/img/social-icons-sprite.svg#social-logo-zen"></use></svg></a></div> <DIV class="v-portal" style="display:none;"></DIV> <button class="tm-footer__link"><!---->
        Настройка языка
      </button> <a href="/ru/about" class="tm-footer__link">
        О сайте
      </a> <a href="/ru/feedback/" class="tm-footer__link">
        Техническая поддержка
      </a> <!----> <a href="/berserk-mode-nope" class="tm-footer__link">
        Вернуться на старую версию
      </a> <div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2021 </span> <span class="tm-copyright__name">«<a href="https://company.habr.com/" rel="noopener" target="_blank" class="tm-copyright__link">Habr</a>»</span></span></div></div></div></div> <!----> <!----></div> <div class="vue-portal-target"></div></div>
<script>window.__INITIAL_STATE__={"adblock":{"hasAcceptableAdsFilter":false,"hasAdblock":false},"articlesList":{"articlesList":{"452614":{"id":"452614","timePublished":"2019-05-20T09:27:09+00:00","isCorporative":false,"lang":"ru","titleHtml":"Как начать программировать в Adobe Illustrator. Часть вторая","leadData":{"textHtml":"\u003Cp\u003EЭтот пост — продолжение \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F452586\u002F\"\u003Eпервой части\u003C\u002Fa\u003E, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ в целом. В этой части я продолжу рассказ о том, как добавить в программу новый функционал, чтобы из \"заготовки\" получить на выходе \"готовое изделие\". Здесь не обойтись без более глубокого погружения в предметную область, что является одним из необходимых условий создания полноценного продукта. Итак, начинаем погружение!\u003C\u002Fp\u003E\u003Cbr\u003E","imageUrl":null,"buttonTextHtml":"Читать дальше →","image":null},"editorVersion":"1.0","postType":"article","postLabels":[{"type":"tutorial","data":null}],"author":{"scoreStats":{"score":6,"votesCount":6},"rating":0,"relatedData":null,"contacts":[],"authorContacts":[],"paymentDetails":{"paymentYandexMoney":null,"paymentPayPalMe":null,"paymentWebmoney":null},"id":"799435","alias":"romaya","fullname":null,"avatarUrl":null,"speciality":null},"statistics":{"commentsCount":3,"favoritesCount":24,"readingCount":2365,"score":7,"votesCount":7},"hubs":[{"relatedData":null,"id":"357","alias":"javascript","type":"collective","title":"JavaScript","titleHtml":"JavaScript","isProfiled":true},{"relatedData":null,"id":"359","alias":"programming","type":"collective","title":"Программирование","titleHtml":"Программирование","isProfiled":true},{"relatedData":null,"id":"449","alias":"vector_graphics","type":"collective","title":"Работа с векторной графикой","titleHtml":"Работа с векторной графикой","isProfiled":true}],"flows":[{"id":"1","alias":"develop","title":"Разработка"},{"id":"2","alias":"design","title":"Дизайн"}],"relatedData":null,"textHtml":"\u003Cdiv xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxhtml\"\u003E\u003Cp\u003EЭтот пост — продолжение \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F452586\u002F\"\u003Eпервой части\u003C\u002Fa\u003E, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ в целом. В этой части я продолжу рассказ о том, как добавить в программу новый функционал, чтобы из \"заготовки\" получить на выходе \"готовое изделие\". Здесь не обойтись без более глубокого погружения в предметную область, что является одним из необходимых условий создания полноценного продукта. Итак, начинаем погружение!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003E\u003Ca name=\"habracut\"\u003E\u003C\u002Fa\u003EВ качестве контура маски в Adobe Illustrator могут быть использованы следующие графические примитивы: простой контур (Path), составной контур (Compound Path), составная форма (Compound Shape) и текстовые объекты (Point Text и Text on the Path). На данный момент скрипт работает только с простыми контурами, что видно из приведенного ниже кода, где \u003Ccode\u003EPathItem\u003C\u002Fcode\u003E — это обращение к элементу Path.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      var clipGroup = sel[0].pageItems.length;\n      for (var i = 0; i &lt; clipGroup; i++) {\n        if (sel[0].pageItems[i].typename == 'PathItem' &amp;&amp;\n            sel[0].pageItems[i].clipping == true) {\n          clipPath = sel[0].pageItems[i];\n          break;\n        };\n      };\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EПеред этим мы объявили переменную \u003Ccode\u003EclipPath\u003C\u002Fcode\u003E, но не присваили ей значение.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      var clipPath;\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЭто значит, что ее значение пока не определено, т.е. оно \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E. Если сейчас выделить маску, контуром которой будет, скажем, Compound Path и запустить скрипт, то программа выдаст ошибку на последней строчке функциональной части скрипта,\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      clipPath.remove();\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003Eтак как условие в цикле не будет выполнено, переменная \u003Ccode\u003EclipPath\u003C\u002Fcode\u003E так и останется \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E, а применить метод \u003Ccode\u003Eremove()\u003C\u002Fcode\u003E к чему-то неопределенному невозможно. Чтобы не допустить такой ситуации, мы сделаем следующее — присвоим \u003Ccode\u003EclipPath\u003C\u002Fcode\u003E значение \u003Ccode\u003Enull\u003C\u002Fcode\u003E, которое, в отличии от \u003Ccode\u003Eundefined\u003C\u002Fcode\u003E, уже что-то более определенное, что можно хотя-бы проверить.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EДавайте подумаем, как определить, что какой-то Compound Path является контуром нашей маски? Когда я говорю \"давайте подумаем\", это значит, что я предлагаю заглянуть в \u003Ca href=\"https:\u002F\u002Fwww.adobe.com\u002Fcontent\u002Fdam\u002Facom\u002Fen\u002Fdevnet\u002Fillustrator\u002Fpdf\u002FIllustrator_Scriptin_Reference_JavaScript_cc.pdf\"\u003Eдокументацию\u003C\u002Fa\u003E и найти нужное нам свойство. По аналогии с \u003Ccode\u003EPathItem\u003C\u002Fcode\u003E ищем свойство \u003Ccode\u003Eclipping\u003C\u002Fcode\u003E. Оказывается, что у объекта \u003Ccode\u003ECompoundPathItem\u003C\u002Fcode\u003E нет такого свойства, зато есть свойство \u003Ccode\u003EpathItems\u003C\u002Fcode\u003E, через которое можно добраться до простых контуров \u003Ccode\u003EPathItem\u003C\u002Fcode\u003E, у которых свойство \u003Ccode\u003Eclipping\u003C\u002Fcode\u003E имеется.\u003C\u002Fblockquote\u003E\u003Cp\u003EТеперь можно превратить наши размышления\u002Fпоиски в код. Первым делом проверяем, что \u003Ccode\u003EclipPath\u003C\u002Fcode\u003E в предыдущей итерации не был определен, а дальше копируем уже написанный блок кода и вносим в него небольшие изменения.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      if (clipPath == null) {\n        var clipGroup = sel[0].pageItems.length;\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp;\n              sel[0].pageItems[i].pathItems[0].clipping == true) {\n            clipPath = sel[0].pageItems[i];\n            break;\n          };\n        };\n      };\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСобственно, изменения коснутся только одной строки. Как мы здесь видим, 'PathItem' поменялся на 'CompoundPathItem', а также добавилась новая конструкция 'pathItems[0]', с помощью который мы обращаемся к элементу составного контура.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003Eif (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp; sel[0].pageItems[i].pathItems[0].clipping == true) {\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНиже приведен функциональный блок кода, созданный на данный момент.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      var clipGroup = sel[0].pageItems.length;\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'PathItem' &amp;&amp;\n              sel[0].pageItems[i].clipping == true) {\n            clipPath = sel[0].pageItems[i];\n            break;\n          };\n        };\n      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp;\n              sel[0].pageItems[i].pathItems[0].clipping == true) {\n            clipPath = sel[0].pageItems[i];\n            break;\n          };\n        };\n      };\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСледующий на очереди \"пациент\" — это Compound Shape (составная форма). Вот здесь становиться совсем интересно! В документации мы вообще не находим такого объекта. Что делать? Для начала давайте определим к какому классу объектов он относится. Чтобы выяснить это, напишем небольшой вспомогательный код, который потом выкинем. Как было сказано в \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F452586\u002F\"\u003Eпервой части\u003C\u002Fa\u003E, мы не касаемся вопроса используемых инструментов для написания\u002Fотладки кода. Поэтому предположим, что это будет отдельный файл, которой потом просто отправится в корзину. Код будет следующим:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003Evar obj = app.activeDocument.selection[0];\nalert(obj.typename);\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EВ первой строке мы создаем ссылку на выделенный объект, во второй — выводим сообщение о том, каким типом он является. Выделяем в Adobe Illustrator контур маски, т.е. тот самый объект Compound Shape и запускаем скрипт. В окне сообщения мы видим, что Compound Shape представляет из себя PluginItem. Избавляемся от вспомогательного кода, снова возвращаемся к документации, но не находим у PluginItem ни свойства clipping, ни pathItems. Вообще ничего, что помогло бы нам однозначно указать, что этот объект является контуром маски. Из скрипта даже нельзя определить, что это за plugin. Какой-то внешний модуль и всё тут!\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cblockquote\u003EВот ведь засада! — восклицаете в сердцах вы. А мозг лихорадочно работает, в надежде решить нерешаемую задачу. И тогда, перебрав все возможные и невозможные варианты, вы в отчаянии нажимаете \u003Ccode\u003EDel\u003C\u002Fcode\u003E и удаляете ненавистный Compound Shape. И тут краем глаза на палитре \u003Ccode\u003ELayers\u003C\u002Fcode\u003E вы замечаете, что после этого действия, контейнер маски, который был \u003Ccode\u003EClip Group\u003C\u002Fcode\u003E, стал просто \u003Ccode\u003EGroup\u003C\u002Fcode\u003E. Что бы это могло значит? А то, что свойство \u003Ccode\u003Eclipped\u003C\u002Fcode\u003E объекта-маски из \u003Ccode\u003Etrue\u003C\u002Fcode\u003E стало \u003Ccode\u003Efalse\u003C\u002Fcode\u003E. Вот оно, решение, которое может сработать! Конечно это, по-большому счету, hack, но какая разница, если он поможет определить искомый контур.\u003C\u002Fblockquote\u003E\u003Cp\u003EАлгоритм определения контура маски, представленный объектом Compound Shape, тогда будет следующим: перебираем в цикле все объекты маски и, когда обнаруживаем PluginItem, то удаляем его и проверяем изменилось ли свойство \u003Ccode\u003Eclipped\u003C\u002Fcode\u003E у контейнера маски. Если оно стало \u003Ccode\u003Efalse\u003C\u002Fcode\u003E, значит это и есть наш контур. Единственное, чтобы этот hack сработал, надо после удаления объекта обновить DOM Illustrator, что можно сделать методом \u003Ccode\u003Eapp.redraw()\u003C\u002Fcode\u003E. Потом еще надо не забыть вернуть удаленный объект, что делается методом \u003Ccode\u003Eapp.undo()\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНиже приведен код для контура Compound Shape:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'PluginItem') {\n            sel[0].pageItems[i].remove();\n            app.redraw();\n            if (sel[0].clipped == false) {\n              app.undo();\n              clipPath = sel[0].pageItems[i];\n              break;\n            }\n            else {\n              app.undo();\n            }\n          };\n        };\n      };\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТеперь из всех возможных вариантов типа объектов, которые могут быть контуром маски, остался только текст (или \u003Ccode\u003ETextFrameItem\u003C\u002Fcode\u003E, в терминологии \u003Ca href=\"https:\u002F\u002Fwww.adobe.com\u002Fcontent\u002Fdam\u002Facom\u002Fen\u002Fdevnet\u002Fillustrator\u002Fpdf\u002FIllustrator_Scriptin_Reference_JavaScript_cc.pdf\"\u003Eillustrator scripting references\u003C\u002Fa\u003E). Снова обращаемся к документации и опять не находим там свойства \u003Ccode\u003Eclipping\u003C\u002Fcode\u003E. Но на этот раз мы уже не переживаем так сильно по этому поводу и спокойно выясняем, что у \u003Ccode\u003ETextFrameItem\u003C\u002Fcode\u003E есть свойство \u003Ccode\u003Ekind\u003C\u002Fcode\u003E, которое определяет тип текстового объекта (\u003Ccode\u003ETextType\u003C\u002Fcode\u003E). Выясняем, что таких типов может быть три: AREATEXT, POINTTEXT и PATHTEXT. Первый тип нам не интересен, так как его нельзя использовать в качестве контура маски, а другие два еще как интересны. Остается только найти hack, который поможет нам определить теперь уже не контур, а текстовый объект, являющийся контуром маски. И этим hack-ом станет команда, Convert To Area Type, которая конвертирует POINTTEXT в AREATEXT. Как и в случае с Compound Shape, при этом происходит неявное изменение свойства \u003Ccode\u003Eclipped\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EСоответственно, код для TextFrameItem типа POINTTEXT будет следующим:\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;\n              sel[0].pageItems[i].kind == 'TextType.POINTTEXT') {\n            sel[0].pageItems[i].convertPointObjectToAreaObject();\n            app.redraw();\n            if (sel[0].clipped == false) {\n              app.undo();\n              clipPath = sel[0].pageItems[i];\n              break;\n            }\n            else {\n              app.undo();\n            }\n          };\n        };\n      };\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EОстался только \u003Ccode\u003ETextFrameItem\u003C\u002Fcode\u003E типа PATHTEXT. К сожалению, при конвертировании PATHTEXT в AREATEXT, свойство \u003Ccode\u003Eclipped\u003C\u002Fcode\u003E не изменяется. Но так как это последний из возможных претендентов на звание \"контур маски\", то можно использовать именно такое его поведение. То есть проверяем, что после выполнения команды \u003Ccode\u003EConvert To Area Type\u003C\u002Fcode\u003E свойство \u003Ccode\u003Eclipped\u003C\u002Fcode\u003E осталось \u003Ccode\u003Etrue\u003C\u002Fcode\u003E. Ниже приведен код для TextFrameItem типа PATHTEXT.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;\n              sel[0].pageItems[i].kind == 'TextType.PATHTEXT') {\n            sel[0].pageItems[i].convertPointObjectToAreaObject();\n            app.redraw();\n            if (sel[0].clipped == true) {\n             clipPath = sel[0].pageItems[i];\n             break;\n            }\n            else {\n              app.undo();\n            }\n          };\n        };\n      };\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EТаким образом, если собрать вместе последовательно написанные части кода, включая блок проверок, то мы получим такой код, выполнение которого, как было заявлено еще в \u003Ca href=\"https:\u002F\u002Fhabr.com\u002Fru\u002Fpost\u002F452586\u002F\"\u003Eпервой части\u003C\u002Fa\u003E поста, будет реализовывать действие новой команды Expand Clipping Mask в Adobe Illustrator.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cpre\u003E\u003Ccode class=\"javascript\"\u003E#target illustrator\nif (app.documents.length \u003E 0) {\n  var doc = app.activeDocument;\n  var sel = doc.selection;\n  var clipPath = null;\n  if (sel.length \u003E 0) {\n    if (sel[0].typename == 'GroupItem' &amp;&amp; sel[0].clipped == true) {\n      var clipGroup = sel[0].pageItems.length;\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'PathItem' &amp;&amp;\n              sel[0].pageItems[i].clipping == true) {\n            clipPath = sel[0].pageItems[i];\n            break;\n          };\n        };\n      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'CompoundPathItem' &amp;&amp;\n              sel[0].pageItems[i].pathItems[0].clipping == true) {\n            clipPath = sel[0].pageItems[i];\n            break;\n          };\n        };\n      };\n      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'PluginItem') {\n            sel[0].pageItems[i].remove();\n            app.redraw();\n            if (sel[0].clipped == false) {\n              app.undo();\n              clipPath = sel[0].pageItems[i];\n              break;\n            }\n            else {\n              app.undo();\n            }\n          };\n        };\n      };\n      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;\n              sel[0].pageItems[i].kind == 'TextType.POINTTEXT') {\n            sel[0].pageItems[i].convertPointObjectToAreaObject();\n            app.redraw();\n            if (sel[0].clipped == false) {\n              app.undo();\n              clipPath = sel[0].pageItems[i];\n              break;\n            }\n            else {\n              app.undo();\n            }\n          };\n        };\n      };\n      if (clipPath == null) {\n        for (var i = 0; i &lt; clipGroup; i++) {\n          if (sel[0].pageItems[i].typename == 'TextFrame' &amp;&amp;\n              sel[0].pageItems[i].kind == 'TextType.PATHTEXT') {\n            sel[0].pageItems[i].convertPointObjectToAreaObject();\n            app.redraw();\n            if (sel[0].clipped == true) {\n              clipPath = sel[0].pageItems[i];\n              break;\n            }\n            else {\n              app.undo();\n            }\n          };\n        };\n      };\n      app.executeMenuCommand('releaseMask');\n      clipPath.remove();\n    }\n    else {\n      alert ('Выделение не является объектом-маской!');\n    };\n  }\n  else {\n    alert ('Нет выделенных объектов!');\n  };\n}\nelse {\n  alert ('Нет открытых документов!');\n};\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EЗдесь можно поставить точку. Нет, лучше точку с запятой.\u003C\u002Fp\u003E\u003Cbr\u002F\u003E\r\n\u003Cp\u003EНадеюсь, этими постами я помог вам стать немного ближе к своей цели — начать программировать в Adobe Illustrator. Спасибо за внимание!\u003C\u002Fp\u003E\u003C\u002Fdiv\u003E","tags":[{"titleHtml":"скрипты"},{"titleHtml":"adobe illustrator"},{"titleHtml":"обучение программированию"},{"titleHtml":"javascript"},{"titleHtml":"автоматизация рутинных действий"}],"metadata":{"stylesUrls":[],"scriptUrls":[],"shareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F452614\u002Ff6d1f8ec8eb14af0a1834dcbd401b33d\u002F","shareImageWidth":1200,"shareImageHeight":630,"vkShareImageUrl":"https:\u002F\u002Fhabr.com\u002Fshare\u002Fpublication\u002F452614\u002Ff6d1f8ec8eb14af0a1834dcbd401b33d\u002F?format=vk","schemaJsonLd":"{\"@context\":\"http:\\\u002F\\\u002Fschema.org\",\"@type\":\"Article\",\"mainEntityOfPage\":{\"@type\":\"WebPage\",\"@id\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F452614\\\u002F\"},\"headline\":\"Как начать программировать в Adobe Illustrator. Часть вторая\",\"datePublished\":\"2019-05-20T12:27:09+03:00\",\"dateModified\":\"2019-05-22T12:12:07+03:00\",\"author\":{\"@type\":\"Person\",\"name\":\"romaya\"},\"publisher\":{\"@type\":\"Organization\",\"name\":\"Habr\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\\u002F\\\u002Fhabrastorage.org\\\u002Fwebt\\\u002Fa_\\\u002Flk\\\u002F9m\\\u002Fa_lk9mjkccjox-zccjrpfolmkmq.png\"}},\"description\":\"Этот пост &mdash; продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основн...\",\"url\":\"https:\\\u002F\\\u002Fhabr.com\\\u002Fru\\\u002Fpost\\\u002F452614\\\u002F#post-content-body\",\"about\":[\"h_javascript\",\"h_programming\",\"h_vector_graphics\",\"f_develop\",\"f_design\"],\"image\":[\"https:\\\u002F\\\u002Fhabr.com\\\u002Fshare\\\u002Fpublication\\\u002F452614\\\u002Ff6d1f8ec8eb14af0a1834dcbd401b33d\\\u002F\"]}","metaDescription":"Этот пост — продолжение первой части, где был представлен скрипт Expand Clipping Mask и детально описано, что и как он делает, а также попутно рассмотрены основные принципы создания подобных программ...","mainImageUrl":null,"amp":false},"polls":[],"commentsEnabled":true,"rulesRemindEnabled":false,"votesEnabled":true,"status":"published","plannedPublishTime":null,"checked":null,"isEditorial":false}},"articlesIds":{},"isLoading":false,"pagesCount":{},"route":{},"reasonsList":null,"view":"cards","lastVisitedRoute":{},"ssrCommentsArticleIds":[""],"karma":{}},"authorContribution":{"authors":{}},"betaTest":{"currentAnnouncement":null,"announcements":{},"announcementCards":null,"announcementComments":{},"announcementCommentThreads":{},"announcementCommentingStatuses":{},"archivedList":[]},"authorStatistics":{"articleRefs":{},"articleIds":{},"pagesCount":{},"route":{},"viewsCount":[],"maxStatsCount":{}},"career":{"seoLandings":[],"hubs":"javascript,programming,vector_graphics"},"comments":{"articleComments":{},"searchCommentsResults":null,"previewComment":null,"pagesCount":null,"commentAccess":{},"scrollParents":{},"pageArticleComments":{"lastViewedComment":0,"postId":null,"lastCommentTimestamp":"","moderated":[],"moderatedIds":[],"commentRoute":""}},"companies":{"companyRefs":{},"companyIds":{},"companyTopIds":{},"pagesCount":{},"companyProfiles":{},"companiesCategories":[],"companiesCategoriesTotalCount":0,"companiesWidgets":{},"companiesWorkers":{},"companiesFans":{},"route":{},"isLoading":false,"companyWorkersLoading":false,"companyFansLoading":false,"vacancies":{}},"companiesContribution":{"hubs":{},"flows":{},"companyRefs":{}},"companyHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"conversation":{"messages":[],"respondent":null,"isLoadMore":false},"conversations":{"conversations":[],"unreadCount":0,"pagesCount":0,"isLoadMore":false},"desktopState":{"desktopFl":null,"desktopHl":null,"isChecked":false,"isLoginDemanded":false},"dfp":{"slotsDict":{}},"docs":{"menu":{},"articles":{},"mainMenu":[],"loading":{"main":false,"dropdown":false,"article":false}},"feature":{"isProbablyVisible":"true"},"flows":{"flows":[{"alias":"develop","id":1,"route":{"name":"FLOW_PAGE","params":{"flowName":"develop"}}},{"alias":"admin","id":6,"route":{"name":"FLOW_PAGE","params":{"flowName":"admin"}}},{"alias":"design","id":2,"route":{"name":"FLOW_PAGE","params":{"flowName":"design"}}},{"alias":"management","id":3,"route":{"name":"FLOW_PAGE","params":{"flowName":"management"}}},{"alias":"marketing","id":4,"route":{"name":"FLOW_PAGE","params":{"flowName":"marketing"}}},{"alias":"popsci","id":7,"route":{"name":"FLOW_PAGE","params":{"flowName":"popsci"}}}]},"global":{"isPwa":false,"device":"desktop","isHabrCom":true},"hubs":{"hubRefs":{},"hubIds":{},"pagesCount":{},"isLoading":false,"route":{}},"hubsBlock":{"hubRefs":{},"hubIds":{}},"i18n":{"fl":"ru","hl":"ru"},"info":{"infoPage":{},"isLoading":true},"location":{"urlStruct":{"protocol":null,"slashes":null,"auth":null,"host":null,"port":null,"hostname":null,"hash":null,"search":null,"query":{},"pathname":null,"path":null,"href":""},"searchQuery":null},"me":{"user":null,"ppgDemanded":false,"karmaResetInfo":{"canReincarnate":null,"wasReincarnated":null,"currentScore":null},"notes":null},"mostReadingList":{"mostReadingListIds":[],"mostReadingListRefs":null,"promoPost":null},"pinnedPost":{"pinnedPost":null},"ppa":{"articles":{},"card":null,"transactions":null,"totalTransactions":null,"isAccessible":null},"projectsBlocks":{"activeBlocks":{}},"pullRefresh":{"shouldRefresh":false},"sandbox":{"articleIds":[],"articleRefs":{},"pagesCount":null,"route":{},"lastVisitedRoute":{},"isLoading":false},"settingsOther":{"inputs":{"uiLang":{"errors":[],"ref":null,"value":""},"articlesLangEnglish":{"errors":[],"ref":null,"value":false},"articlesLangRussian":{"errors":[],"ref":null,"value":false},"agreement":{"errors":[],"ref":null,"value":false},"email":{"errors":[],"ref":null,"value":true},"digest":{"errors":[],"ref":null,"value":true}}},"similarList":{"similarListIds":[],"similarListRefs":null},"ssr":{"error":null,"isDataLoaded":false,"isDataLoading":false,"isHydrationFailed":false,"isServer":false},"userHubsContribution":{"contributionRefs":{"hubRefs":{},"hubIds":{}}},"userInvites":{"availableInvites":0,"usedInvitesIds":[],"usedInvitesRefs":{},"usedInvitesPagesCount":0,"unusedInvitesIds":[],"unusedInvitesRefs":{},"unusedInvitesPagesCount":0},"users":{"authorRefs":{},"authorIds":{},"pagesCount":{},"authorProfiles":{},"userHubs":{},"userInvitations":{},"authorFollowers":{},"authorFollowed":{},"karmaStats":[],"statistics":null,"isLoading":false,"authorFollowersLoading":false,"authorFollowedLoading":false,"userHubsLoading":false,"userInvitationsLoading":false,"route":{}},"viewport":{"prevScrollY":{},"scrollY":0,"width":0},"tracker":{"items":{},"pagesCache":{},"markedViewedSilently":{},"markedRead":{},"unreadCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null},"unviewedCounters":{"applications":null,"system":null,"mentions":null,"subscribers":null,"posts_and_comments":null}}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script>
<script src="https://assets.habr.com/habr-web/js/chunk-vendors.c2c3fc9a.js" defer></script><script src="https://assets.habr.com/habr-web/js/app.c0af73e7.js" defer></script>



    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    </script>
  
  <script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(24049213, "init", {
      defer:true,
      trackLinks:true,
      accurateTrackBounce:true,
      webvisor:false,
    });
  </script>
  <noscript>
    <div>
      <img src="https://mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" />
    </div>
  </noscript>
  
    <script type="text/javascript">
      window.addEventListener('load', function () {
        setTimeout(() => {
          const img = new Image();
          img.src = 'https://vk.com/rtrg?p=VK-RTRG-421343-57vKE';
        }, 0);
      });
    </script>
  
</body>
</html>
